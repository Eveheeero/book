<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p451" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_451{left:796px;bottom:68px;letter-spacing:0.08px;word-spacing:0.01px;}
#t2_451{left:834px;bottom:68px;letter-spacing:0.1px;}
#t3_451{left:716px;bottom:1076px;letter-spacing:0.24px;word-spacing:0.66px;}
#t4_451{left:182px;bottom:1051px;letter-spacing:0.23px;word-spacing:0.61px;}
#t5_451{left:732px;bottom:1027px;letter-spacing:0.28px;}
#t6_451{left:69px;bottom:972px;letter-spacing:-0.15px;word-spacing:-1.24px;}
#t7_451{left:69px;bottom:955px;letter-spacing:-0.12px;}
#t8_451{left:69px;bottom:930px;letter-spacing:-0.14px;word-spacing:-0.49px;}
#t9_451{left:69px;bottom:914px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#ta_451{left:69px;bottom:897px;letter-spacing:-0.16px;word-spacing:-1.08px;}
#tb_451{left:69px;bottom:880px;letter-spacing:-0.14px;word-spacing:-0.43px;}
#tc_451{left:69px;bottom:855px;letter-spacing:-0.14px;word-spacing:-1.13px;}
#td_451{left:69px;bottom:839px;letter-spacing:-0.16px;word-spacing:-0.81px;}
#te_451{left:69px;bottom:822px;letter-spacing:-0.15px;word-spacing:-0.43px;}
#tf_451{left:69px;bottom:754px;letter-spacing:0.15px;}
#tg_451{left:150px;bottom:754px;letter-spacing:0.21px;word-spacing:-0.03px;}
#th_451{left:69px;bottom:729px;letter-spacing:-0.14px;word-spacing:-0.48px;}
#ti_451{left:69px;bottom:712px;letter-spacing:-0.15px;word-spacing:-0.44px;}
#tj_451{left:69px;bottom:685px;}
#tk_451{left:95px;bottom:689px;letter-spacing:-0.15px;word-spacing:-0.45px;}
#tl_451{left:95px;bottom:672px;letter-spacing:-0.13px;word-spacing:-0.48px;}
#tm_451{left:95px;bottom:655px;letter-spacing:-0.16px;word-spacing:-0.45px;}
#tn_451{left:95px;bottom:639px;letter-spacing:-0.14px;word-spacing:-0.48px;}
#to_451{left:95px;bottom:622px;letter-spacing:-0.24px;word-spacing:-0.37px;}
#tp_451{left:69px;bottom:595px;}
#tq_451{left:95px;bottom:599px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#tr_451{left:95px;bottom:582px;letter-spacing:-0.15px;word-spacing:-0.48px;}
#ts_451{left:95px;bottom:565px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#tt_451{left:95px;bottom:548px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#tu_451{left:69px;bottom:480px;letter-spacing:0.14px;}
#tv_451{left:150px;bottom:480px;letter-spacing:0.21px;word-spacing:0.01px;}
#tw_451{left:69px;bottom:455px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#tx_451{left:69px;bottom:438px;letter-spacing:-0.14px;word-spacing:-0.67px;}
#ty_451{left:69px;bottom:422px;letter-spacing:-0.14px;word-spacing:-0.44px;}
#tz_451{left:292px;bottom:428px;}
#t10_451{left:306px;bottom:422px;letter-spacing:-0.15px;word-spacing:-0.49px;}
#t11_451{left:69px;bottom:405px;letter-spacing:-0.14px;word-spacing:-1.06px;}
#t12_451{left:69px;bottom:388px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#t13_451{left:69px;bottom:371px;letter-spacing:-0.14px;word-spacing:-0.89px;}
#t14_451{left:69px;bottom:354px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#t15_451{left:69px;bottom:338px;letter-spacing:-0.15px;word-spacing:-0.83px;}
#t16_451{left:69px;bottom:321px;letter-spacing:-0.14px;word-spacing:-1.17px;}
#t17_451{left:69px;bottom:304px;letter-spacing:-0.14px;word-spacing:-0.49px;}
#t18_451{left:69px;bottom:287px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#t19_451{left:69px;bottom:263px;letter-spacing:-0.17px;word-spacing:-0.43px;}
#t1a_451{left:69px;bottom:236px;}
#t1b_451{left:95px;bottom:240px;letter-spacing:-0.14px;word-spacing:-0.48px;}
#t1c_451{left:69px;bottom:213px;}
#t1d_451{left:95px;bottom:217px;letter-spacing:-0.16px;word-spacing:-0.45px;}
#t1e_451{left:69px;bottom:190px;}
#t1f_451{left:95px;bottom:194px;letter-spacing:-0.14px;word-spacing:-0.46px;}
#t1g_451{left:95px;bottom:177px;letter-spacing:-0.15px;word-spacing:-0.47px;}
#t1h_451{left:69px;bottom:151px;}
#t1i_451{left:95px;bottom:154px;letter-spacing:-0.14px;word-spacing:-0.7px;}
#t1j_451{left:95px;bottom:137px;letter-spacing:-0.43px;}

.s1_451{font-size:12px;font-family:NeoSansIntel_6wv3;color:#000;}
.s2_451{font-size:24px;font-family:NeoSansIntelMedium_6wv2;color:#0860A8;}
.s3_451{font-size:14px;font-family:Verdana_b5t;color:#000;}
.s4_451{font-size:21px;font-family:NeoSansIntelMedium_6wv2;color:#0860A8;}
.s5_451{font-size:21px;font-family:TimesNewRoman_b5y;color:#000;}
.s6_451{font-size:11px;font-family:Verdana_b5t;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts451" type="text/css" >

@font-face {
	font-family: NeoSansIntelMedium_6wv2;
	src: url("fonts/NeoSansIntelMedium_6wv2.woff") format("woff");
}

@font-face {
	font-family: NeoSansIntel_6wv3;
	src: url("fonts/NeoSansIntel_6wv3.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_b5y;
	src: url("fonts/TimesNewRoman_b5y.woff") format("woff");
}

@font-face {
	font-family: Verdana_b5t;
	src: url("fonts/Verdana_b5t.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg451Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg451" style="-webkit-user-select: none;"><object width="935" height="1210" data="451/451.svg" type="image/svg+xml" id="pdf451" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_451" class="t s1_451">Vol. 1 </span><span id="t2_451" class="t s1_451">D-1 </span>
<span id="t3_451" class="t s2_451">APPENDIX D </span>
<span id="t4_451" class="t s2_451">GUIDELINES FOR WRITING SIMD FLOATING-POINT EXCEPTION </span>
<span id="t5_451" class="t s2_451">HANDLERS </span>
<span id="t6_451" class="t s3_451">See Section 11.5, “Intel® SSE, SSE2, and SSE3 Exceptions,” for a detailed discussion of SIMD floating-point excep- </span>
<span id="t7_451" class="t s3_451">tions. </span>
<span id="t8_451" class="t s3_451">This appendix considers only Intel SSE, SSE2, and SSE3 instructions that can generate numeric (SIMD floating- </span>
<span id="t9_451" class="t s3_451">point) exceptions, and gives an overview of the necessary support for handling such exceptions. This appendix </span>
<span id="ta_451" class="t s3_451">does not address instructions that do not generate floating-point exceptions (such as RSQRTSS, RSQRTPS, RCPSS, </span>
<span id="tb_451" class="t s3_451">or RCPPS), any x87 instructions, or any unlisted instruction. </span>
<span id="tc_451" class="t s3_451">For detailed information on which instructions generate numeric exceptions, and a listing of those exceptions, refer </span>
<span id="td_451" class="t s3_451">to Appendix C, “Floating-Point Exceptions Summary.” Non-numeric exceptions are handled in a way similar to that </span>
<span id="te_451" class="t s3_451">for the standard IA-32 instructions. </span>
<span id="tf_451" class="t s4_451">D.1 </span><span id="tg_451" class="t s4_451">TWO OPTIONS FOR HANDLING FLOATING-POINT EXCEPTIONS </span>
<span id="th_451" class="t s3_451">Just as for x87 FPU floating-point exceptions, the processor takes one of two possible courses of action when an </span>
<span id="ti_451" class="t s3_451">SSE/SSE2/SSE3 instruction raises a floating-point exception: </span>
<span id="tj_451" class="t s5_451">• </span><span id="tk_451" class="t s3_451">If the exception being raised is masked (by setting the corresponding mask bit in the MXCSR to 1), then a </span>
<span id="tl_451" class="t s3_451">default result is produced which is acceptable in most situations. No external indication of the exception is </span>
<span id="tm_451" class="t s3_451">given, but the corresponding exception flags in the MXCSR are set and may be examined later. Note though </span>
<span id="tn_451" class="t s3_451">that for packed operations, an exception flag that is set in the MXCSR will not tell which of the sub-operands </span>
<span id="to_451" class="t s3_451">caused the event to occur. </span>
<span id="tp_451" class="t s5_451">• </span><span id="tq_451" class="t s3_451">If the exception being raised is not masked (by setting the corresponding mask bit in the MXCSR to 0), a </span>
<span id="tr_451" class="t s3_451">software exception handler previously registered by the user with operating system support will be invoked </span>
<span id="ts_451" class="t s3_451">through the SIMD floating-point exception (#XM, exception 19). This case is discussed below in Section D.2, </span>
<span id="tt_451" class="t s3_451">“Software Exception Handling.” </span>
<span id="tu_451" class="t s4_451">D.2 </span><span id="tv_451" class="t s4_451">SOFTWARE EXCEPTION HANDLING </span>
<span id="tw_451" class="t s3_451">The #XM handler is usually part of the system software (the operating system kernel). Note that an interrupt </span>
<span id="tx_451" class="t s3_451">descriptor table (IDT) entry must have been previously set up for exception 19 (refer to Chapter 6, “Interrupt and </span>
<span id="ty_451" class="t s3_451">Exception Handling,” in the Intel </span>
<span id="tz_451" class="t s6_451">® </span>
<span id="t10_451" class="t s3_451">64 and IA-32 Architectures Software Developer’s Manual, Volume 3A). Some </span>
<span id="t11_451" class="t s3_451">compilers use specific run-time libraries to assist in floating-point exception handling. If any x87 FPU floating-point </span>
<span id="t12_451" class="t s3_451">operations are going to be performed that might raise floating-point exceptions, then the exception handling </span>
<span id="t13_451" class="t s3_451">routine must either disable all floating-point exceptions (for example, loading a local control word with FLDCW), or </span>
<span id="t14_451" class="t s3_451">it must be implemented as re-entrant. If this is not the case, the routine has to clear the status flags for x87 FPU </span>
<span id="t15_451" class="t s3_451">exceptions or to mask all x87 FPU floating-point exceptions. For SIMD floating-point exceptions though, the excep- </span>
<span id="t16_451" class="t s3_451">tion flags in MXCSR do not have to be cleared, even if they remain unmasked (but they may still be cleared). Excep- </span>
<span id="t17_451" class="t s3_451">tions are in this case precise and occur immediately, and a SIMD floating-point exception status flag that is set </span>
<span id="t18_451" class="t s3_451">when the corresponding exception is unmasked will not generate an exception. </span>
<span id="t19_451" class="t s3_451">Typical actions performed by this low-level exception handling routine are: </span>
<span id="t1a_451" class="t s5_451">• </span><span id="t1b_451" class="t s3_451">Incrementing an exception counter for later display or printing. </span>
<span id="t1c_451" class="t s5_451">• </span><span id="t1d_451" class="t s3_451">Printing or displaying diagnostic information (e.g., the MXCSR and XMM registers). </span>
<span id="t1e_451" class="t s5_451">• </span><span id="t1f_451" class="t s3_451">Aborting further execution, or using the exception pointers to build an instruction that will run without </span>
<span id="t1g_451" class="t s3_451">exception and executing it. </span>
<span id="t1h_451" class="t s5_451">• </span><span id="t1i_451" class="t s3_451">Storing information about the exception in a data structure that will be passed to a higher level user exception </span>
<span id="t1j_451" class="t s3_451">handler. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
