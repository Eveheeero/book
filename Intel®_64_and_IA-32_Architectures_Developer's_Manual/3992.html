<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p3992" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_3992{left:69px;bottom:68px;letter-spacing:0.12px;}
#t2_3992{left:110px;bottom:68px;letter-spacing:0.1px;}
#t3_3992{left:69px;bottom:1141px;letter-spacing:-0.15px;word-spacing:0.01px;}
#t4_3992{left:69px;bottom:1088px;letter-spacing:-0.15px;word-spacing:-0.79px;}
#t5_3992{left:465px;bottom:1088px;letter-spacing:-0.15px;word-spacing:-0.85px;}
#t6_3992{left:588px;bottom:1088px;letter-spacing:-0.13px;word-spacing:-0.85px;}
#t7_3992{left:69px;bottom:1071px;letter-spacing:-0.14px;word-spacing:-0.48px;}
#t8_3992{left:69px;bottom:1054px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#t9_3992{left:69px;bottom:1037px;letter-spacing:-0.13px;word-spacing:-0.49px;}
#ta_3992{left:69px;bottom:1011px;}
#tb_3992{left:95px;bottom:1014px;letter-spacing:-0.13px;word-spacing:-0.44px;}
#tc_3992{left:69px;bottom:988px;}
#td_3992{left:95px;bottom:991px;letter-spacing:-0.14px;word-spacing:-0.43px;}
#te_3992{left:69px;bottom:965px;}
#tf_3992{left:95px;bottom:969px;letter-spacing:-0.14px;word-spacing:-0.48px;}
#tg_3992{left:95px;bottom:952px;letter-spacing:-0.15px;word-spacing:-0.5px;}
#th_3992{left:69px;bottom:925px;}
#ti_3992{left:95px;bottom:929px;letter-spacing:-0.14px;word-spacing:-0.43px;}
#tj_3992{left:69px;bottom:906px;letter-spacing:-0.16px;word-spacing:-0.44px;}
#tk_3992{left:500px;bottom:906px;letter-spacing:-0.17px;word-spacing:-0.46px;}
#tl_3992{left:601px;bottom:906px;letter-spacing:-0.13px;word-spacing:-0.49px;}
#tm_3992{left:69px;bottom:889px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#tn_3992{left:69px;bottom:872px;letter-spacing:-0.15px;}
#to_3992{left:69px;bottom:846px;}
#tp_3992{left:95px;bottom:849px;letter-spacing:-0.17px;word-spacing:-0.39px;}
#tq_3992{left:69px;bottom:823px;}
#tr_3992{left:95px;bottom:826px;letter-spacing:-0.14px;word-spacing:-0.42px;}
#ts_3992{left:69px;bottom:800px;}
#tt_3992{left:95px;bottom:804px;letter-spacing:-0.14px;word-spacing:-0.36px;}
#tu_3992{left:277px;bottom:804px;letter-spacing:-0.13px;word-spacing:-0.47px;}
#tv_3992{left:69px;bottom:779px;letter-spacing:-0.16px;word-spacing:-0.46px;}
#tw_3992{left:69px;bottom:762px;letter-spacing:-0.15px;word-spacing:-0.47px;}
#tx_3992{left:69px;bottom:736px;}
#ty_3992{left:95px;bottom:739px;letter-spacing:-0.16px;word-spacing:-0.43px;}
#tz_3992{left:69px;bottom:713px;}
#t10_3992{left:95px;bottom:716px;letter-spacing:-0.16px;word-spacing:-0.61px;}
#t11_3992{left:95px;bottom:700px;letter-spacing:-0.13px;word-spacing:-0.96px;}
#t12_3992{left:465px;bottom:700px;letter-spacing:-0.13px;word-spacing:-0.99px;}
#t13_3992{left:640px;bottom:700px;letter-spacing:-0.13px;word-spacing:-0.97px;}
#t14_3992{left:95px;bottom:683px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#t15_3992{left:69px;bottom:656px;}
#t16_3992{left:95px;bottom:660px;letter-spacing:-0.13px;}
#t17_3992{left:125px;bottom:660px;letter-spacing:-0.15px;word-spacing:-1.17px;}
#t18_3992{left:578px;bottom:660px;letter-spacing:-0.13px;word-spacing:-1.19px;}
#t19_3992{left:95px;bottom:643px;letter-spacing:-0.15px;word-spacing:-0.42px;}
#t1a_3992{left:69px;bottom:619px;letter-spacing:-0.16px;word-spacing:-0.43px;}
#t1b_3992{left:69px;bottom:602px;letter-spacing:-0.13px;word-spacing:-0.5px;}
#t1c_3992{left:69px;bottom:534px;letter-spacing:0.17px;}
#t1d_3992{left:150px;bottom:534px;letter-spacing:0.2px;word-spacing:0.07px;}
#t1e_3992{left:69px;bottom:509px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#t1f_3992{left:69px;bottom:492px;letter-spacing:-0.14px;word-spacing:-0.45px;}
#t1g_3992{left:69px;bottom:475px;letter-spacing:-0.16px;word-spacing:-1.16px;}
#t1h_3992{left:633px;bottom:482px;}
#t1i_3992{left:644px;bottom:475px;letter-spacing:-0.12px;word-spacing:-1.19px;}
#t1j_3992{left:69px;bottom:458px;letter-spacing:-0.15px;word-spacing:-0.45px;}
#t1k_3992{left:69px;bottom:441px;letter-spacing:-0.15px;word-spacing:-0.47px;}
#t1l_3992{left:69px;bottom:415px;}
#t1m_3992{left:95px;bottom:419px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#t1n_3992{left:95px;bottom:402px;letter-spacing:-0.14px;word-spacing:-0.46px;}
#t1o_3992{left:69px;bottom:375px;}
#t1p_3992{left:95px;bottom:379px;letter-spacing:-0.14px;word-spacing:-0.46px;}
#t1q_3992{left:95px;bottom:362px;letter-spacing:-0.14px;word-spacing:-0.44px;}
#t1r_3992{left:95px;bottom:345px;letter-spacing:-0.13px;word-spacing:-1.11px;}
#t1s_3992{left:281px;bottom:345px;letter-spacing:-0.14px;word-spacing:-1.12px;}
#t1t_3992{left:396px;bottom:345px;letter-spacing:-0.14px;word-spacing:-1.09px;}
#t1u_3992{left:724px;bottom:345px;letter-spacing:-0.14px;word-spacing:-1.05px;}
#t1v_3992{left:95px;bottom:328px;letter-spacing:-0.15px;word-spacing:-0.42px;}
#t1w_3992{left:69px;bottom:302px;}
#t1x_3992{left:95px;bottom:305px;letter-spacing:-0.14px;word-spacing:-0.78px;}
#t1y_3992{left:95px;bottom:289px;letter-spacing:-0.13px;word-spacing:-1.01px;}
#t1z_3992{left:95px;bottom:272px;letter-spacing:-0.14px;word-spacing:-0.44px;}
#t20_3992{left:95px;bottom:255px;letter-spacing:-0.14px;word-spacing:-0.48px;}
#t21_3992{left:95px;bottom:231px;}
#t22_3992{left:121px;bottom:231px;letter-spacing:-0.14px;word-spacing:-0.39px;}
#t23_3992{left:95px;bottom:206px;}
#t24_3992{left:121px;bottom:206px;letter-spacing:-0.16px;word-spacing:-0.39px;}
#t25_3992{left:69px;bottom:133px;letter-spacing:-0.11px;}
#t26_3992{left:91px;bottom:133px;letter-spacing:-0.12px;}
#t27_3992{left:91px;bottom:116px;letter-spacing:-0.11px;}

.s1_3992{font-size:12px;font-family:NeoSansIntel_6wv3;color:#000;}
.s2_3992{font-size:14px;font-family:NeoSansIntel_6wv3;color:#0860A8;}
.s3_3992{font-size:14px;font-family:Verdana_b5t;color:#000;}
.s4_3992{font-size:14px;font-family:Verdana-Bold_b5u;color:#000;}
.s5_3992{font-size:21px;font-family:TimesNewRoman_b5y;color:#000;}
.s6_3992{font-size:21px;font-family:NeoSansIntelMedium_6wv2;color:#0860A8;}
.s7_3992{font-size:11px;font-family:Verdana_b5t;color:#000;}
.s8_3992{font-size:14px;font-family:NeoSansIntel_6wv3;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts3992" type="text/css" >

@font-face {
	font-family: NeoSansIntelMedium_6wv2;
	src: url("fonts/NeoSansIntelMedium_6wv2.woff") format("woff");
}

@font-face {
	font-family: NeoSansIntel_6wv3;
	src: url("fonts/NeoSansIntel_6wv3.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_b5y;
	src: url("fonts/TimesNewRoman_b5y.woff") format("woff");
}

@font-face {
	font-family: Verdana-Bold_b5u;
	src: url("fonts/Verdana-Bold_b5u.woff") format("woff");
}

@font-face {
	font-family: Verdana_b5t;
	src: url("fonts/Verdana_b5t.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg3992Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg3992" style="-webkit-user-select: none;"><object width="935" height="1210" data="3992/3992.svg" type="image/svg+xml" id="pdf3992" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_3992" class="t s1_3992">26-22 </span><span id="t2_3992" class="t s1_3992">Vol. 3C </span>
<span id="t3_3992" class="t s2_3992">VMX NON-ROOT OPERATION </span>
<span id="t4_3992" class="t s3_3992">The root of each PASID-translation hierarchy is a 4-KByte </span><span id="t5_3992" class="t s4_3992">PASID directory</span><span id="t6_3992" class="t s3_3992">. The low PASID directory is located at </span>
<span id="t7_3992" class="t s3_3992">the low PASID directory address, and the high PASID directory is located at the high PASID directory address </span>
<span id="t8_3992" class="t s3_3992">(these physical addresses are VM-execution control fields in the VMCS). A PASID directory comprises 512 8-byte </span>
<span id="t9_3992" class="t s3_3992">entries, each of which has the following format: </span>
<span id="ta_3992" class="t s5_3992">• </span><span id="tb_3992" class="t s3_3992">Bit 0 is the entry’s present bit. The entry is used only if this bit is 1. </span>
<span id="tc_3992" class="t s5_3992">• </span><span id="td_3992" class="t s3_3992">Bits 11:1 are reserved and must be 0. </span>
<span id="te_3992" class="t s5_3992">• </span><span id="tf_3992" class="t s3_3992">Bits M–1:12 specify the 4-KByte aligned address of a PASID table (see below), where M is the processor’s </span>
<span id="tg_3992" class="t s3_3992">physical-address width. </span>
<span id="th_3992" class="t s5_3992">• </span><span id="ti_3992" class="t s3_3992">Bits 63:M are reserved and must be 0. </span>
<span id="tj_3992" class="t s3_3992">A PASID-translation hierarchy also includes up to 512 4-KByte </span><span id="tk_3992" class="t s4_3992">PASID tables</span><span id="tl_3992" class="t s3_3992">; each of these is referenced by a </span>
<span id="tm_3992" class="t s3_3992">PASID directory entry (see above). A PASID table comprises 1024 4-byte entries, each of which has the following </span>
<span id="tn_3992" class="t s3_3992">format: </span>
<span id="to_3992" class="t s5_3992">• </span><span id="tp_3992" class="t s3_3992">Bits 19:0 are the host PASID specified by the entry. </span>
<span id="tq_3992" class="t s5_3992">• </span><span id="tr_3992" class="t s3_3992">Bits 30:20 are reserved and must be 0. </span>
<span id="ts_3992" class="t s5_3992">• </span><span id="tt_3992" class="t s3_3992">Bits 31 is the entry’s valid </span><span id="tu_3992" class="t s3_3992">bit. The entry is used only if this bit is 1. </span>
<span id="tv_3992" class="t s3_3992">When PASID translation is enabled, the guest PASID determined by the instruction (see above) is converted to a </span>
<span id="tw_3992" class="t s3_3992">host PASID using the following process: </span>
<span id="tx_3992" class="t s5_3992">• </span><span id="ty_3992" class="t s3_3992">If bit 19 of guest PASID is clear, the low PASID directory is used; otherwise, the high PASID directory is used. </span>
<span id="tz_3992" class="t s5_3992">• </span><span id="t10_3992" class="t s3_3992">Bits 18:10 of the guest PASID select an entry from the PASID directory. A VM exit occurs if the entry’s present </span>
<span id="t11_3992" class="t s3_3992">bit is clear or if any reserved bit is set. Otherwise, bits </span><span id="t12_3992" class="t s3_3992">M:0 of the entry (with bit </span><span id="t13_3992" class="t s3_3992">0 cleared) contain the physical </span>
<span id="t14_3992" class="t s3_3992">address of a PASID table. </span>
<span id="t15_3992" class="t s5_3992">• </span><span id="t16_3992" class="t s3_3992">Bits </span><span id="t17_3992" class="t s3_3992">9:0 of the guest PASID select an entry from the PASID table. A VM </span><span id="t18_3992" class="t s3_3992">exit occurs if the entry’s valid bit is clear </span>
<span id="t19_3992" class="t s3_3992">or if any reserved bit is set. Otherwise, bits 19:0 of the entry are the host PASID. </span>
<span id="t1a_3992" class="t s3_3992">If PASID translation results in a VM exit (due to a present or valid bit being clear, or a reserved bit being set), the </span>
<span id="t1b_3992" class="t s3_3992">instruction does not complete and no enqueue store is performed. </span>
<span id="t1c_3992" class="t s6_3992">26.6 </span><span id="t1d_3992" class="t s6_3992">UNRESTRICTED GUESTS </span>
<span id="t1e_3992" class="t s3_3992">The first processors to support VMX operation require CR0.PE and CR0.PG to be 1 in VMX operation (see Section </span>
<span id="t1f_3992" class="t s3_3992">24.8). This restriction implies that guest software cannot be run in unpaged protected mode or in real-address </span>
<span id="t1g_3992" class="t s3_3992">mode. Later processors support a VM-execution control called “unrestricted guest”. </span>
<span id="t1h_3992" class="t s7_3992">1 </span>
<span id="t1i_3992" class="t s3_3992">If this control is 1, CR0.PE and </span>
<span id="t1j_3992" class="t s3_3992">CR0.PG may be 0 in VMX non-root operation. Such processors allow guest software to run in unpaged protected </span>
<span id="t1k_3992" class="t s3_3992">mode or in real-address mode. The following items describe the behavior of such software: </span>
<span id="t1l_3992" class="t s5_3992">• </span><span id="t1m_3992" class="t s3_3992">The MOV CR0 instructions does not cause a general-protection exception simply because it would set either </span>
<span id="t1n_3992" class="t s3_3992">CR0.PE and CR0.PG to 0. See Section 26.3 for details. </span>
<span id="t1o_3992" class="t s5_3992">• </span><span id="t1p_3992" class="t s3_3992">A logical processor treats the values of CR0.PE and CR0.PG in VMX non-root operation just as it does outside </span>
<span id="t1q_3992" class="t s3_3992">VMX operation. Thus, if CR0.PE = 0, the processor operates as it does normally in real-address mode (for </span>
<span id="t1r_3992" class="t s3_3992">example, it uses the 16-bit </span><span id="t1s_3992" class="t s4_3992">interrupt table </span><span id="t1t_3992" class="t s3_3992">to deliver interrupts and exceptions). If CR0.PG </span><span id="t1u_3992" class="t s3_3992">= 0, the processor </span>
<span id="t1v_3992" class="t s3_3992">operates as it does normally when paging is disabled. </span>
<span id="t1w_3992" class="t s5_3992">• </span><span id="t1x_3992" class="t s3_3992">Processor operation is modified by the fact that the processor is in VMX non-root operation and by the settings </span>
<span id="t1y_3992" class="t s3_3992">of the VM-execution controls just as it is in protected mode or when paging is enabled. Instructions, interrupts, </span>
<span id="t1z_3992" class="t s3_3992">and exceptions that cause VM exits in protected mode or when paging is enabled also do so in real-address </span>
<span id="t20_3992" class="t s3_3992">mode or when paging is disabled. The following examples should be noted: </span>
<span id="t21_3992" class="t s3_3992">— </span><span id="t22_3992" class="t s3_3992">If CR0.PG = 0, page faults do not occur and thus cannot cause VM exits. </span>
<span id="t23_3992" class="t s3_3992">— </span><span id="t24_3992" class="t s3_3992">If CR0.PE = 0, invalid-TSS exceptions do not occur and thus cannot cause VM exits. </span>
<span id="t25_3992" class="t s8_3992">1. </span><span id="t26_3992" class="t s8_3992">“Unrestricted guest” is a secondary processor-based VM-execution control. If bit 31 of the primary processor-based VM-execution </span>
<span id="t27_3992" class="t s8_3992">controls is 0, VMX non-root operation functions as if the “unrestricted guest” VM-execution control were 0. See Section 25.6.2. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
