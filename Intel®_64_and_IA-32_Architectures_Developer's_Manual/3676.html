<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p3676" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_3676{left:69px;bottom:68px;letter-spacing:0.12px;}
#t2_3676{left:110px;bottom:68px;letter-spacing:0.1px;}
#t3_3676{left:69px;bottom:1141px;letter-spacing:-0.13px;}
#t4_3676{left:69px;bottom:1088px;letter-spacing:-0.15px;word-spacing:-1.05px;}
#t5_3676{left:69px;bottom:1071px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#t6_3676{left:69px;bottom:1012px;letter-spacing:0.14px;}
#t7_3676{left:151px;bottom:1012px;letter-spacing:0.16px;word-spacing:0.01px;}
#t8_3676{left:69px;bottom:988px;letter-spacing:-0.14px;word-spacing:-0.89px;}
#t9_3676{left:69px;bottom:972px;letter-spacing:-0.15px;word-spacing:-0.47px;}
#ta_3676{left:69px;bottom:955px;letter-spacing:-0.16px;word-spacing:-1.26px;}
#tb_3676{left:69px;bottom:938px;letter-spacing:-0.16px;word-spacing:-0.44px;}
#tc_3676{left:69px;bottom:921px;letter-spacing:-0.15px;word-spacing:-0.45px;}
#td_3676{left:69px;bottom:897px;letter-spacing:-0.15px;word-spacing:-0.45px;}
#te_3676{left:69px;bottom:880px;letter-spacing:-0.17px;word-spacing:-0.47px;}
#tf_3676{left:69px;bottom:863px;letter-spacing:-0.16px;word-spacing:-0.47px;}
#tg_3676{left:69px;bottom:837px;}
#th_3676{left:95px;bottom:840px;letter-spacing:-0.21px;word-spacing:-0.4px;}
#ti_3676{left:69px;bottom:814px;}
#tj_3676{left:95px;bottom:817px;letter-spacing:-0.16px;word-spacing:-0.85px;}
#tk_3676{left:95px;bottom:800px;letter-spacing:-0.15px;word-spacing:-0.45px;}
#tl_3676{left:69px;bottom:774px;}
#tm_3676{left:95px;bottom:778px;letter-spacing:-0.15px;word-spacing:-1.22px;}
#tn_3676{left:95px;bottom:761px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#to_3676{left:69px;bottom:736px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#tp_3676{left:69px;bottom:719px;letter-spacing:-0.17px;word-spacing:-1.2px;}
#tq_3676{left:69px;bottom:703px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#tr_3676{left:69px;bottom:686px;letter-spacing:-0.23px;word-spacing:-0.42px;}
#ts_3676{left:69px;bottom:661px;letter-spacing:-0.16px;word-spacing:-0.82px;}
#tt_3676{left:69px;bottom:645px;letter-spacing:-0.11px;word-spacing:-0.52px;}
#tu_3676{left:69px;bottom:586px;letter-spacing:0.14px;}
#tv_3676{left:151px;bottom:586px;letter-spacing:0.15px;word-spacing:0.01px;}
#tw_3676{left:69px;bottom:562px;letter-spacing:-0.16px;word-spacing:-0.95px;}
#tx_3676{left:69px;bottom:545px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#ty_3676{left:69px;bottom:529px;letter-spacing:-0.17px;word-spacing:-0.46px;}
#tz_3676{left:69px;bottom:504px;letter-spacing:-0.16px;word-spacing:-0.46px;}
#t10_3676{left:69px;bottom:487px;letter-spacing:-0.16px;word-spacing:-0.49px;}
#t11_3676{left:96px;bottom:463px;letter-spacing:-0.2px;word-spacing:-0.43px;}
#t12_3676{left:69px;bottom:438px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#t13_3676{left:508px;bottom:445px;}
#t14_3676{left:515px;bottom:438px;}
#t15_3676{left:69px;bottom:414px;letter-spacing:-0.15px;word-spacing:-0.48px;}
#t16_3676{left:69px;bottom:346px;letter-spacing:0.17px;}
#t17_3676{left:150px;bottom:346px;letter-spacing:0.2px;word-spacing:0.03px;}
#t18_3676{left:149px;bottom:320px;letter-spacing:0.22px;}
#t19_3676{left:69px;bottom:295px;letter-spacing:-0.16px;word-spacing:-0.45px;}
#t1a_3676{left:69px;bottom:278px;letter-spacing:-0.17px;word-spacing:-0.88px;}
#t1b_3676{left:675px;bottom:285px;}
#t1c_3676{left:690px;bottom:278px;letter-spacing:-0.31px;}
#t1d_3676{left:725px;bottom:285px;}
#t1e_3676{left:740px;bottom:278px;letter-spacing:-0.13px;word-spacing:-0.88px;}
#t1f_3676{left:69px;bottom:261px;letter-spacing:-0.13px;word-spacing:-0.51px;}
#t1g_3676{left:69px;bottom:244px;letter-spacing:-0.15px;word-spacing:-0.47px;}
#t1h_3676{left:69px;bottom:228px;letter-spacing:-0.15px;word-spacing:-0.96px;}
#t1i_3676{left:69px;bottom:211px;letter-spacing:-0.19px;word-spacing:-0.44px;}
#t1j_3676{left:69px;bottom:133px;letter-spacing:-0.16px;}
#t1k_3676{left:91px;bottom:133px;letter-spacing:-0.12px;word-spacing:-0.44px;}
#t1l_3676{left:91px;bottom:116px;letter-spacing:-0.12px;}

.s1_3676{font-size:12px;font-family:NeoSansIntel_6wv3;color:#000;}
.s2_3676{font-size:14px;font-family:NeoSansIntel_6wv3;color:#0860A8;}
.s3_3676{font-size:14px;font-family:Verdana_b5t;color:#000;}
.s4_3676{font-size:18px;font-family:NeoSansIntelMedium_6wv2;color:#0860A8;}
.s5_3676{font-size:21px;font-family:TimesNewRoman_b5y;color:#000;}
.s6_3676{font-size:11px;font-family:Verdana_b5t;color:#000;}
.s7_3676{font-size:21px;font-family:NeoSansIntelMedium_6wv2;color:#0860A8;}
.s8_3676{font-size:14px;font-family:NeoSansIntel_6wv3;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts3676" type="text/css" >

@font-face {
	font-family: NeoSansIntelMedium_6wv2;
	src: url("fonts/NeoSansIntelMedium_6wv2.woff") format("woff");
}

@font-face {
	font-family: NeoSansIntel_6wv3;
	src: url("fonts/NeoSansIntel_6wv3.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_b5y;
	src: url("fonts/TimesNewRoman_b5y.woff") format("woff");
}

@font-face {
	font-family: Verdana_b5t;
	src: url("fonts/Verdana_b5t.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg3676Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg3676" style="-webkit-user-select: none;"><object width="935" height="1210" data="3676/3676.svg" type="image/svg+xml" id="pdf3676" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_3676" class="t s1_3676">18-44 </span><span id="t2_3676" class="t s1_3676">Vol. 3B </span>
<span id="t3_3676" class="t s2_3676">DEBUG, BRANCH PROFILE, TSC, AND INTEL® RESOURCE DIRECTOR TECHNOLOGY (INTEL® RDT) FEATURES </span>
<span id="t4_3676" class="t s3_3676">User mode software can use RDTSCP to detect if CPU migration has occurred between successive reads of the TSC. </span>
<span id="t5_3676" class="t s3_3676">It can also be used to adjust for per-CPU differences in TSC values in a NUMA system. </span>
<span id="t6_3676" class="t s4_3676">18.17.3 </span><span id="t7_3676" class="t s4_3676">Time-Stamp Counter Adjustment </span>
<span id="t8_3676" class="t s3_3676">Software can modify the value of the time-stamp counter (TSC) of a logical processor by using the WRMSR instruc- </span>
<span id="t9_3676" class="t s3_3676">tion to write to the IA32_TIME_STAMP_COUNTER MSR (address 10H). Because such a write applies only to that </span>
<span id="ta_3676" class="t s3_3676">logical processor, software seeking to synchronize the TSC values of multiple logical processors must perform these </span>
<span id="tb_3676" class="t s3_3676">writes on each logical processor. It may be difficult for software to do this in a way that ensures that all logical </span>
<span id="tc_3676" class="t s3_3676">processors will have the same value for the TSC at a given point in time. </span>
<span id="td_3676" class="t s3_3676">The synchronization of TSC adjustment can be simplified by using the 64-bit IA32_TSC_ADJUST MSR (address </span>
<span id="te_3676" class="t s3_3676">3BH). Like the IA32_TIME_STAMP_COUNTER MSR, the IA32_TSC_ADJUST MSR is maintained separately for each </span>
<span id="tf_3676" class="t s3_3676">logical processor. A logical processor maintains and uses the IA32_TSC_ADJUST MSR as follows: </span>
<span id="tg_3676" class="t s5_3676">• </span><span id="th_3676" class="t s3_3676">On RESET, the value of the IA32_TSC_ADJUST MSR is 0. </span>
<span id="ti_3676" class="t s5_3676">• </span><span id="tj_3676" class="t s3_3676">If an execution of WRMSR to the IA32_TIME_STAMP_COUNTER MSR adds (or subtracts) value X from the TSC, </span>
<span id="tk_3676" class="t s3_3676">the logical processor also adds (or subtracts) value X from the IA32_TSC_ADJUST MSR. </span>
<span id="tl_3676" class="t s5_3676">• </span><span id="tm_3676" class="t s3_3676">If an execution of WRMSR to the IA32_TSC_ADJUST MSR adds (or subtracts) value X from that MSR, the logical </span>
<span id="tn_3676" class="t s3_3676">processor also adds (or subtracts) value X from the TSC. </span>
<span id="to_3676" class="t s3_3676">Unlike the TSC, the value of the IA32_TSC_ADJUST MSR changes only in response to WRMSR (either to the MSR </span>
<span id="tp_3676" class="t s3_3676">itself, or to the IA32_TIME_STAMP_COUNTER MSR). Its value does not otherwise change as time elapses. Software </span>
<span id="tq_3676" class="t s3_3676">seeking to adjust the TSC can do so by using WRMSR to write the same value to the IA32_TSC_ADJUST MSR on </span>
<span id="tr_3676" class="t s3_3676">each logical processor. </span>
<span id="ts_3676" class="t s3_3676">Processor support for the IA32_TSC_ADJUST MSR is indicated by CPUID.(EAX=07H, ECX=0H):EBX.TSC_ADJUST </span>
<span id="tt_3676" class="t s3_3676">(bit 1). </span>
<span id="tu_3676" class="t s4_3676">18.17.4 </span><span id="tv_3676" class="t s4_3676">Invariant Time-Keeping </span>
<span id="tw_3676" class="t s3_3676">The invariant TSC is based on the invariant timekeeping hardware (called Always Running Timer or ART), that runs </span>
<span id="tx_3676" class="t s3_3676">at the core crystal clock frequency. The ratio defined by CPUID leaf 15H expresses the frequency relationship </span>
<span id="ty_3676" class="t s3_3676">between the ART hardware and TSC. </span>
<span id="tz_3676" class="t s3_3676">If CPUID.15H:EBX[31:0] != 0 and CPUID.80000007H:EDX[InvariantTSC] = 1, the following linearity relationship </span>
<span id="t10_3676" class="t s3_3676">holds between TSC and the ART hardware: </span>
<span id="t11_3676" class="t s3_3676">TSC_Value = (ART_Value * CPUID.15H:EBX[31:0] )/ CPUID.15H:EAX[31:0] + K </span>
<span id="t12_3676" class="t s3_3676">Where 'K' is an offset that can be adjusted by a privileged agent </span>
<span id="t13_3676" class="t s6_3676">2 </span>
<span id="t14_3676" class="t s3_3676">. </span>
<span id="t15_3676" class="t s3_3676">When ART hardware is reset, both invariant TSC and K are also reset. </span>
<span id="t16_3676" class="t s7_3676">18.18 </span><span id="t17_3676" class="t s7_3676">INTEL® RESOURCE DIRECTOR TECHNOLOGY (INTEL® RDT) MONITORING </span>
<span id="t18_3676" class="t s7_3676">FEATURES </span>
<span id="t19_3676" class="t s3_3676">The Intel Resource Director Technology (Intel RDT) feature set provides a set of monitoring capabilities including </span>
<span id="t1a_3676" class="t s3_3676">Cache Monitoring Technology (CMT) and Memory Bandwidth Monitoring (MBM). The Intel </span>
<span id="t1b_3676" class="t s6_3676">® </span>
<span id="t1c_3676" class="t s3_3676">Xeon </span>
<span id="t1d_3676" class="t s6_3676">® </span>
<span id="t1e_3676" class="t s3_3676">processor E5 v3 </span>
<span id="t1f_3676" class="t s3_3676">family introduced resource monitoring capability in each logical processor to measure specific platform shared </span>
<span id="t1g_3676" class="t s3_3676">resource metrics, for example, L3 cache occupancy. The programming interface for these monitoring features is </span>
<span id="t1h_3676" class="t s3_3676">described in this section. Two features within the monitoring feature set provided are described - Cache Monitoring </span>
<span id="t1i_3676" class="t s3_3676">Technology (CMT) and Memory Bandwidth Monitoring. </span>
<span id="t1j_3676" class="t s8_3676">2. </span><span id="t1k_3676" class="t s8_3676">IA32_TSC_ADJUST MSR and the TSC-offset field in the VM execution controls of VMCS are some of the common interfaces that priv- </span>
<span id="t1l_3676" class="t s8_3676">ileged software can use to manage the time stamp counter for keeping time </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
