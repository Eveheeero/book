<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p3939" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_3939{left:783px;bottom:68px;letter-spacing:0.09px;word-spacing:-0.09px;}
#t2_3939{left:827px;bottom:68px;letter-spacing:0.11px;}
#t3_3939{left:601px;bottom:1141px;letter-spacing:-0.14px;}
#t4_3939{left:70px;bottom:1088px;letter-spacing:-0.13px;word-spacing:-1.05px;}
#t5_3939{left:398px;bottom:1088px;letter-spacing:-0.14px;word-spacing:-1.03px;}
#t6_3939{left:584px;bottom:1088px;letter-spacing:-0.11px;word-spacing:-1.07px;}
#t7_3939{left:631px;bottom:1088px;letter-spacing:-0.14px;}
#t8_3939{left:669px;bottom:1094px;}
#t9_3939{left:680px;bottom:1088px;letter-spacing:-0.13px;word-spacing:-1.07px;}
#ta_3939{left:70px;bottom:1071px;letter-spacing:-0.13px;word-spacing:-0.5px;}
#tb_3939{left:70px;bottom:1054px;letter-spacing:-0.14px;word-spacing:-1.1px;}
#tc_3939{left:797px;bottom:1061px;}
#td_3939{left:808px;bottom:1054px;letter-spacing:-0.14px;word-spacing:0.08px;}
#te_3939{left:70px;bottom:1037px;letter-spacing:-0.15px;word-spacing:-0.44px;}
#tf_3939{left:70px;bottom:1013px;letter-spacing:-0.14px;word-spacing:-0.46px;}
#tg_3939{left:70px;bottom:996px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#th_3939{left:70px;bottom:979px;letter-spacing:-0.17px;word-spacing:-0.45px;}
#ti_3939{left:70px;bottom:962px;letter-spacing:-0.14px;word-spacing:-1.19px;}
#tj_3939{left:70px;bottom:946px;letter-spacing:-0.14px;word-spacing:-0.86px;}
#tk_3939{left:70px;bottom:929px;letter-spacing:-0.16px;word-spacing:-0.46px;}
#tl_3939{left:272px;bottom:929px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#tm_3939{left:70px;bottom:904px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#tn_3939{left:70px;bottom:888px;letter-spacing:-0.15px;word-spacing:-1.24px;}
#to_3939{left:70px;bottom:871px;letter-spacing:-0.15px;word-spacing:-0.47px;}
#tp_3939{left:70px;bottom:854px;letter-spacing:-0.15px;word-spacing:-0.45px;}
#tq_3939{left:70px;bottom:830px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#tr_3939{left:439px;bottom:830px;letter-spacing:-0.16px;word-spacing:-0.47px;}
#ts_3939{left:594px;bottom:830px;letter-spacing:-0.13px;word-spacing:-0.48px;}
#tt_3939{left:70px;bottom:813px;letter-spacing:-0.16px;word-spacing:-0.41px;}
#tu_3939{left:70px;bottom:796px;letter-spacing:-0.14px;word-spacing:-0.49px;}
#tv_3939{left:70px;bottom:771px;letter-spacing:-0.14px;word-spacing:-0.45px;}
#tw_3939{left:387px;bottom:771px;letter-spacing:-0.18px;word-spacing:-0.47px;}
#tx_3939{left:473px;bottom:771px;letter-spacing:-0.13px;word-spacing:-0.51px;}
#ty_3939{left:70px;bottom:755px;letter-spacing:-0.14px;word-spacing:-0.86px;}
#tz_3939{left:70px;bottom:738px;letter-spacing:-0.16px;word-spacing:-0.44px;}
#t10_3939{left:70px;bottom:721px;letter-spacing:-0.16px;word-spacing:-0.44px;}
#t11_3939{left:70px;bottom:704px;letter-spacing:-0.15px;word-spacing:-0.51px;}
#t12_3939{left:502px;bottom:711px;}
#t13_3939{left:509px;bottom:704px;letter-spacing:-0.14px;word-spacing:-0.51px;}
#t14_3939{left:70px;bottom:687px;letter-spacing:-0.16px;word-spacing:-0.45px;}
#t15_3939{left:70px;bottom:619px;letter-spacing:0.16px;}
#t16_3939{left:151px;bottom:619px;letter-spacing:0.21px;word-spacing:-0.03px;}
#t17_3939{left:70px;bottom:594px;letter-spacing:-0.15px;word-spacing:-0.44px;}
#t18_3939{left:70px;bottom:568px;}
#t19_3939{left:96px;bottom:571px;letter-spacing:-0.15px;word-spacing:-0.48px;}
#t1a_3939{left:234px;bottom:571px;letter-spacing:-0.14px;word-spacing:-0.43px;}
#t1b_3939{left:96px;bottom:554px;letter-spacing:-0.13px;word-spacing:-0.01px;}
#t1c_3939{left:70px;bottom:528px;}
#t1d_3939{left:96px;bottom:532px;letter-spacing:-0.16px;word-spacing:-0.38px;}
#t1e_3939{left:225px;bottom:532px;letter-spacing:-0.14px;word-spacing:-0.44px;}
#t1f_3939{left:70px;bottom:505px;}
#t1g_3939{left:96px;bottom:509px;letter-spacing:-0.16px;word-spacing:-0.42px;}
#t1h_3939{left:316px;bottom:509px;letter-spacing:-0.15px;word-spacing:-0.42px;}
#t1i_3939{left:96px;bottom:492px;letter-spacing:-0.13px;word-spacing:-0.43px;}
#t1j_3939{left:70px;bottom:465px;}
#t1k_3939{left:96px;bottom:469px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#t1l_3939{left:270px;bottom:469px;letter-spacing:-0.14px;word-spacing:-0.33px;}
#t1m_3939{left:70px;bottom:443px;}
#t1n_3939{left:96px;bottom:446px;letter-spacing:-0.14px;word-spacing:-0.48px;}
#t1o_3939{left:282px;bottom:446px;letter-spacing:-0.13px;word-spacing:-0.39px;}
#t1p_3939{left:70px;bottom:420px;}
#t1q_3939{left:96px;bottom:423px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#t1r_3939{left:306px;bottom:423px;letter-spacing:-0.14px;word-spacing:-0.42px;}
#t1s_3939{left:96px;bottom:406px;letter-spacing:-0.16px;word-spacing:-0.39px;}
#t1t_3939{left:558px;bottom:413px;}
#t1u_3939{left:70px;bottom:382px;letter-spacing:-0.14px;word-spacing:-0.88px;}
#t1v_3939{left:70px;bottom:365px;letter-spacing:-0.14px;word-spacing:-0.46px;}
#t1w_3939{left:70px;bottom:247px;letter-spacing:-0.14px;}
#t1x_3939{left:92px;bottom:247px;letter-spacing:-0.11px;word-spacing:-0.38px;}
#t1y_3939{left:92px;bottom:230px;letter-spacing:-0.11px;}
#t1z_3939{left:70px;bottom:209px;letter-spacing:-0.13px;}
#t20_3939{left:92px;bottom:209px;letter-spacing:-0.12px;}
#t21_3939{left:70px;bottom:188px;letter-spacing:-0.16px;}
#t22_3939{left:92px;bottom:188px;letter-spacing:-0.12px;}
#t23_3939{left:92px;bottom:171px;letter-spacing:-0.11px;}
#t24_3939{left:92px;bottom:154px;letter-spacing:-0.12px;word-spacing:-0.33px;}
#t25_3939{left:92px;bottom:137px;letter-spacing:-0.11px;word-spacing:0.01px;}
#t26_3939{left:70px;bottom:116px;letter-spacing:-0.16px;}
#t27_3939{left:95px;bottom:116px;letter-spacing:-0.12px;word-spacing:-0.33px;}

.s1_3939{font-size:12px;font-family:NeoSansIntel_6wv3;color:#000;}
.s2_3939{font-size:14px;font-family:NeoSansIntel_6wv3;color:#0860A8;}
.s3_3939{font-size:14px;font-family:Verdana_b5t;color:#000;}
.s4_3939{font-size:14px;font-family:Verdana-Bold_b5u;color:#000;}
.s5_3939{font-size:11px;font-family:Verdana_b5t;color:#000;}
.s6_3939{font-size:21px;font-family:NeoSansIntelMedium_6wv2;color:#0860A8;}
.s7_3939{font-size:21px;font-family:TimesNewRoman_b5y;color:#000;}
.s8_3939{font-size:14px;font-family:NeoSansIntel_6wv3;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts3939" type="text/css" >

@font-face {
	font-family: NeoSansIntelMedium_6wv2;
	src: url("fonts/NeoSansIntelMedium_6wv2.woff") format("woff");
}

@font-face {
	font-family: NeoSansIntel_6wv3;
	src: url("fonts/NeoSansIntel_6wv3.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_b5y;
	src: url("fonts/TimesNewRoman_b5y.woff") format("woff");
}

@font-face {
	font-family: Verdana-Bold_b5u;
	src: url("fonts/Verdana-Bold_b5u.woff") format("woff");
}

@font-face {
	font-family: Verdana_b5t;
	src: url("fonts/Verdana_b5t.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg3939Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg3939" style="-webkit-user-select: none;"><object width="935" height="1210" data="3939/3939.svg" type="image/svg+xml" id="pdf3939" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_3939" class="t s1_3939">Vol. 3C </span><span id="t2_3939" class="t s1_3939">25-3 </span>
<span id="t3_3939" class="t s2_3939">VIRTUAL MACHINE CONTROL STRUCTURES </span>
<span id="t4_3939" class="t s3_3939">The first 4 bytes of the VMCS region contain the </span><span id="t5_3939" class="t s4_3939">VMCS revision identifier </span><span id="t6_3939" class="t s3_3939">at bits </span><span id="t7_3939" class="t s3_3939">30:0. </span>
<span id="t8_3939" class="t s5_3939">1 </span>
<span id="t9_3939" class="t s3_3939">Processors that maintain </span>
<span id="ta_3939" class="t s3_3939">VMCS data in different formats (see below) use different VMCS revision identifiers. These identifiers enable soft- </span>
<span id="tb_3939" class="t s3_3939">ware to avoid using a VMCS region formatted for one processor on a processor that uses a different format. </span>
<span id="tc_3939" class="t s5_3939">2 </span>
<span id="td_3939" class="t s3_3939">Bit 31 </span>
<span id="te_3939" class="t s3_3939">of this 4-byte region indicates whether the VMCS is a shadow VMCS (see Section 25.10). </span>
<span id="tf_3939" class="t s3_3939">Software should write the VMCS revision identifier to the VMCS region before using that region for a VMCS. The </span>
<span id="tg_3939" class="t s3_3939">VMCS revision identifier is never written by the processor; VMPTRLD fails if its operand references a VMCS region </span>
<span id="th_3939" class="t s3_3939">whose VMCS revision identifier differs from that used by the processor. (VMPTRLD also fails if the shadow-VMCS </span>
<span id="ti_3939" class="t s3_3939">indicator is 1 and the processor does not support the 1-setting of the “VMCS shadowing” VM-execution control; see </span>
<span id="tj_3939" class="t s3_3939">Section 25.6.2) Software can discover the VMCS revision identifier that a processor uses by reading the VMX capa- </span>
<span id="tk_3939" class="t s3_3939">bility MSR IA32_VMX_BASIC </span><span id="tl_3939" class="t s3_3939">(see Appendix A.1). </span>
<span id="tm_3939" class="t s3_3939">Software should clear or set the shadow-VMCS indicator depending on whether the VMCS is to be an ordinary </span>
<span id="tn_3939" class="t s3_3939">VMCS or a shadow VMCS (see Section 25.10). VMPTRLD fails if the shadow-VMCS indicator is set and the processor </span>
<span id="to_3939" class="t s3_3939">does not support the 1-setting of the “VMCS shadowing” VM-execution control. Software can discover support for </span>
<span id="tp_3939" class="t s3_3939">this setting by reading the VMX capability MSR IA32_VMX_PROCBASED_CTLS2 (see Appendix A.3.3). </span>
<span id="tq_3939" class="t s3_3939">The next 4 bytes of the VMCS region are used for the </span><span id="tr_3939" class="t s4_3939">VMX-abort indicator</span><span id="ts_3939" class="t s3_3939">. The contents of these bits do not </span>
<span id="tt_3939" class="t s3_3939">control processor operation in any way. A logical processor writes a non-zero value into these bits if a VMX abort </span>
<span id="tu_3939" class="t s3_3939">occurs (see Section 28.7). Software may also write into this field. </span>
<span id="tv_3939" class="t s3_3939">The remainder of the VMCS region is used for </span><span id="tw_3939" class="t s4_3939">VMCS data </span><span id="tx_3939" class="t s3_3939">(those parts of the VMCS that control VMX non-root </span>
<span id="ty_3939" class="t s3_3939">operation and the VMX transitions). The format of these data is implementation-specific. VMCS data are discussed </span>
<span id="tz_3939" class="t s3_3939">in Section 25.3 through Section 25.9. To ensure proper behavior in VMX operation, software should maintain the </span>
<span id="t10_3939" class="t s3_3939">VMCS region and related structures (enumerated in Section 25.11.4) in writeback cacheable memory. Future </span>
<span id="t11_3939" class="t s3_3939">implementations may allow or require a different memory type </span>
<span id="t12_3939" class="t s5_3939">3 </span>
<span id="t13_3939" class="t s3_3939">. Software should consult the VMX capability MSR </span>
<span id="t14_3939" class="t s3_3939">IA32_VMX_BASIC (see Appendix A.1). </span>
<span id="t15_3939" class="t s6_3939">25.3 </span><span id="t16_3939" class="t s6_3939">ORGANIZATION OF VMCS DATA </span>
<span id="t17_3939" class="t s3_3939">The VMCS data are organized into six logical groups: </span>
<span id="t18_3939" class="t s7_3939">• </span><span id="t19_3939" class="t s4_3939">Guest-state area. </span><span id="t1a_3939" class="t s3_3939">Processor state is saved into the guest-state area on VM exits and loaded from there on </span>
<span id="t1b_3939" class="t s3_3939">VM entries. </span>
<span id="t1c_3939" class="t s7_3939">• </span><span id="t1d_3939" class="t s4_3939">Host-state area. </span><span id="t1e_3939" class="t s3_3939">Processor state is loaded from the host-state area on VM exits. </span>
<span id="t1f_3939" class="t s7_3939">• </span><span id="t1g_3939" class="t s4_3939">VM-execution control fields. </span><span id="t1h_3939" class="t s3_3939">These fields control processor behavior in VMX non-root operation. They </span>
<span id="t1i_3939" class="t s3_3939">determine in part the causes of VM exits. </span>
<span id="t1j_3939" class="t s7_3939">• </span><span id="t1k_3939" class="t s4_3939">VM-exit control fields. </span><span id="t1l_3939" class="t s3_3939">These fields control VM exits. </span>
<span id="t1m_3939" class="t s7_3939">• </span><span id="t1n_3939" class="t s4_3939">VM-entry control fields. </span><span id="t1o_3939" class="t s3_3939">These fields control VM entries. </span>
<span id="t1p_3939" class="t s7_3939">• </span><span id="t1q_3939" class="t s4_3939">VM-exit information fields. </span><span id="t1r_3939" class="t s3_3939">These fields receive information on VM exits and describe the cause and the </span>
<span id="t1s_3939" class="t s3_3939">nature of VM exits. On some processors, these fields are read-only. </span>
<span id="t1t_3939" class="t s5_3939">4 </span>
<span id="t1u_3939" class="t s3_3939">The VM-execution control fields, the VM-exit control fields, and the VM-entry control fields are sometimes referred </span>
<span id="t1v_3939" class="t s3_3939">to collectively as VMX controls. </span>
<span id="t1w_3939" class="t s8_3939">1. </span><span id="t1x_3939" class="t s8_3939">Earlier versions of this manual specified that the VMCS revision identifier was a 32-bit field. For all processors produced prior to this </span>
<span id="t1y_3939" class="t s8_3939">change, bit 31 of the VMCS revision identifier was 0. </span>
<span id="t1z_3939" class="t s8_3939">2. </span><span id="t20_3939" class="t s8_3939">Logical processors that use the same VMCS revision identifier use the same size for VMCS regions. </span>
<span id="t21_3939" class="t s8_3939">3. </span><span id="t22_3939" class="t s8_3939">Alternatively, software may map any of these regions or structures with the UC memory type. Doing so is strongly discouraged </span>
<span id="t23_3939" class="t s8_3939">unless necessary as it will cause the performance of transitions using those structures to suffer significantly. In addition, the pro- </span>
<span id="t24_3939" class="t s8_3939">cessor will continue to use the memory type reported in the VMX capability MSR IA32_VMX_BASIC with exceptions noted in Appen- </span>
<span id="t25_3939" class="t s8_3939">dix A.1. </span>
<span id="t26_3939" class="t s8_3939">4. </span><span id="t27_3939" class="t s8_3939">Software can discover whether these fields can be written by reading the VMX capability MSR IA32_VMX_MISC (see Appendix A.6). </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
