<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p220" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_220{left:110px;bottom:1129px;letter-spacing:-0.17px;}
#t2_220{left:475px;bottom:1129px;letter-spacing:-0.21px;word-spacing:1.47px;}
#t3_220{left:110px;bottom:1082px;letter-spacing:-0.16px;word-spacing:1.44px;}
#t4_220{left:110px;bottom:1062px;letter-spacing:-0.16px;word-spacing:1.7px;}
#t5_220{left:110px;bottom:1041px;letter-spacing:-0.3px;word-spacing:1.71px;}
#t6_220{left:110px;bottom:1005px;letter-spacing:-0.17px;word-spacing:3.16px;}
#t7_220{left:110px;bottom:984px;letter-spacing:-0.3px;}
#t8_220{left:165px;bottom:984px;letter-spacing:-0.15px;word-spacing:1.44px;}
#t9_220{left:773px;bottom:984px;letter-spacing:-0.28px;}
#ta_220{left:820px;bottom:984px;}
#tb_220{left:110px;bottom:964px;letter-spacing:-0.13px;word-spacing:1.36px;}
#tc_220{left:110px;bottom:928px;letter-spacing:-0.18px;word-spacing:1.16px;}
#td_220{left:110px;bottom:907px;letter-spacing:-0.18px;word-spacing:1.62px;}
#te_220{left:110px;bottom:871px;letter-spacing:-0.15px;word-spacing:0.98px;}
#tf_220{left:110px;bottom:850px;letter-spacing:-0.14px;word-spacing:1.19px;}
#tg_220{left:110px;bottom:830px;letter-spacing:-0.15px;word-spacing:0.32px;}
#th_220{left:110px;bottom:809px;letter-spacing:-0.15px;word-spacing:0.24px;}
#ti_220{left:110px;bottom:788px;letter-spacing:-0.14px;word-spacing:1.93px;}
#tj_220{left:110px;bottom:767px;letter-spacing:-0.13px;word-spacing:1.38px;}
#tk_220{left:110px;bottom:708px;letter-spacing:-0.14px;word-spacing:2.37px;}
#tl_220{left:275px;bottom:708px;letter-spacing:-0.16px;word-spacing:1.64px;}
#tm_220{left:110px;bottom:688px;letter-spacing:-0.16px;word-spacing:1.45px;}
#tn_220{left:110px;bottom:667px;letter-spacing:-0.18px;word-spacing:0.49px;}
#to_220{left:110px;bottom:646px;letter-spacing:-0.14px;word-spacing:2.71px;}
#tp_220{left:475px;bottom:646px;letter-spacing:-0.16px;word-spacing:2.74px;}
#tq_220{left:110px;bottom:625px;letter-spacing:-0.17px;word-spacing:3.18px;}
#tr_220{left:110px;bottom:605px;letter-spacing:-0.13px;word-spacing:2.48px;}
#ts_220{left:110px;bottom:584px;letter-spacing:-0.16px;word-spacing:2.41px;}
#tt_220{left:729px;bottom:584px;letter-spacing:-0.15px;}
#tu_220{left:767px;bottom:584px;letter-spacing:-0.15px;word-spacing:2.21px;}
#tv_220{left:110px;bottom:563px;letter-spacing:-0.14px;word-spacing:1.37px;}
#tw_220{left:110px;bottom:527px;letter-spacing:-0.19px;word-spacing:1.49px;}
#tx_220{left:135px;bottom:478px;}
#ty_220{left:152px;bottom:478px;letter-spacing:-0.28px;word-spacing:0.61px;}
#tz_220{left:275px;bottom:478px;letter-spacing:-0.15px;word-spacing:0.57px;}
#t10_220{left:152px;bottom:457px;letter-spacing:-0.16px;word-spacing:1.33px;}
#t11_220{left:152px;bottom:436px;letter-spacing:-0.14px;}
#t12_220{left:152px;bottom:409px;letter-spacing:-0.13px;word-spacing:3.31px;}
#t13_220{left:152px;bottom:388px;letter-spacing:-0.11px;word-spacing:1.13px;}
#t14_220{left:432px;bottom:388px;letter-spacing:-0.28px;word-spacing:0.81px;}
#t15_220{left:560px;bottom:388px;letter-spacing:-0.13px;word-spacing:0.51px;}
#t16_220{left:152px;bottom:367px;letter-spacing:-0.15px;word-spacing:1.14px;}
#t17_220{left:152px;bottom:347px;letter-spacing:-0.14px;word-spacing:1.36px;}
#t18_220{left:135px;bottom:312px;}
#t19_220{left:152px;bottom:312px;letter-spacing:-0.15px;word-spacing:1.38px;}
#t1a_220{left:254px;bottom:312px;letter-spacing:-0.18px;word-spacing:1.71px;}
#t1b_220{left:135px;bottom:278px;}
#t1c_220{left:152px;bottom:278px;letter-spacing:-0.15px;word-spacing:5.03px;}
#t1d_220{left:252px;bottom:278px;}
#t1e_220{left:271px;bottom:278px;letter-spacing:-0.19px;word-spacing:5.09px;}
#t1f_220{left:152px;bottom:257px;letter-spacing:-0.14px;word-spacing:1.39px;}
#t1g_220{left:135px;bottom:223px;}
#t1h_220{left:152px;bottom:223px;letter-spacing:-0.13px;word-spacing:0.3px;}
#t1i_220{left:332px;bottom:223px;letter-spacing:-0.16px;word-spacing:1.08px;}
#t1j_220{left:152px;bottom:202px;letter-spacing:-0.12px;word-spacing:1.38px;}
#t1k_220{left:135px;bottom:168px;}
#t1l_220{left:152px;bottom:168px;letter-spacing:-0.14px;word-spacing:0.03px;}
#t1m_220{left:280px;bottom:168px;letter-spacing:-0.12px;word-spacing:0.24px;}
#t1n_220{left:152px;bottom:147px;letter-spacing:-0.18px;word-spacing:0.57px;}
#t1o_220{left:152px;bottom:126px;letter-spacing:-0.17px;word-spacing:2.41px;}

.s1_220{font-size:17px;font-family:CMR10_270;color:#000;}
.s2_220{font-size:17px;font-family:CMSL10_27d;color:#000;}
.s3_220{font-size:17px;font-family:CMTI10_27t;color:#000;}
.s4_220{font-size:17px;font-family:CMBX10_26h;color:#000;}
.s5_220{font-size:17px;font-family:CMR10_270;color:#000080;}
.s6_220{font-size:17px;font-family:CMSY10_27j;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts220" type="text/css" >

@font-face {
	font-family: CMBX10_26h;
	src: url("fonts/CMBX10_26h.woff") format("woff");
}

@font-face {
	font-family: CMR10_270;
	src: url("fonts/CMR10_270.woff") format("woff");
}

@font-face {
	font-family: CMSL10_27d;
	src: url("fonts/CMSL10_27d.woff") format("woff");
}

@font-face {
	font-family: CMSY10_27j;
	src: url("fonts/CMSY10_27j.woff") format("woff");
}

@font-face {
	font-family: CMTI10_27t;
	src: url("fonts/CMTI10_27t.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg220Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg220" style="-webkit-user-select: none;"><object width="935" height="1210" data="220/220.svg" type="image/svg+xml" id="pdf220" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_220" class="t s1_220">202 </span><span id="t2_220" class="t s2_220">Volume I: RISC-V Unprivileged ISA V20191213 </span>
<span id="t3_220" class="t s1_220">The shared memory state records all the memory store operations that have propagated so far, in </span>
<span id="t4_220" class="t s1_220" data-mappings='[[50,"ffi"]]'>the order they propagated (this can be made more eﬃcient, but for simplicity of the presentation </span>
<span id="t5_220" class="t s1_220">we keep it this way). </span>
<span id="t6_220" class="t s1_220">Each hart state consists principally of a tree of instruction instances, some of which have been </span>
<span id="t7_220" class="t s3_220" data-mappings='[[0,"fi"]]'>ﬁnished</span><span id="t8_220" class="t s1_220" data-mappings='[[34,"fi"]]'>, and some of which have not. Non-ﬁnished instruction instances can be subject to </span><span id="t9_220" class="t s3_220">restart</span><span id="ta_220" class="t s1_220">, </span>
<span id="tb_220" class="t s1_220">e.g. if they depend on an out-of-order or speculative load that turns out to be unsound. </span>
<span id="tc_220" class="t s1_220">Conditional branch and indirect jump instructions may have multiple successors in the instruction </span>
<span id="td_220" class="t s1_220" data-mappings='[[31,"fi"]]'>tree. When such instruction is ﬁnished, any un-taken alternative paths are discarded. </span>
<span id="te_220" class="t s1_220">Each instruction instance in the instruction tree has a state that includes an execution state of the </span>
<span id="tf_220" class="t s1_220">intra-instruction semantics (the ISA pseudocode for this instruction). The model uses a formaliza- </span>
<span id="tg_220" class="t s1_220">tion of the intra-instruction semantics in Sail. One can think of the execution state of an instruction </span>
<span id="th_220" class="t s1_220">as a representation of the pseudocode control state, pseudocode call stack, and local variable values. </span>
<span id="ti_220" class="t s1_220">An instruction instance state also includes information about the instance’s memory and register </span>
<span id="tj_220" class="t s1_220" data-mappings='[[80,"fi"]]'>footprints, its register reads and writes, its memory operations, whether it is ﬁnished, etc. </span>
<span id="tk_220" class="t s4_220">Model transitions </span><span id="tl_220" class="t s1_220" data-mappings='[[12,"fi"]]'>The model deﬁnes, for any model state, the set of allowed transitions, each </span>
<span id="tm_220" class="t s1_220">of which is a single atomic step to a new abstract machine state. Execution of a single instruction </span>
<span id="tn_220" class="t s1_220">will typically involve many transitions, and they may be interleaved in operational-model execution </span>
<span id="to_220" class="t s1_220">with transitions arising from other instructions. </span><span id="tp_220" class="t s1_220">Each transition arises from a single instruction </span>
<span id="tq_220" class="t s1_220">instance; it will change the state of that instance, and it may depend on or change the rest of </span>
<span id="tr_220" class="t s1_220">its hart state and the shared memory state, but it does not depend on other hart states, and it </span>
<span id="ts_220" class="t s1_220" data-mappings='[[65,"fi"]]'>will not change them. The transitions are introduced below and deﬁned in Section </span><span id="tt_220" class="t s5_220">B.3.5</span><span id="tu_220" class="t s1_220">, with a </span>
<span id="tv_220" class="t s1_220">precondition and a construction of the post-transition model state for each. </span>
<span id="tw_220" class="t s1_220">Transitions for all instructions: </span>
<span id="tx_220" class="t s6_220">• </span><span id="ty_220" class="t s5_220">Fetch instruction</span><span id="tz_220" class="t s1_220">: This transition represents a fetch and decode of a new instruction instance, </span>
<span id="t10_220" class="t s1_220">as a program order successor of a previously fetched instruction instance (or the initial fetch </span>
<span id="t11_220" class="t s1_220">address). </span>
<span id="t12_220" class="t s1_220" data-mappings='[[44,"fi"]]'>The model assumes the instruction memory is ﬁxed; it does not describe the behavior of </span>
<span id="t13_220" class="t s1_220">self-modifying code. In particular, the </span><span id="t14_220" class="t s5_220">Fetch instruction </span><span id="t15_220" class="t s1_220">transition does not generate memory </span>
<span id="t16_220" class="t s1_220">load operations, and the shared memory is not involved in the transition. Instead, the model </span>
<span id="t17_220" class="t s1_220">depends on an external oracle that provides an opcode when given a memory location. </span>
<span id="t18_220" class="t s6_220">◦ </span><span id="t19_220" class="t s5_220">Register write</span><span id="t1a_220" class="t s1_220">: This is a write of a register value. </span>
<span id="t1b_220" class="t s6_220">◦ </span><span id="t1c_220" class="t s5_220">Register read</span><span id="t1d_220" class="t s1_220">: </span><span id="t1e_220" class="t s1_220">This is a read of a register value from the most recent program-order- </span>
<span id="t1f_220" class="t s1_220">predecessor instruction instance that writes to that register. </span>
<span id="t1g_220" class="t s6_220">◦ </span><span id="t1h_220" class="t s5_220">Pseudocode internal step</span><span id="t1i_220" class="t s1_220">: This covers pseudocode internal computation: arithmetic, function </span>
<span id="t1j_220" class="t s1_220">calls, etc. </span>
<span id="t1k_220" class="t s6_220">◦ </span><span id="t1l_220" class="t s5_220">Finish instruction</span><span id="t1m_220" class="t s1_220">: At this point the instruction pseudocode is done, the instruction cannot be </span>
<span id="t1n_220" class="t s1_220" data-mappings='[[64,"ff"]]'>restarted, memory accesses cannot be discarded, and all memory eﬀects have taken place. For </span>
<span id="t1o_220" class="t s1_220">conditional branch and indirect jump instructions, any program order successors that were </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
