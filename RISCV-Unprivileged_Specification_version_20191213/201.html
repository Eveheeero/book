<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p201" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_201{left:110px;bottom:1129px;letter-spacing:-0.21px;word-spacing:1.47px;}
#t2_201{left:800px;bottom:1129px;letter-spacing:-0.17px;}
#t3_201{left:110px;bottom:1082px;letter-spacing:-0.2px;word-spacing:2.75px;}
#t4_201{left:110px;bottom:1062px;letter-spacing:-0.13px;word-spacing:1.73px;}
#t5_201{left:497px;bottom:1062px;letter-spacing:-0.17px;}
#t6_201{left:530px;bottom:1062px;letter-spacing:-0.12px;word-spacing:2.06px;}
#t7_201{left:110px;bottom:1041px;letter-spacing:-0.18px;word-spacing:1.84px;}
#t8_201{left:110px;bottom:1020px;letter-spacing:-0.2px;word-spacing:1.47px;}
#t9_201{left:120px;bottom:984px;letter-spacing:-0.18px;word-spacing:1.38px;}
#ta_201{left:488px;bottom:984px;letter-spacing:-0.4px;word-spacing:1.75px;}
#tb_201{left:120px;bottom:959px;letter-spacing:-0.16px;word-spacing:1.38px;}
#tc_201{left:488px;bottom:959px;}
#td_201{left:496px;bottom:959px;}
#te_201{left:505px;bottom:959px;letter-spacing:-0.18px;}
#tf_201{left:566px;bottom:959px;}
#tg_201{left:120px;bottom:937px;letter-spacing:-0.17px;}
#th_201{left:179px;bottom:937px;letter-spacing:-0.17px;}
#ti_201{left:281px;bottom:937px;letter-spacing:-0.17px;}
#tj_201{left:331px;bottom:937px;letter-spacing:-0.17px;}
#tk_201{left:488px;bottom:937px;}
#tl_201{left:496px;bottom:937px;}
#tm_201{left:505px;bottom:937px;letter-spacing:-0.18px;}
#tn_201{left:566px;bottom:937px;}
#to_201{left:120px;bottom:916px;letter-spacing:-0.17px;}
#tp_201{left:179px;bottom:916px;letter-spacing:-0.17px;}
#tq_201{left:281px;bottom:916px;letter-spacing:-0.17px;}
#tr_201{left:331px;bottom:916px;letter-spacing:-0.17px;}
#ts_201{left:488px;bottom:916px;}
#tt_201{left:496px;bottom:916px;}
#tu_201{left:505px;bottom:916px;letter-spacing:-0.18px;}
#tv_201{left:566px;bottom:916px;}
#tw_201{left:574px;bottom:916px;letter-spacing:-0.18px;word-spacing:4.58px;}
#tx_201{left:120px;bottom:895px;letter-spacing:-0.17px;}
#ty_201{left:179px;bottom:895px;letter-spacing:-0.17px;}
#tz_201{left:281px;bottom:895px;letter-spacing:-0.17px;}
#t10_201{left:331px;bottom:895px;letter-spacing:-0.17px;}
#t11_201{left:364px;bottom:895px;letter-spacing:-0.17px;}
#t12_201{left:488px;bottom:895px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t13_201{left:610px;bottom:895px;}
#t14_201{left:618px;bottom:895px;letter-spacing:-0.18px;}
#t15_201{left:680px;bottom:895px;}
#t16_201{left:688px;bottom:895px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t17_201{left:120px;bottom:870px;letter-spacing:-0.16px;word-spacing:1.38px;}
#t18_201{left:488px;bottom:870px;}
#t19_201{left:496px;bottom:870px;}
#t1a_201{left:505px;bottom:870px;letter-spacing:-0.18px;}
#t1b_201{left:566px;bottom:870px;}
#t1c_201{left:120px;bottom:848px;letter-spacing:-0.17px;}
#t1d_201{left:179px;bottom:848px;letter-spacing:-0.17px;}
#t1e_201{left:290px;bottom:848px;letter-spacing:-0.17px;}
#t1f_201{left:340px;bottom:848px;letter-spacing:-0.17px;}
#t1g_201{left:488px;bottom:848px;}
#t1h_201{left:496px;bottom:848px;}
#t1i_201{left:505px;bottom:848px;letter-spacing:-0.18px;}
#t1j_201{left:566px;bottom:848px;}
#t1k_201{left:120px;bottom:827px;letter-spacing:-0.17px;}
#t1l_201{left:179px;bottom:827px;letter-spacing:-0.17px;}
#t1m_201{left:290px;bottom:827px;letter-spacing:-0.17px;}
#t1n_201{left:340px;bottom:827px;letter-spacing:-0.17px;}
#t1o_201{left:488px;bottom:827px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t1p_201{left:601px;bottom:827px;}
#t1q_201{left:610px;bottom:827px;letter-spacing:-0.18px;}
#t1r_201{left:671px;bottom:827px;}
#t1s_201{left:120px;bottom:806px;letter-spacing:-0.17px;}
#t1t_201{left:179px;bottom:806px;letter-spacing:-0.17px;}
#t1u_201{left:290px;bottom:806px;letter-spacing:-0.17px;}
#t1v_201{left:340px;bottom:806px;letter-spacing:-0.17px;}
#t1w_201{left:372px;bottom:806px;letter-spacing:-0.17px;}
#t1x_201{left:488px;bottom:806px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t1y_201{left:601px;bottom:806px;}
#t1z_201{left:610px;bottom:806px;letter-spacing:-0.18px;}
#t20_201{left:671px;bottom:806px;}
#t21_201{left:120px;bottom:781px;letter-spacing:-0.17px;}
#t22_201{left:179px;bottom:781px;letter-spacing:-0.17px;}
#t23_201{left:237px;bottom:781px;letter-spacing:-0.17px;}
#t24_201{left:349px;bottom:781px;letter-spacing:-0.17px;}
#t25_201{left:399px;bottom:781px;letter-spacing:-0.18px;}
#t26_201{left:488px;bottom:781px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t27_201{left:120px;bottom:759px;letter-spacing:-0.17px;}
#t28_201{left:179px;bottom:759px;letter-spacing:-0.17px;}
#t29_201{left:237px;bottom:759px;letter-spacing:-0.17px;}
#t2a_201{left:349px;bottom:759px;letter-spacing:-0.17px;}
#t2b_201{left:399px;bottom:759px;letter-spacing:-0.18px;}
#t2c_201{left:488px;bottom:759px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t2d_201{left:120px;bottom:738px;letter-spacing:-0.17px;}
#t2e_201{left:179px;bottom:738px;letter-spacing:-0.17px;}
#t2f_201{left:237px;bottom:738px;letter-spacing:-0.17px;}
#t2g_201{left:349px;bottom:738px;letter-spacing:-0.17px;}
#t2h_201{left:399px;bottom:738px;letter-spacing:-0.18px;}
#t2i_201{left:431px;bottom:738px;letter-spacing:-0.18px;}
#t2j_201{left:488px;bottom:738px;letter-spacing:-0.18px;}
#t2k_201{left:120px;bottom:717px;letter-spacing:-0.17px;}
#t2l_201{left:179px;bottom:717px;letter-spacing:-0.17px;}
#t2m_201{left:237px;bottom:717px;letter-spacing:-0.17px;}
#t2n_201{left:349px;bottom:717px;letter-spacing:-0.17px;}
#t2o_201{left:399px;bottom:717px;letter-spacing:-0.18px;}
#t2p_201{left:431px;bottom:717px;letter-spacing:-0.18px;}
#t2q_201{left:488px;bottom:717px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t2r_201{left:120px;bottom:692px;letter-spacing:-0.18px;word-spacing:1.38px;}
#t2s_201{left:488px;bottom:692px;letter-spacing:-0.37px;word-spacing:1.69px;}
#t2t_201{left:120px;bottom:671px;letter-spacing:-0.17px;}
#t2u_201{left:179px;bottom:671px;letter-spacing:-0.17px;}
#t2v_201{left:281px;bottom:671px;letter-spacing:-0.17px;}
#t2w_201{left:331px;bottom:671px;letter-spacing:-0.17px;}
#t2x_201{left:488px;bottom:671px;letter-spacing:-0.18px;}
#t2y_201{left:558px;bottom:671px;}
#t2z_201{left:566px;bottom:671px;letter-spacing:-0.18px;}
#t30_201{left:592px;bottom:671px;}
#t31_201{left:120px;bottom:649px;letter-spacing:-0.17px;}
#t32_201{left:179px;bottom:649px;letter-spacing:-0.17px;}
#t33_201{left:281px;bottom:649px;letter-spacing:-0.17px;}
#t34_201{left:331px;bottom:649px;letter-spacing:-0.17px;}
#t35_201{left:488px;bottom:649px;letter-spacing:-0.18px;}
#t36_201{left:558px;bottom:649px;}
#t37_201{left:566px;bottom:649px;letter-spacing:-0.18px;}
#t38_201{left:592px;bottom:649px;}
#t39_201{left:601px;bottom:649px;letter-spacing:-0.18px;}
#t3a_201{left:120px;bottom:628px;letter-spacing:-0.17px;}
#t3b_201{left:179px;bottom:628px;letter-spacing:-0.17px;}
#t3c_201{left:281px;bottom:628px;letter-spacing:-0.17px;}
#t3d_201{left:331px;bottom:628px;letter-spacing:-0.17px;}
#t3e_201{left:488px;bottom:628px;letter-spacing:-0.18px;}
#t3f_201{left:558px;bottom:628px;}
#t3g_201{left:566px;bottom:628px;letter-spacing:-0.18px;}
#t3h_201{left:592px;bottom:628px;}
#t3i_201{left:601px;bottom:628px;letter-spacing:-0.18px;}
#t3j_201{left:120px;bottom:607px;letter-spacing:-0.17px;}
#t3k_201{left:179px;bottom:607px;letter-spacing:-0.17px;}
#t3l_201{left:281px;bottom:607px;letter-spacing:-0.17px;}
#t3m_201{left:331px;bottom:607px;letter-spacing:-0.17px;}
#t3n_201{left:364px;bottom:607px;letter-spacing:-0.17px;}
#t3o_201{left:488px;bottom:607px;letter-spacing:-0.18px;}
#t3p_201{left:558px;bottom:607px;}
#t3q_201{left:566px;bottom:607px;letter-spacing:-0.18px;}
#t3r_201{left:592px;bottom:607px;}
#t3s_201{left:601px;bottom:607px;letter-spacing:-0.18px;}
#t3t_201{left:120px;bottom:585px;letter-spacing:-0.17px;}
#t3u_201{left:179px;bottom:585px;letter-spacing:-0.17px;}
#t3v_201{left:281px;bottom:585px;letter-spacing:-0.17px;}
#t3w_201{left:331px;bottom:585px;letter-spacing:-0.17px;}
#t3x_201{left:364px;bottom:585px;letter-spacing:-0.17px;}
#t3y_201{left:488px;bottom:585px;letter-spacing:-0.18px;}
#t3z_201{left:558px;bottom:585px;}
#t40_201{left:566px;bottom:585px;letter-spacing:-0.18px;}
#t41_201{left:592px;bottom:585px;}
#t42_201{left:601px;bottom:585px;letter-spacing:-0.18px;}
#t43_201{left:120px;bottom:560px;letter-spacing:-0.18px;word-spacing:1.38px;}
#t44_201{left:488px;bottom:560px;letter-spacing:-0.34px;word-spacing:1.65px;}
#t45_201{left:120px;bottom:529px;letter-spacing:-0.17px;}
#t46_201{left:179px;bottom:529px;letter-spacing:-0.17px;}
#t47_201{left:281px;bottom:529px;letter-spacing:-0.17px;}
#t48_201{left:331px;bottom:529px;letter-spacing:-0.17px;}
#t49_201{left:488px;bottom:539px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t4a_201{left:566px;bottom:539px;}
#t4b_201{left:575px;bottom:539px;letter-spacing:-0.18px;}
#t4c_201{left:601px;bottom:539px;}
#t4d_201{left:609px;bottom:539px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t4e_201{left:706px;bottom:539px;}
#t4f_201{left:714px;bottom:539px;letter-spacing:-0.18px;}
#t4g_201{left:740px;bottom:539px;}
#t4h_201{left:748px;bottom:539px;}
#t4i_201{left:488px;bottom:518px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t4j_201{left:120px;bottom:487px;letter-spacing:-0.17px;}
#t4k_201{left:179px;bottom:487px;letter-spacing:-0.17px;}
#t4l_201{left:281px;bottom:487px;letter-spacing:-0.17px;}
#t4m_201{left:331px;bottom:487px;letter-spacing:-0.17px;}
#t4n_201{left:488px;bottom:497px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t4o_201{left:566px;bottom:497px;}
#t4p_201{left:575px;bottom:497px;letter-spacing:-0.18px;}
#t4q_201{left:601px;bottom:497px;}
#t4r_201{left:609px;bottom:497px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t4s_201{left:732px;bottom:497px;}
#t4t_201{left:740px;bottom:497px;letter-spacing:-0.18px;}
#t4u_201{left:766px;bottom:497px;}
#t4v_201{left:775px;bottom:497px;}
#t4w_201{left:488px;bottom:476px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t4x_201{left:120px;bottom:445px;letter-spacing:-0.17px;}
#t4y_201{left:179px;bottom:445px;letter-spacing:-0.17px;}
#t4z_201{left:281px;bottom:445px;letter-spacing:-0.17px;}
#t50_201{left:331px;bottom:445px;letter-spacing:-0.17px;}
#t51_201{left:488px;bottom:455px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t52_201{left:566px;bottom:455px;}
#t53_201{left:575px;bottom:455px;letter-spacing:-0.18px;}
#t54_201{left:601px;bottom:455px;}
#t55_201{left:609px;bottom:455px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t56_201{left:706px;bottom:455px;}
#t57_201{left:714px;bottom:455px;letter-spacing:-0.18px;}
#t58_201{left:740px;bottom:455px;}
#t59_201{left:748px;bottom:455px;letter-spacing:-0.18px;}
#t5a_201{left:488px;bottom:434px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t5b_201{left:120px;bottom:403px;letter-spacing:-0.17px;}
#t5c_201{left:179px;bottom:403px;letter-spacing:-0.17px;}
#t5d_201{left:281px;bottom:403px;letter-spacing:-0.17px;}
#t5e_201{left:331px;bottom:403px;letter-spacing:-0.17px;}
#t5f_201{left:364px;bottom:403px;letter-spacing:-0.17px;}
#t5g_201{left:488px;bottom:413px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t5h_201{left:566px;bottom:413px;}
#t5i_201{left:575px;bottom:413px;letter-spacing:-0.18px;}
#t5j_201{left:601px;bottom:413px;}
#t5k_201{left:609px;bottom:413px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t5l_201{left:732px;bottom:413px;}
#t5m_201{left:740px;bottom:413px;letter-spacing:-0.18px;}
#t5n_201{left:766px;bottom:413px;}
#t5o_201{left:775px;bottom:413px;letter-spacing:-0.17px;}
#t5p_201{left:488px;bottom:392px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t5q_201{left:120px;bottom:361px;letter-spacing:-0.17px;}
#t5r_201{left:179px;bottom:361px;letter-spacing:-0.17px;}
#t5s_201{left:281px;bottom:361px;letter-spacing:-0.17px;}
#t5t_201{left:331px;bottom:361px;letter-spacing:-0.17px;}
#t5u_201{left:364px;bottom:361px;letter-spacing:-0.17px;}
#t5v_201{left:488px;bottom:371px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t5w_201{left:566px;bottom:371px;}
#t5x_201{left:575px;bottom:371px;letter-spacing:-0.18px;}
#t5y_201{left:601px;bottom:371px;}
#t5z_201{left:609px;bottom:371px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t60_201{left:488px;bottom:350px;letter-spacing:-0.18px;}
#t61_201{left:514px;bottom:350px;}
#t62_201{left:522px;bottom:350px;letter-spacing:-0.18px;}
#t63_201{left:548px;bottom:350px;}
#t64_201{left:557px;bottom:350px;letter-spacing:-0.18px;word-spacing:4.58px;}
#t65_201{left:217px;bottom:314px;letter-spacing:-0.21px;word-spacing:1.72px;}
#t66_201{left:110px;bottom:274px;letter-spacing:-0.51px;}
#t67_201{left:157px;bottom:274px;letter-spacing:-0.17px;}
#t68_201{left:190px;bottom:274px;letter-spacing:-0.17px;word-spacing:2.83px;}
#t69_201{left:110px;bottom:254px;letter-spacing:-0.13px;}
#t6a_201{left:165px;bottom:254px;letter-spacing:-0.11px;word-spacing:3.94px;}
#t6b_201{left:408px;bottom:254px;letter-spacing:-0.16px;}
#t6c_201{left:433px;bottom:254px;letter-spacing:-0.18px;}
#t6d_201{left:468px;bottom:254px;letter-spacing:-0.11px;}
#t6e_201{left:487px;bottom:254px;letter-spacing:-0.15px;word-spacing:4.14px;}
#t6f_201{left:110px;bottom:233px;letter-spacing:-0.43px;word-spacing:4.82px;}
#t6g_201{left:181px;bottom:233px;letter-spacing:-0.17px;}
#t6h_201{left:215px;bottom:233px;letter-spacing:-0.15px;word-spacing:4.27px;}
#t6i_201{left:315px;bottom:233px;letter-spacing:-0.21px;word-spacing:4.37px;}
#t6j_201{left:110px;bottom:212px;letter-spacing:-0.17px;}
#t6k_201{left:169px;bottom:212px;letter-spacing:-0.17px;}
#t6l_201{left:271px;bottom:212px;letter-spacing:-0.17px;}
#t6m_201{left:321px;bottom:212px;letter-spacing:-0.17px;}
#t6n_201{left:354px;bottom:212px;letter-spacing:-0.17px;}
#t6o_201{left:395px;bottom:212px;letter-spacing:-0.11px;word-spacing:1.29px;}
#t6p_201{left:675px;bottom:212px;letter-spacing:-0.16px;}
#t6q_201{left:697px;bottom:212px;letter-spacing:-0.18px;}
#t6r_201{left:729px;bottom:212px;letter-spacing:-0.11px;}
#t6s_201{left:746px;bottom:212px;letter-spacing:-0.13px;}
#t6t_201{left:110px;bottom:176px;letter-spacing:-0.2px;word-spacing:2.25px;}
#t6u_201{left:110px;bottom:156px;letter-spacing:-0.16px;word-spacing:1.99px;}
#t6v_201{left:110px;bottom:135px;letter-spacing:-0.18px;word-spacing:0.23px;}
#t6w_201{left:110px;bottom:114px;letter-spacing:-0.13px;word-spacing:0.03px;}

.s1_201{font-size:17px;font-family:CMSL10_27d;color:#000;}
.s2_201{font-size:17px;font-family:CMR10_270;color:#000;}
.s3_201{font-size:17px;font-family:CMR10_270;color:#000080;}
.s4_201{font-size:17px;font-family:CMTT10_27z;color:#000;}
.s5_201{font-size:17px;font-family:CMSY10_27j;color:#000;}
.s6_201{font-size:17px;font-family:CMTI10_27t;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts201" type="text/css" >

@font-face {
	font-family: CMR10_270;
	src: url("fonts/CMR10_270.woff") format("woff");
}

@font-face {
	font-family: CMSL10_27d;
	src: url("fonts/CMSL10_27d.woff") format("woff");
}

@font-face {
	font-family: CMSY10_27j;
	src: url("fonts/CMSY10_27j.woff") format("woff");
}

@font-face {
	font-family: CMTI10_27t;
	src: url("fonts/CMTI10_27t.woff") format("woff");
}

@font-face {
	font-family: CMTT10_27z;
	src: url("fonts/CMTT10_27z.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg201Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg201" style="-webkit-user-select: none;"><object width="935" height="1210" data="201/201.svg" type="image/svg+xml" id="pdf201" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_201" class="t s1_201">Volume I: RISC-V Unprivileged ISA V20191213 </span><span id="t2_201" class="t s2_201">183 </span>
<span id="t3_201" class="t s2_201">For example, the critical section ordering rule currently being debated by the Linux community </span>
<span id="t4_201" class="t s2_201">would require (a) to be ordered before (e) in Figure </span><span id="t5_201" class="t s3_201">A.18</span><span id="t6_201" class="t s2_201">. If that will indeed be required, then it </span>
<span id="t7_201" class="t s2_201" data-mappings='[[13,"ffi"]]'>would be insuﬃcient for (b) to map as FENCE RW,W. That said, these mappings are subject to </span>
<span id="t8_201" class="t s2_201">change as the Linux Kernel Memory Model evolves. </span>
<span id="t9_201" class="t s2_201">C/C++ Construct </span><span id="ta_201" class="t s2_201">RVWMO Mapping </span>
<span id="tb_201" class="t s2_201">Non-atomic load </span><span id="tc_201" class="t s4_201">l</span><span id="td_201" class="t s5_201">{</span><span id="te_201" class="t s4_201">b|h|w|d</span><span id="tf_201" class="t s5_201">} </span>
<span id="tg_201" class="t s4_201">atomic </span><span id="th_201" class="t s4_201">load(memory </span><span id="ti_201" class="t s4_201">order </span><span id="tj_201" class="t s4_201">relaxed) </span><span id="tk_201" class="t s4_201">l</span><span id="tl_201" class="t s5_201">{</span><span id="tm_201" class="t s4_201">b|h|w|d</span><span id="tn_201" class="t s5_201">} </span>
<span id="to_201" class="t s4_201">atomic </span><span id="tp_201" class="t s4_201">load(memory </span><span id="tq_201" class="t s4_201">order </span><span id="tr_201" class="t s4_201">acquire) </span><span id="ts_201" class="t s4_201">l</span><span id="tt_201" class="t s5_201">{</span><span id="tu_201" class="t s4_201">b|h|w|d</span><span id="tv_201" class="t s5_201">}</span><span id="tw_201" class="t s4_201">; fence r,rw </span>
<span id="tx_201" class="t s4_201">atomic </span><span id="ty_201" class="t s4_201">load(memory </span><span id="tz_201" class="t s4_201">order </span><span id="t10_201" class="t s4_201">seq </span><span id="t11_201" class="t s4_201">cst) </span><span id="t12_201" class="t s4_201">fence rw,rw; l</span><span id="t13_201" class="t s5_201">{</span><span id="t14_201" class="t s4_201">b|h|w|d</span><span id="t15_201" class="t s5_201">}</span><span id="t16_201" class="t s4_201">; fence r,rw </span>
<span id="t17_201" class="t s2_201">Non-atomic store </span><span id="t18_201" class="t s4_201">s</span><span id="t19_201" class="t s5_201">{</span><span id="t1a_201" class="t s4_201">b|h|w|d</span><span id="t1b_201" class="t s5_201">} </span>
<span id="t1c_201" class="t s4_201">atomic </span><span id="t1d_201" class="t s4_201">store(memory </span><span id="t1e_201" class="t s4_201">order </span><span id="t1f_201" class="t s4_201">relaxed) </span><span id="t1g_201" class="t s4_201">s</span><span id="t1h_201" class="t s5_201">{</span><span id="t1i_201" class="t s4_201">b|h|w|d</span><span id="t1j_201" class="t s5_201">} </span>
<span id="t1k_201" class="t s4_201">atomic </span><span id="t1l_201" class="t s4_201">store(memory </span><span id="t1m_201" class="t s4_201">order </span><span id="t1n_201" class="t s4_201">release) </span><span id="t1o_201" class="t s4_201">fence rw,w; s</span><span id="t1p_201" class="t s5_201">{</span><span id="t1q_201" class="t s4_201">b|h|w|d</span><span id="t1r_201" class="t s5_201">} </span>
<span id="t1s_201" class="t s4_201">atomic </span><span id="t1t_201" class="t s4_201">store(memory </span><span id="t1u_201" class="t s4_201">order </span><span id="t1v_201" class="t s4_201">seq </span><span id="t1w_201" class="t s4_201">cst) </span><span id="t1x_201" class="t s4_201">fence rw,w; s</span><span id="t1y_201" class="t s5_201">{</span><span id="t1z_201" class="t s4_201">b|h|w|d</span><span id="t20_201" class="t s5_201">} </span>
<span id="t21_201" class="t s4_201">atomic </span><span id="t22_201" class="t s4_201">thread </span><span id="t23_201" class="t s4_201">fence(memory </span><span id="t24_201" class="t s4_201">order </span><span id="t25_201" class="t s4_201">acquire) </span><span id="t26_201" class="t s4_201">fence r,rw </span>
<span id="t27_201" class="t s4_201">atomic </span><span id="t28_201" class="t s4_201">thread </span><span id="t29_201" class="t s4_201">fence(memory </span><span id="t2a_201" class="t s4_201">order </span><span id="t2b_201" class="t s4_201">release) </span><span id="t2c_201" class="t s4_201">fence rw,w </span>
<span id="t2d_201" class="t s4_201">atomic </span><span id="t2e_201" class="t s4_201">thread </span><span id="t2f_201" class="t s4_201">fence(memory </span><span id="t2g_201" class="t s4_201">order </span><span id="t2h_201" class="t s4_201">acq </span><span id="t2i_201" class="t s4_201">rel) </span><span id="t2j_201" class="t s4_201">fence.tso </span>
<span id="t2k_201" class="t s4_201">atomic </span><span id="t2l_201" class="t s4_201">thread </span><span id="t2m_201" class="t s4_201">fence(memory </span><span id="t2n_201" class="t s4_201">order </span><span id="t2o_201" class="t s4_201">seq </span><span id="t2p_201" class="t s4_201">cst) </span><span id="t2q_201" class="t s4_201">fence rw,rw </span>
<span id="t2r_201" class="t s2_201">C/C++ Construct </span><span id="t2s_201" class="t s2_201">RVWMO AMO Mapping </span>
<span id="t2t_201" class="t s4_201">atomic </span><span id="t2u_201" class="t s4_201">&lt;op&gt;(memory </span><span id="t2v_201" class="t s4_201">order </span><span id="t2w_201" class="t s4_201">relaxed) </span><span id="t2x_201" class="t s4_201">amo&lt;op&gt;.</span><span id="t2y_201" class="t s5_201">{</span><span id="t2z_201" class="t s4_201">w|d</span><span id="t30_201" class="t s5_201">} </span>
<span id="t31_201" class="t s4_201">atomic </span><span id="t32_201" class="t s4_201">&lt;op&gt;(memory </span><span id="t33_201" class="t s4_201">order </span><span id="t34_201" class="t s4_201">acquire) </span><span id="t35_201" class="t s4_201">amo&lt;op&gt;.</span><span id="t36_201" class="t s5_201">{</span><span id="t37_201" class="t s4_201">w|d</span><span id="t38_201" class="t s5_201">}</span><span id="t39_201" class="t s4_201">.aq </span>
<span id="t3a_201" class="t s4_201">atomic </span><span id="t3b_201" class="t s4_201">&lt;op&gt;(memory </span><span id="t3c_201" class="t s4_201">order </span><span id="t3d_201" class="t s4_201">release) </span><span id="t3e_201" class="t s4_201">amo&lt;op&gt;.</span><span id="t3f_201" class="t s5_201">{</span><span id="t3g_201" class="t s4_201">w|d</span><span id="t3h_201" class="t s5_201">}</span><span id="t3i_201" class="t s4_201">.rl </span>
<span id="t3j_201" class="t s4_201">atomic </span><span id="t3k_201" class="t s4_201">&lt;op&gt;(memory </span><span id="t3l_201" class="t s4_201">order </span><span id="t3m_201" class="t s4_201">acq </span><span id="t3n_201" class="t s4_201">rel) </span><span id="t3o_201" class="t s4_201">amo&lt;op&gt;.</span><span id="t3p_201" class="t s5_201">{</span><span id="t3q_201" class="t s4_201">w|d</span><span id="t3r_201" class="t s5_201">}</span><span id="t3s_201" class="t s4_201">.aqrl </span>
<span id="t3t_201" class="t s4_201">atomic </span><span id="t3u_201" class="t s4_201">&lt;op&gt;(memory </span><span id="t3v_201" class="t s4_201">order </span><span id="t3w_201" class="t s4_201">seq </span><span id="t3x_201" class="t s4_201">cst) </span><span id="t3y_201" class="t s4_201">amo&lt;op&gt;.</span><span id="t3z_201" class="t s5_201">{</span><span id="t40_201" class="t s4_201">w|d</span><span id="t41_201" class="t s5_201">}</span><span id="t42_201" class="t s4_201">.aqrl </span>
<span id="t43_201" class="t s2_201">C/C++ Construct </span><span id="t44_201" class="t s2_201">RVWMO LR/SC Mapping </span>
<span id="t45_201" class="t s4_201">atomic </span><span id="t46_201" class="t s4_201">&lt;op&gt;(memory </span><span id="t47_201" class="t s4_201">order </span><span id="t48_201" class="t s4_201">relaxed) </span>
<span id="t49_201" class="t s4_201">loop: lr.</span><span id="t4a_201" class="t s5_201">{</span><span id="t4b_201" class="t s4_201">w|d</span><span id="t4c_201" class="t s5_201">}</span><span id="t4d_201" class="t s4_201">; &lt;op&gt;; sc.</span><span id="t4e_201" class="t s5_201">{</span><span id="t4f_201" class="t s4_201">w|d</span><span id="t4g_201" class="t s5_201">}</span><span id="t4h_201" class="t s4_201">; </span>
<span id="t4i_201" class="t s4_201">bnez loop </span>
<span id="t4j_201" class="t s4_201">atomic </span><span id="t4k_201" class="t s4_201">&lt;op&gt;(memory </span><span id="t4l_201" class="t s4_201">order </span><span id="t4m_201" class="t s4_201">acquire) </span>
<span id="t4n_201" class="t s4_201">loop: lr.</span><span id="t4o_201" class="t s5_201">{</span><span id="t4p_201" class="t s4_201">w|d</span><span id="t4q_201" class="t s5_201">}</span><span id="t4r_201" class="t s4_201">.aq; &lt;op&gt;; sc.</span><span id="t4s_201" class="t s5_201">{</span><span id="t4t_201" class="t s4_201">w|d</span><span id="t4u_201" class="t s5_201">}</span><span id="t4v_201" class="t s4_201">; </span>
<span id="t4w_201" class="t s4_201">bnez loop </span>
<span id="t4x_201" class="t s4_201">atomic </span><span id="t4y_201" class="t s4_201">&lt;op&gt;(memory </span><span id="t4z_201" class="t s4_201">order </span><span id="t50_201" class="t s4_201">release) </span>
<span id="t51_201" class="t s4_201">loop: lr.</span><span id="t52_201" class="t s5_201">{</span><span id="t53_201" class="t s4_201">w|d</span><span id="t54_201" class="t s5_201">}</span><span id="t55_201" class="t s4_201">; &lt;op&gt;; sc.</span><span id="t56_201" class="t s5_201">{</span><span id="t57_201" class="t s4_201">w|d</span><span id="t58_201" class="t s5_201">}</span><span id="t59_201" class="t s4_201">.rl; </span>
<span id="t5a_201" class="t s4_201">bnez loop </span>
<span id="t5b_201" class="t s4_201">atomic </span><span id="t5c_201" class="t s4_201">&lt;op&gt;(memory </span><span id="t5d_201" class="t s4_201">order </span><span id="t5e_201" class="t s4_201">acq </span><span id="t5f_201" class="t s4_201">rel) </span>
<span id="t5g_201" class="t s4_201">loop: lr.</span><span id="t5h_201" class="t s5_201">{</span><span id="t5i_201" class="t s4_201">w|d</span><span id="t5j_201" class="t s5_201">}</span><span id="t5k_201" class="t s4_201">.aq; &lt;op&gt;; sc.</span><span id="t5l_201" class="t s5_201">{</span><span id="t5m_201" class="t s4_201">w|d</span><span id="t5n_201" class="t s5_201">}</span><span id="t5o_201" class="t s4_201">.rl; </span>
<span id="t5p_201" class="t s4_201">bnez loop </span>
<span id="t5q_201" class="t s4_201">atomic </span><span id="t5r_201" class="t s4_201">&lt;op&gt;(memory </span><span id="t5s_201" class="t s4_201">order </span><span id="t5t_201" class="t s4_201">seq </span><span id="t5u_201" class="t s4_201">cst) </span>
<span id="t5v_201" class="t s4_201">loop: lr.</span><span id="t5w_201" class="t s5_201">{</span><span id="t5x_201" class="t s4_201">w|d</span><span id="t5y_201" class="t s5_201">}</span><span id="t5z_201" class="t s4_201">.aqrl; &lt;op&gt;; </span>
<span id="t60_201" class="t s4_201">sc.</span><span id="t61_201" class="t s5_201">{</span><span id="t62_201" class="t s4_201">w|d</span><span id="t63_201" class="t s5_201">}</span><span id="t64_201" class="t s4_201">.rl; bnez loop </span>
<span id="t65_201" class="t s2_201">Table A.6: Mappings from C/C++ primitives to RISC-V primitives. </span>
<span id="t66_201" class="t s2_201">Table </span><span id="t67_201" class="t s3_201">A.6 </span><span id="t68_201" class="t s2_201">provides a mapping of C11/C++11 atomic operations onto RISC-V memory instruc- </span>
<span id="t69_201" class="t s2_201">tions. </span><span id="t6a_201" class="t s2_201">If load and store opcodes with </span><span id="t6b_201" class="t s6_201">aq </span><span id="t6c_201" class="t s2_201">and </span><span id="t6d_201" class="t s6_201">rl </span><span id="t6e_201" class="t s2_201" data-mappings='[[4,"fi"]]'>modiﬁers are introduced, then the mappings </span>
<span id="t6f_201" class="t s2_201">in Table </span><span id="t6g_201" class="t s3_201">A.7 </span><span id="t6h_201" class="t s2_201" data-mappings='[[7,"ffi"]]'>will suﬃce. </span><span id="t6i_201" class="t s2_201">Note however that the two mappings only interoperate correctly if </span>
<span id="t6j_201" class="t s4_201">atomic </span><span id="t6k_201" class="t s4_201">&lt;op&gt;(memory </span><span id="t6l_201" class="t s4_201">order </span><span id="t6m_201" class="t s4_201">seq </span><span id="t6n_201" class="t s4_201">cst) </span><span id="t6o_201" class="t s2_201">is mapped using an LR that has both </span><span id="t6p_201" class="t s6_201">aq </span><span id="t6q_201" class="t s2_201">and </span><span id="t6r_201" class="t s6_201">rl </span><span id="t6s_201" class="t s2_201">set. </span>
<span id="t6t_201" class="t s2_201">Any AMO can be emulated by an LR/SC pair, but care must be taken to ensure that any PPO </span>
<span id="t6u_201" class="t s2_201">orderings that originate from the LR are also made to originate from the SC, and that any PPO </span>
<span id="t6v_201" class="t s2_201">orderings that terminate at the SC are also made to terminate at the LR. For example, the LR must </span>
<span id="t6w_201" class="t s2_201">also be made to respect any data dependencies that the AMO has, given that load operations do not </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
