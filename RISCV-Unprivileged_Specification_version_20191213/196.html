<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p196" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_196{left:110px;bottom:1129px;letter-spacing:-0.17px;}
#t2_196{left:475px;bottom:1129px;letter-spacing:-0.21px;word-spacing:1.47px;}
#t3_196{left:110px;bottom:1082px;letter-spacing:-0.16px;word-spacing:1.42px;}
#t4_196{left:110px;bottom:1062px;letter-spacing:-0.14px;word-spacing:1.36px;}
#t5_196{left:110px;bottom:1002px;letter-spacing:0.14px;}
#t6_196{left:178px;bottom:1002px;letter-spacing:0.09px;word-spacing:2.39px;}
#t7_196{left:110px;bottom:956px;letter-spacing:-0.2px;word-spacing:3.28px;}
#t8_196{left:110px;bottom:935px;letter-spacing:-0.15px;word-spacing:0.68px;}
#t9_196{left:110px;bottom:914px;letter-spacing:-0.14px;word-spacing:3.25px;}
#ta_196{left:520px;bottom:914px;letter-spacing:-0.23px;word-spacing:3.5px;}
#tb_196{left:110px;bottom:894px;letter-spacing:-0.15px;word-spacing:1.39px;}
#tc_196{left:135px;bottom:845px;}
#td_196{left:152px;bottom:845px;letter-spacing:-0.15px;}
#te_196{left:152px;bottom:824px;letter-spacing:-0.15px;word-spacing:1.62px;}
#tf_196{left:135px;bottom:792px;}
#tg_196{left:152px;bottom:792px;letter-spacing:-0.15px;word-spacing:1.32px;}
#th_196{left:152px;bottom:771px;letter-spacing:-0.18px;word-spacing:1.45px;}
#ti_196{left:135px;bottom:739px;}
#tj_196{left:152px;bottom:739px;letter-spacing:-0.23px;word-spacing:4.01px;}
#tk_196{left:313px;bottom:739px;letter-spacing:-0.17px;word-spacing:3.9px;}
#tl_196{left:152px;bottom:718px;letter-spacing:-0.2px;word-spacing:2.92px;}
#tm_196{left:152px;bottom:697px;letter-spacing:-0.18px;word-spacing:1.5px;}
#tn_196{left:152px;bottom:677px;letter-spacing:-0.17px;word-spacing:1.43px;}
#to_196{left:135px;bottom:644px;}
#tp_196{left:152px;bottom:644px;letter-spacing:-0.18px;word-spacing:4.75px;}
#tq_196{left:300px;bottom:644px;letter-spacing:-0.17px;word-spacing:4.75px;}
#tr_196{left:152px;bottom:623px;letter-spacing:-0.16px;word-spacing:1.03px;}
#ts_196{left:152px;bottom:603px;letter-spacing:-0.19px;word-spacing:1.13px;}
#tt_196{left:152px;bottom:582px;letter-spacing:-0.19px;word-spacing:1.97px;}
#tu_196{left:152px;bottom:561px;letter-spacing:-0.16px;word-spacing:1.36px;}
#tv_196{left:152px;bottom:541px;letter-spacing:-0.15px;word-spacing:0.31px;}
#tw_196{left:152px;bottom:520px;letter-spacing:-0.18px;word-spacing:1.71px;}
#tx_196{left:152px;bottom:499px;letter-spacing:-0.18px;word-spacing:1.45px;}
#ty_196{left:135px;bottom:467px;}
#tz_196{left:152px;bottom:467px;letter-spacing:-0.14px;word-spacing:0.89px;}
#t10_196{left:152px;bottom:446px;letter-spacing:-0.19px;word-spacing:3.55px;}
#t11_196{left:152px;bottom:425px;letter-spacing:-0.16px;word-spacing:2.97px;}
#t12_196{left:496px;bottom:425px;letter-spacing:-0.14px;word-spacing:2.77px;}
#t13_196{left:152px;bottom:405px;letter-spacing:-0.07px;}
#t14_196{left:110px;bottom:345px;letter-spacing:0.14px;}
#t15_196{left:178px;bottom:345px;letter-spacing:0.15px;word-spacing:2.28px;}
#t16_196{left:110px;bottom:299px;letter-spacing:-0.22px;word-spacing:3px;}
#t17_196{left:110px;bottom:278px;letter-spacing:-0.2px;word-spacing:1.08px;}
#t18_196{left:110px;bottom:257px;letter-spacing:-0.18px;word-spacing:1.32px;}
#t19_196{left:110px;bottom:237px;letter-spacing:-0.15px;word-spacing:1.4px;}
#t1a_196{left:624px;bottom:237px;}
#t1b_196{left:638px;bottom:237px;letter-spacing:-0.16px;word-spacing:1.21px;}
#t1c_196{left:818px;bottom:237px;}
#t1d_196{left:110px;bottom:216px;letter-spacing:-0.15px;word-spacing:1.39px;}
#t1e_196{left:302px;bottom:216px;}
#t1f_196{left:316px;bottom:216px;letter-spacing:-0.15px;}
#t1g_196{left:383px;bottom:216px;}
#t1h_196{left:396px;bottom:216px;letter-spacing:-0.16px;word-spacing:1.42px;}
#t1i_196{left:130px;bottom:171px;letter-spacing:-0.13px;}
#t1j_196{left:152px;bottom:171px;}
#t1k_196{left:167px;bottom:171px;letter-spacing:-0.15px;}
#t1l_196{left:235px;bottom:171px;}
#t1m_196{left:248px;bottom:171px;letter-spacing:-0.17px;word-spacing:2.37px;}
#t1n_196{left:622px;bottom:171px;letter-spacing:-0.17px;}
#t1o_196{left:639px;bottom:171px;letter-spacing:-0.15px;word-spacing:2.4px;}
#t1p_196{left:152px;bottom:150px;letter-spacing:-0.15px;word-spacing:1.81px;}
#t1q_196{left:152px;bottom:130px;letter-spacing:-0.13px;word-spacing:2.98px;}
#t1r_196{left:152px;bottom:109px;letter-spacing:-0.15px;word-spacing:1.39px;}

.s1_196{font-size:17px;font-family:CMR10_270;color:#000;}
.s2_196{font-size:17px;font-family:CMSL10_27d;color:#000;}
.s3_196{font-size:18px;font-family:CMBX12_26j;color:#000;}
.s4_196{font-size:17px;font-family:CMSY10_27j;color:#000;}
.s5_196{font-size:17px;font-family:CMMI10_26t;color:#000;}
.s6_196{font-size:17px;font-family:CMR10_270;color:#000080;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts196" type="text/css" >

@font-face {
	font-family: CMBX12_26j;
	src: url("fonts/CMBX12_26j.woff") format("woff");
}

@font-face {
	font-family: CMMI10_26t;
	src: url("fonts/CMMI10_26t.woff") format("woff");
}

@font-face {
	font-family: CMR10_270;
	src: url("fonts/CMR10_270.woff") format("woff");
}

@font-face {
	font-family: CMSL10_27d;
	src: url("fonts/CMSL10_27d.woff") format("woff");
}

@font-face {
	font-family: CMSY10_27j;
	src: url("fonts/CMSY10_27j.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg196Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg196" style="-webkit-user-select: none;"><object width="935" height="1210" data="196/196.svg" type="image/svg+xml" id="pdf196" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_196" class="t s1_196">178 </span><span id="t2_196" class="t s2_196">Volume I: RISC-V Unprivileged ISA V20191213 </span>
<span id="t3_196" class="t s1_196">described in the RISC-V Instruction Set Privileged Architecture Manual, and the behavior of I/O </span>
<span id="t4_196" class="t s1_196" data-mappings='[[16,"ff"]]'>fences and the eﬀects of PMAs are described below. </span>
<span id="t5_196" class="t s3_196">A.4.1 </span><span id="t6_196" class="t s3_196">Coherence and Cacheability </span>
<span id="t7_196" class="t s1_196" data-mappings='[[28,"fi"]]'>The RISC-V Privileged ISA deﬁnes Physical Memory Attributes (PMAs) which specify, among </span>
<span id="t8_196" class="t s1_196">other things, whether portions of the address space are coherent and/or cacheable. See the RISC-V </span>
<span id="t9_196" class="t s1_196" data-mappings='[[20,"fi"]]'>Privileged ISA Speciﬁcation for the complete details. </span><span id="ta_196" class="t s1_196">Here, we simply discuss how the various </span>
<span id="tb_196" class="t s1_196">details in each PMA relate to the memory model: </span>
<span id="tc_196" class="t s4_196">• </span><span id="td_196" class="t s1_196" data-mappings='[[73,"fi"]]'>Main memory vs. I/O, and I/O memory ordering PMAs: the memory model as deﬁned applies </span>
<span id="te_196" class="t s1_196">to main memory regions. I/O ordering is discussed below. </span>
<span id="tf_196" class="t s4_196">• </span><span id="tg_196" class="t s1_196">Supported access types and atomicity PMAs: the memory model is simply applied on top of </span>
<span id="th_196" class="t s1_196">whatever primitives each region supports. </span>
<span id="ti_196" class="t s4_196">• </span><span id="tj_196" class="t s1_196">Cacheability PMAs: </span><span id="tk_196" class="t s1_196" data-mappings='[[41,"ff"]]'>the cacheability PMAs in general do not aﬀect the memory model. </span>
<span id="tl_196" class="t s1_196">Non-cacheable regions may have more restrictive behavior than cacheable regions, but the </span>
<span id="tm_196" class="t s1_196" data-mappings='[[81,"fi"]]'>set of allowed behaviors does not change regardless. However, some platform-speciﬁc and/or </span>
<span id="tn_196" class="t s1_196" data-mappings='[[12,"fi"],[43,"ff"]]'>device-speciﬁc cacheability settings may diﬀer. </span>
<span id="to_196" class="t s4_196">• </span><span id="tp_196" class="t s1_196">Coherence PMAs: </span><span id="tq_196" class="t s1_196">The memory consistency model for memory regions marked as non- </span>
<span id="tr_196" class="t s1_196" data-mappings='[[44,"fi"],[66,"fi"]]'>coherent in PMAs is currently platform-speciﬁc and/or device-speciﬁc: the load-value axiom, </span>
<span id="ts_196" class="t s1_196">the atomicity axiom, and the progress axiom all may be violated with non-coherent memory. </span>
<span id="tt_196" class="t s1_196">Note however that coherent memory does not require a hardware cache coherence protocol. </span>
<span id="tu_196" class="t s1_196" data-mappings='[[31,"fi"]]'>The RISC-V Privileged ISA Speciﬁcation suggests that hardware-incoherent regions of main </span>
<span id="tv_196" class="t s1_196">memory are discouraged, but the memory model is compatible with hardware coherence, soft- </span>
<span id="tw_196" class="t s1_196">ware coherence, implicit coherence due to read-only memory, implicit coherence due to only </span>
<span id="tx_196" class="t s1_196">one agent having access, or otherwise. </span>
<span id="ty_196" class="t s4_196">• </span><span id="tz_196" class="t s1_196">Idempotency PMAs: Idempotency PMAs are used to specify memory regions for which loads </span>
<span id="t10_196" class="t s1_196" data-mappings='[[29,"ff"]]'>and/or stores may have side eﬀects, and this in turn is used by the microarchitecture to </span>
<span id="t11_196" class="t s1_196">determine, e.g., whether prefetches are legal. </span><span id="t12_196" class="t s1_196" data-mappings='[[27,"ff"]]'>This distinction does not aﬀect the memory </span>
<span id="t13_196" class="t s1_196">model. </span>
<span id="t14_196" class="t s3_196">A.4.2 </span><span id="t15_196" class="t s3_196">I/O Ordering </span>
<span id="t16_196" class="t s1_196">For I/O, the load value axiom and atomicity axiom in general do not apply, as both reads and </span>
<span id="t17_196" class="t s1_196" data-mappings='[[30,"fi"],[39,"ff"]]'>writes might have device-speciﬁc side eﬀects and may return values other than the value “written” </span>
<span id="t18_196" class="t s1_196">by the most recent store to the same address. Nevertheless, the following preserved program order </span>
<span id="t19_196" class="t s1_196">rules still generally apply for accesses to I/O memory: memory access </span><span id="t1a_196" class="t s5_196">a </span><span id="t1b_196" class="t s1_196">precedes memory access </span><span id="t1c_196" class="t s5_196">b </span>
<span id="t1d_196" class="t s1_196">in global memory order if </span><span id="t1e_196" class="t s5_196">a </span><span id="t1f_196" class="t s1_196">precedes </span><span id="t1g_196" class="t s5_196">b </span><span id="t1h_196" class="t s1_196">in program order and one or more of the following holds: </span>
<span id="t1i_196" class="t s1_196">1. </span><span id="t1j_196" class="t s5_196">a </span><span id="t1k_196" class="t s1_196">precedes </span><span id="t1l_196" class="t s5_196">b </span><span id="t1m_196" class="t s1_196" data-mappings='[[32,"fi"]]'>in preserved program order as deﬁned in Chapter </span><span id="t1n_196" class="t s6_196">14</span><span id="t1o_196" class="t s1_196">, with the exception that </span>
<span id="t1p_196" class="t s1_196">acquire and release ordering annotations apply only from one memory operation to another </span>
<span id="t1q_196" class="t s1_196">memory operation and from one I/O operation to another I/O operation, but not from a </span>
<span id="t1r_196" class="t s1_196">memory operation to an I/O nor vice versa </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
