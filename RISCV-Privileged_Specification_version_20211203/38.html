<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p38" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_38{left:110px;bottom:1129px;letter-spacing:-0.17px;}
#t2_38{left:418px;bottom:1129px;letter-spacing:-0.19px;word-spacing:1.45px;}
#t3_38{left:110px;bottom:1082px;letter-spacing:-0.21px;word-spacing:2.4px;}
#t4_38{left:110px;bottom:1062px;letter-spacing:-0.16px;}
#t5_38{left:148px;bottom:1062px;letter-spacing:-0.15px;}
#t6_38{left:170px;bottom:1062px;}
#t7_38{left:183px;bottom:1062px;letter-spacing:-0.17px;}
#t8_38{left:206px;bottom:1062px;letter-spacing:-0.18px;}
#t9_38{left:239px;bottom:1062px;letter-spacing:-0.15px;}
#ta_38{left:261px;bottom:1062px;}
#tb_38{left:274px;bottom:1062px;letter-spacing:-0.17px;}
#tc_38{left:292px;bottom:1062px;}
#td_38{left:152px;bottom:1017px;letter-spacing:0.03px;word-spacing:2.41px;}
#te_38{left:152px;bottom:999px;letter-spacing:0.07px;word-spacing:2.73px;}
#tf_38{left:385px;bottom:999px;letter-spacing:0.04px;word-spacing:2.83px;}
#tg_38{left:152px;bottom:980px;letter-spacing:0.08px;word-spacing:3.53px;}
#th_38{left:152px;bottom:962px;letter-spacing:0.02px;word-spacing:1.59px;}
#ti_38{left:152px;bottom:944px;letter-spacing:-0.04px;word-spacing:1.9px;}
#tj_38{left:110px;bottom:907px;letter-spacing:-0.16px;word-spacing:0.66px;}
#tk_38{left:110px;bottom:887px;letter-spacing:-0.17px;word-spacing:1.42px;}
#tl_38{left:152px;bottom:842px;letter-spacing:0.06px;word-spacing:2px;}
#tm_38{left:152px;bottom:824px;letter-spacing:0.02px;word-spacing:2.39px;}
#tn_38{left:152px;bottom:805px;letter-spacing:0.01px;word-spacing:1.14px;}
#to_38{left:152px;bottom:787px;letter-spacing:-0.07px;word-spacing:1.98px;}
#tp_38{left:152px;bottom:742px;letter-spacing:-0.04px;word-spacing:3.09px;}
#tq_38{left:601px;bottom:742px;}
#tr_38{left:609px;bottom:750px;letter-spacing:-0.28px;}
#ts_38{left:651px;bottom:742px;letter-spacing:-0.01px;word-spacing:3.02px;}
#tt_38{left:152px;bottom:724px;letter-spacing:-0.06px;word-spacing:1.97px;}
#tu_38{left:152px;bottom:705px;letter-spacing:0.04px;word-spacing:1.51px;}
#tv_38{left:152px;bottom:687px;letter-spacing:0.04px;word-spacing:1.77px;}
#tw_38{left:152px;bottom:642px;letter-spacing:0.02px;word-spacing:2.1px;}
#tx_38{left:152px;bottom:624px;letter-spacing:0.01px;word-spacing:2.04px;}
#ty_38{left:152px;bottom:605px;word-spacing:1.48px;}
#tz_38{left:152px;bottom:587px;letter-spacing:0.03px;word-spacing:1.92px;}
#t10_38{left:152px;bottom:569px;letter-spacing:-0.01px;word-spacing:1.87px;}
#t11_38{left:152px;bottom:524px;letter-spacing:0.03px;word-spacing:1.99px;}
#t12_38{left:152px;bottom:505px;letter-spacing:0.02px;word-spacing:1.54px;}
#t13_38{left:152px;bottom:487px;letter-spacing:0.06px;word-spacing:1.1px;}
#t14_38{left:152px;bottom:469px;letter-spacing:0.05px;word-spacing:2.86px;}
#t15_38{left:152px;bottom:451px;letter-spacing:0.05px;word-spacing:1.86px;}
#t16_38{left:152px;bottom:432px;letter-spacing:0.03px;word-spacing:1.77px;}
#t17_38{left:177px;bottom:414px;letter-spacing:0.03px;word-spacing:2.63px;}
#t18_38{left:152px;bottom:396px;letter-spacing:0.02px;word-spacing:2.02px;}
#t19_38{left:152px;bottom:377px;letter-spacing:0.02px;word-spacing:2.7px;}
#t1a_38{left:152px;bottom:359px;letter-spacing:0.03px;word-spacing:1.78px;}
#t1b_38{left:110px;bottom:299px;letter-spacing:-0.16px;}
#t1c_38{left:183px;bottom:299px;letter-spacing:-0.14px;word-spacing:2.17px;}
#t1d_38{left:403px;bottom:299px;letter-spacing:-0.18px;}
#t1e_38{left:471px;bottom:299px;letter-spacing:-0.17px;}
#t1f_38{left:110px;bottom:253px;letter-spacing:-0.23px;word-spacing:3.91px;}
#t1g_38{left:442px;bottom:253px;letter-spacing:-1px;}
#t1h_38{left:508px;bottom:253px;letter-spacing:-0.14px;word-spacing:3.76px;}
#t1i_38{left:110px;bottom:232px;letter-spacing:-0.16px;word-spacing:1.36px;}
#t1j_38{left:751px;bottom:232px;letter-spacing:-0.18px;}
#t1k_38{left:791px;bottom:232px;letter-spacing:-0.22px;}
#t1l_38{left:110px;bottom:211px;letter-spacing:-0.18px;word-spacing:0.81px;}
#t1m_38{left:110px;bottom:191px;letter-spacing:-0.14px;word-spacing:2.51px;}
#t1n_38{left:110px;bottom:170px;letter-spacing:-0.12px;word-spacing:1.32px;}

.s1_38{font-size:17px;font-family:CMR10_1fw;color:#000;}
.s2_38{font-size:17px;font-family:CMSL10_1g7;color:#000;}
.s3_38{font-size:17px;font-family:CMTI10_1gf;color:#000;}
.s4_38{font-size:17px;font-family:CMTT10_1gl;color:#000;}
.s5_38{font-size:15px;font-family:CMTI10_1gf;color:#000;}
.s6_38{font-size:15px;font-family:CMR10_1fw;color:#000;}
.s7_38{font-size:11px;font-family:CMTI7_1gh;color:#000;}
.s8_38{font-size:17px;font-family:CMBX10_1fg;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts38" type="text/css" >

@font-face {
	font-family: CMBX10_1fg;
	src: url("fonts/CMBX10_1fg.woff") format("woff");
}

@font-face {
	font-family: CMR10_1fw;
	src: url("fonts/CMR10_1fw.woff") format("woff");
}

@font-face {
	font-family: CMSL10_1g7;
	src: url("fonts/CMSL10_1g7.woff") format("woff");
}

@font-face {
	font-family: CMTI10_1gf;
	src: url("fonts/CMTI10_1gf.woff") format("woff");
}

@font-face {
	font-family: CMTI7_1gh;
	src: url("fonts/CMTI7_1gh.woff") format("woff");
}

@font-face {
	font-family: CMTT10_1gl;
	src: url("fonts/CMTT10_1gl.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg38Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg38" style="-webkit-user-select: none;"><object width="935" height="1210" data="38/38.svg" type="image/svg+xml" id="pdf38" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_38" class="t s1_38">24 </span><span id="t2_38" class="t s2_38">Volume II: RISC-V Privileged Architectures V20211203 </span>
<span id="t3_38" class="t s1_38">M-mode software must follow such a change to SBE by executing an SFENCE.VMA instruction </span>
<span id="t4_38" class="t s1_38">with </span><span id="t5_38" class="t s3_38">rs1</span><span id="t6_38" class="t s1_38">=</span><span id="t7_38" class="t s4_38">x0 </span><span id="t8_38" class="t s1_38">and </span><span id="t9_38" class="t s3_38">rs2</span><span id="ta_38" class="t s1_38">=</span><span id="tb_38" class="t s4_38">x0</span><span id="tc_38" class="t s1_38">. </span>
<span id="td_38" class="t s5_38">Only in contrived scenarios will a given memory-management data structure be interpreted as </span>
<span id="te_38" class="t s5_38">both little-endian and big-endian. </span><span id="tf_38" class="t s5_38">In practice, SBE will only be changed at runtime on world </span>
<span id="tg_38" class="t s5_38">switches, in which case neither the old nor new memory-management data structure will be </span>
<span id="th_38" class="t s5_38" data-mappings='[[21,"ff"]]'>reinterpreted in a diﬀerent endianness. In this case, no additional SFENCE.VMA is necessary, </span>
<span id="ti_38" class="t s5_38">beyond what would ordinarily be required for a world switch. </span>
<span id="tj_38" class="t s1_38">If S-mode is supported, an implementation may make SBE be a read-only copy of MBE. If U-mode </span>
<span id="tk_38" class="t s1_38">is supported, an implementation may make UBE be a read-only copy of either MBE or SBE. </span>
<span id="tl_38" class="t s5_38" data-mappings='[[65,"fi"]]'>An implementation supports only little-endian memory accesses if ﬁelds MBE, SBE, and UBE </span>
<span id="tm_38" class="t s5_38">are all read-only 0. An implementation supports only big-endian memory accesses (aside from </span>
<span id="tn_38" class="t s5_38">instruction fetches) if MBE is read-only 1 and SBE and UBE are each read-only 1 when S-mode </span>
<span id="to_38" class="t s5_38">and U-mode are supported. </span>
<span id="tp_38" class="t s5_38" data-mappings='[[11,"fi"]]'>Volume I deﬁnes a hart’s address space as a circular sequence of </span><span id="tq_38" class="t s6_38">2 </span>
<span id="tr_38" class="t s7_38">XLEN </span>
<span id="ts_38" class="t s5_38">bytes at consecutive </span>
<span id="tt_38" class="t s5_38" data-mappings='[[70,"fi"],[84,"ff"]]'>addresses. The correspondence between addresses and byte locations is ﬁxed and not aﬀected by </span>
<span id="tu_38" class="t s5_38">any endianness mode. Rather, the applicable endianness mode determines the order of mapping </span>
<span id="tv_38" class="t s5_38">between memory bytes and a multibyte quantity (halfword, word, etc.). </span>
<span id="tw_38" class="t s5_38">Standard RISC-V ABIs are expected to be purely little-endian-only or big-endian-only, with no </span>
<span id="tx_38" class="t s5_38" data-mappings='[[81,"fi"]]'>accommodation for mixing endianness. Nevertheless, endianness control has been deﬁned so as </span>
<span id="ty_38" class="t s5_38">to permit, for instance, an OS of one endianness to execute user-mode programs of the opposite </span>
<span id="tz_38" class="t s5_38">endianness. Consideration has been given also to the possibility of nonstandard usages whereby </span>
<span id="t10_38" class="t s5_38" data-mappings='[[9,"fl"]]'>software ﬂips the endianness of memory accesses as needed. </span>
<span id="t11_38" class="t s5_38">RISC-V instructions are uniformly little-endian to decouple instruction encoding from the cur- </span>
<span id="t12_38" class="t s5_38" data-mappings='[[38,"fi"]]'>rent endianness settings, for the beneﬁt of both hardware and software. Otherwise, for instance, </span>
<span id="t13_38" class="t s5_38">a RISC-V assembler or disassembler would always need to know the intended active endianness, </span>
<span id="t14_38" class="t s5_38">despite that the endianness mode might change dynamically during execution. In contrast, by </span>
<span id="t15_38" class="t s5_38" data-mappings='[[22,"fi"]]'>giving instructions a ﬁxed endianness, it is sometimes possible for carefully written software to </span>
<span id="t16_38" class="t s5_38">be endianness-agnostic even in binary form, much like position-independent code. </span>
<span id="t17_38" class="t s5_38">The choice to have instructions be only little-endian does have consequences, however, for </span>
<span id="t18_38" class="t s5_38">RISC-V software that encodes or decodes machine instructions. In big-endian mode, such soft- </span>
<span id="t19_38" class="t s5_38">ware must account for the fact that explicit loads and stores have endianness opposite that of </span>
<span id="t1a_38" class="t s5_38">instructions, for example by swapping byte order after loads and before stores. </span>
<span id="t1b_38" class="t s8_38">3.1.6.5 </span><span id="t1c_38" class="t s8_38">Virtualization Support in </span><span id="t1d_38" class="t s4_38">mstatus </span><span id="t1e_38" class="t s8_38">Register </span>
<span id="t1f_38" class="t s1_38">The TVM (Trap Virtual Memory) bit is a </span><span id="t1g_38" class="t s8_38">WARL </span><span id="t1h_38" class="t s1_38" data-mappings='[[0,"fi"]]'>ﬁeld that supports intercepting supervisor </span>
<span id="t1i_38" class="t s1_38">virtual-memory management operations. When TVM=1, attempts to read or write the </span><span id="t1j_38" class="t s4_38">satp </span><span id="t1k_38" class="t s1_38">CSR </span>
<span id="t1l_38" class="t s1_38">or execute an SFENCE.VMA or SINVAL.VMA instruction while executing in S-mode will raise an </span>
<span id="t1m_38" class="t s1_38">illegal instruction exception. When TVM=0, these operations are permitted in S-mode. TVM is </span>
<span id="t1n_38" class="t s1_38">read-only 0 when S-mode is not supported. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
