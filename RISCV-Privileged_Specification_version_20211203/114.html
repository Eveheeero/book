<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p114" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_114{left:110px;bottom:1129px;letter-spacing:-0.17px;}
#t2_114{left:418px;bottom:1129px;letter-spacing:-0.19px;word-spacing:1.45px;}
#t3_114{left:110px;bottom:1080px;letter-spacing:-0.04px;}
#t4_114{left:166px;bottom:1080px;letter-spacing:0.01px;word-spacing:2.63px;}
#t5_114{left:110px;bottom:1030px;letter-spacing:-0.21px;word-spacing:1.4px;}
#t6_114{left:202px;bottom:1030px;letter-spacing:-0.2px;word-spacing:1.81px;}
#t7_114{left:341px;bottom:1030px;letter-spacing:-0.15px;word-spacing:1.31px;}
#t8_114{left:110px;bottom:1009px;letter-spacing:-0.12px;word-spacing:0.14px;}
#t9_114{left:110px;bottom:988px;letter-spacing:-0.13px;word-spacing:0.87px;}
#ta_114{left:110px;bottom:968px;letter-spacing:-0.14px;word-spacing:0.36px;}
#tb_114{left:110px;bottom:947px;letter-spacing:-0.2px;word-spacing:1.8px;}
#tc_114{left:559px;bottom:947px;letter-spacing:-0.14px;}
#td_114{left:586px;bottom:947px;letter-spacing:-0.1px;word-spacing:1.38px;}
#te_114{left:110px;bottom:926px;letter-spacing:-0.15px;word-spacing:1.39px;}
#tf_114{left:120px;bottom:888px;letter-spacing:-0.14px;}
#tg_114{left:241px;bottom:888px;letter-spacing:-0.18px;}
#th_114{left:326px;bottom:878px;letter-spacing:-0.16px;}
#ti_114{left:441px;bottom:878px;letter-spacing:-0.21px;}
#tj_114{left:735px;bottom:888px;letter-spacing:-0.23px;}
#tk_114{left:135px;bottom:867px;letter-spacing:-0.09px;word-spacing:1.2px;}
#tl_114{left:240px;bottom:867px;letter-spacing:-0.14px;}
#tm_114{left:735px;bottom:867px;letter-spacing:-0.29px;}
#tn_114{left:166px;bottom:846px;}
#to_114{left:266px;bottom:846px;}
#tp_114{left:326px;bottom:846px;letter-spacing:-0.1px;}
#tq_114{left:441px;bottom:846px;letter-spacing:-0.1px;word-spacing:1.23px;}
#tr_114{left:735px;bottom:846px;letter-spacing:-0.23px;}
#ts_114{left:166px;bottom:825px;}
#tt_114{left:267px;bottom:825px;}
#tu_114{left:326px;bottom:825px;letter-spacing:-0.11px;}
#tv_114{left:441px;bottom:825px;letter-spacing:-0.11px;word-spacing:1.29px;}
#tw_114{left:735px;bottom:825px;letter-spacing:-0.23px;}
#tx_114{left:166px;bottom:805px;}
#ty_114{left:264px;bottom:805px;}
#tz_114{left:326px;bottom:805px;letter-spacing:-0.11px;}
#t10_114{left:441px;bottom:805px;letter-spacing:-0.18px;word-spacing:1.38px;}
#t11_114{left:735px;bottom:805px;letter-spacing:-0.23px;}
#t12_114{left:166px;bottom:783px;}
#t13_114{left:266px;bottom:783px;}
#t14_114{left:326px;bottom:783px;letter-spacing:-0.12px;}
#t15_114{left:441px;bottom:783px;letter-spacing:-0.12px;word-spacing:1.32px;}
#t16_114{left:735px;bottom:783px;letter-spacing:-0.22px;}
#t17_114{left:166px;bottom:763px;}
#t18_114{left:267px;bottom:763px;}
#t19_114{left:326px;bottom:763px;letter-spacing:-0.11px;}
#t1a_114{left:441px;bottom:763px;letter-spacing:-0.1px;word-spacing:1.28px;}
#t1b_114{left:735px;bottom:763px;letter-spacing:-0.22px;}
#t1c_114{left:257px;bottom:709px;letter-spacing:-0.17px;word-spacing:1.7px;}
#t1d_114{left:110px;bottom:670px;letter-spacing:-0.2px;word-spacing:1.9px;}
#t1e_114{left:376px;bottom:670px;letter-spacing:-0.25px;word-spacing:2.39px;}
#t1f_114{left:552px;bottom:670px;letter-spacing:-0.13px;word-spacing:1.76px;}
#t1g_114{left:110px;bottom:650px;letter-spacing:-0.13px;word-spacing:1.35px;}
#t1h_114{left:110px;bottom:614px;letter-spacing:-0.13px;word-spacing:1.81px;}
#t1i_114{left:110px;bottom:593px;letter-spacing:-0.14px;word-spacing:1.37px;}
#t1j_114{left:152px;bottom:548px;letter-spacing:0.04px;word-spacing:1.65px;}
#t1k_114{left:152px;bottom:530px;letter-spacing:0.04px;word-spacing:1.74px;}
#t1l_114{left:110px;bottom:459px;letter-spacing:-0.04px;}
#t1m_114{left:166px;bottom:459px;word-spacing:2.64px;}
#t1n_114{left:110px;bottom:409px;letter-spacing:-0.14px;word-spacing:0.85px;}
#t1o_114{left:110px;bottom:389px;letter-spacing:-0.16px;word-spacing:3.37px;}
#t1p_114{left:467px;bottom:389px;letter-spacing:-0.16px;word-spacing:3.27px;}
#t1q_114{left:110px;bottom:368px;letter-spacing:-0.17px;word-spacing:2.94px;}
#t1r_114{left:110px;bottom:347px;letter-spacing:-0.11px;word-spacing:3.63px;}
#t1s_114{left:212px;bottom:347px;letter-spacing:-0.17px;}
#t1t_114{left:273px;bottom:347px;}
#t1u_114{left:286px;bottom:347px;letter-spacing:-0.17px;}
#t1v_114{left:348px;bottom:347px;}
#t1w_114{left:361px;bottom:347px;letter-spacing:-0.18px;}
#t1x_114{left:422px;bottom:347px;}
#t1y_114{left:435px;bottom:347px;letter-spacing:-0.18px;}
#t1z_114{left:470px;bottom:347px;}
#t20_114{left:483px;bottom:347px;letter-spacing:-0.18px;}
#t21_114{left:510px;bottom:347px;}
#t22_114{left:523px;bottom:347px;letter-spacing:-0.18px;}
#t23_114{left:549px;bottom:347px;}
#t24_114{left:562px;bottom:347px;letter-spacing:-0.18px;}
#t25_114{left:606px;bottom:347px;}
#t26_114{left:619px;bottom:347px;letter-spacing:-0.18px;}
#t27_114{left:663px;bottom:347px;}
#t28_114{left:676px;bottom:347px;letter-spacing:-0.18px;}
#t29_114{left:737px;bottom:347px;}
#t2a_114{left:750px;bottom:347px;letter-spacing:-0.17px;}
#t2b_114{left:820px;bottom:347px;}
#t2c_114{left:110px;bottom:327px;letter-spacing:-0.17px;}
#t2d_114{left:197px;bottom:327px;}
#t2e_114{left:208px;bottom:327px;letter-spacing:-0.17px;}
#t2f_114{left:295px;bottom:327px;}
#t2g_114{left:305px;bottom:327px;letter-spacing:-0.17px;}
#t2h_114{left:402px;bottom:327px;}
#t2i_114{left:412px;bottom:327px;letter-spacing:-0.18px;}
#t2j_114{left:456px;bottom:327px;}
#t2k_114{left:466px;bottom:327px;letter-spacing:-0.18px;}
#t2l_114{left:518px;bottom:327px;letter-spacing:-0.15px;word-spacing:1.38px;}
#t2m_114{left:561px;bottom:327px;letter-spacing:-0.18px;}
#t2n_114{left:605px;bottom:327px;}
#t2o_114{left:110px;bottom:291px;letter-spacing:-0.26px;word-spacing:4.55px;}
#t2p_114{left:271px;bottom:291px;letter-spacing:-0.2px;word-spacing:4.08px;}
#t2q_114{left:408px;bottom:291px;letter-spacing:-0.15px;word-spacing:3.72px;}
#t2r_114{left:110px;bottom:270px;letter-spacing:-0.27px;word-spacing:2.52px;}
#t2s_114{left:262px;bottom:270px;letter-spacing:-0.17px;}
#t2t_114{left:338px;bottom:270px;letter-spacing:-0.15px;word-spacing:1.39px;}
#t2u_114{left:637px;bottom:270px;letter-spacing:-0.18px;}
#t2v_114{left:703px;bottom:270px;letter-spacing:-0.19px;}
#t2w_114{left:110px;bottom:234px;letter-spacing:-0.15px;word-spacing:1.7px;}
#t2x_114{left:110px;bottom:213px;letter-spacing:-0.13px;word-spacing:0.51px;}
#t2y_114{left:110px;bottom:193px;letter-spacing:-0.13px;word-spacing:1.3px;}
#t2z_114{left:110px;bottom:172px;letter-spacing:-0.17px;word-spacing:2px;}
#t30_114{left:110px;bottom:151px;letter-spacing:-0.15px;word-spacing:1.48px;}
#t31_114{left:110px;bottom:131px;letter-spacing:-0.13px;word-spacing:1.34px;}

.s1_114{font-size:17px;font-family:CMR10_1fw;color:#000;}
.s2_114{font-size:17px;font-family:CMSL10_1g7;color:#000;}
.s3_114{font-size:22px;font-family:CMBX12_1fi;color:#000;}
.s4_114{font-size:17px;font-family:CMTI10_1gf;color:#000;}
.s5_114{font-size:17px;font-family:CMR10_1fw;color:#000080;}
.s6_114{font-size:15px;font-family:CMTI10_1gf;color:#000;}
.s7_114{font-size:17px;font-family:CMTT10_1gl;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts114" type="text/css" >

@font-face {
	font-family: CMBX12_1fi;
	src: url("fonts/CMBX12_1fi.woff") format("woff");
}

@font-face {
	font-family: CMR10_1fw;
	src: url("fonts/CMR10_1fw.woff") format("woff");
}

@font-face {
	font-family: CMSL10_1g7;
	src: url("fonts/CMSL10_1g7.woff") format("woff");
}

@font-face {
	font-family: CMTI10_1gf;
	src: url("fonts/CMTI10_1gf.woff") format("woff");
}

@font-face {
	font-family: CMTT10_1gl;
	src: url("fonts/CMTT10_1gl.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg114Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg114" style="-webkit-user-select: none;"><object width="935" height="1210" data="114/114.svg" type="image/svg+xml" id="pdf114" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_114" class="t s1_114">100 </span><span id="t2_114" class="t s2_114">Volume II: RISC-V Privileged Architectures V20211203 </span>
<span id="t3_114" class="t s3_114">8.1 </span><span id="t4_114" class="t s3_114">Privilege Modes </span>
<span id="t5_114" class="t s1_114">The current </span><span id="t6_114" class="t s4_114">virtualization mode</span><span id="t7_114" class="t s1_114">, denoted V, indicates whether the hart is currently executing in a </span>
<span id="t8_114" class="t s1_114">guest. When V=1, the hart is either in virtual S-mode (VS-mode), or in virtual U-mode (VU-mode) </span>
<span id="t9_114" class="t s1_114">atop a guest OS running in VS-mode. When V=0, the hart is either in M-mode, in HS-mode, or in </span>
<span id="ta_114" class="t s1_114">U-mode atop an OS running in HS-mode. The virtualization mode also indicates whether two-stage </span>
<span id="tb_114" class="t s1_114">address translation is active (V=1) or inactive (V=0). Table </span><span id="tc_114" class="t s5_114">8.1 </span><span id="td_114" class="t s1_114">lists the possible privilege modes </span>
<span id="te_114" class="t s1_114">of a RISC-V hart with the hypervisor extension. </span>
<span id="tf_114" class="t s1_114">Virtualization </span><span id="tg_114" class="t s1_114">Nominal </span>
<span id="th_114" class="t s1_114">Abbreviation </span><span id="ti_114" class="t s1_114">Name </span>
<span id="tj_114" class="t s1_114">Two-Stage </span>
<span id="tk_114" class="t s1_114">Mode (V) </span><span id="tl_114" class="t s1_114">Privilege </span><span id="tm_114" class="t s1_114">Translation </span>
<span id="tn_114" class="t s1_114">0 </span><span id="to_114" class="t s1_114">U </span><span id="tp_114" class="t s1_114">U-mode </span><span id="tq_114" class="t s1_114">User mode </span><span id="tr_114" class="t s1_114" data-mappings='[[1,"ff"]]'>Oﬀ </span>
<span id="ts_114" class="t s1_114">0 </span><span id="tt_114" class="t s1_114">S </span><span id="tu_114" class="t s1_114">HS-mode </span><span id="tv_114" class="t s1_114">Hypervisor-extended supervisor mode </span><span id="tw_114" class="t s1_114" data-mappings='[[1,"ff"]]'>Oﬀ </span>
<span id="tx_114" class="t s1_114">0 </span><span id="ty_114" class="t s1_114">M </span><span id="tz_114" class="t s1_114">M-mode </span><span id="t10_114" class="t s1_114">Machine mode </span><span id="t11_114" class="t s1_114" data-mappings='[[1,"ff"]]'>Oﬀ </span>
<span id="t12_114" class="t s1_114">1 </span><span id="t13_114" class="t s1_114">U </span><span id="t14_114" class="t s1_114">VU-mode </span><span id="t15_114" class="t s1_114">Virtual user mode </span><span id="t16_114" class="t s1_114">On </span>
<span id="t17_114" class="t s1_114">1 </span><span id="t18_114" class="t s1_114">S </span><span id="t19_114" class="t s1_114">VS-mode </span><span id="t1a_114" class="t s1_114">Virtual supervisor mode </span><span id="t1b_114" class="t s1_114">On </span>
<span id="t1c_114" class="t s1_114">Table 8.1: Privilege modes with the hypervisor extension. </span>
<span id="t1d_114" class="t s1_114">For privilege modes U and VU, the </span><span id="t1e_114" class="t s4_114">nominal privilege mode </span><span id="t1f_114" class="t s1_114">is U, and for privilege modes HS and </span>
<span id="t1g_114" class="t s1_114">VS, the nominal privilege mode is S. </span>
<span id="t1h_114" class="t s1_114">HS-mode is more privileged than VS-mode, and VS-mode is more privileged than VU-mode. VS- </span>
<span id="t1i_114" class="t s1_114">mode interrupts are globally disabled when executing in U-mode. </span>
<span id="t1j_114" class="t s6_114">This description does not consider the possibility of U-mode or VU-mode interrupts and will be </span>
<span id="t1k_114" class="t s6_114">revised if an extension for user-level interrupts is adopted. </span>
<span id="t1l_114" class="t s3_114">8.2 </span><span id="t1m_114" class="t s3_114">Hypervisor and Virtual Supervisor CSRs </span>
<span id="t1n_114" class="t s1_114">An OS or hypervisor running in HS-mode uses the supervisor CSRs to interact with the exception, </span>
<span id="t1o_114" class="t s1_114">interrupt, and address-translation subsystems. </span><span id="t1p_114" class="t s1_114">Additional CSRs are provided to HS-mode, but </span>
<span id="t1q_114" class="t s1_114">not to VS-mode, to manage two-stage address translation and to control the behavior of a VS- </span>
<span id="t1r_114" class="t s1_114">mode guest: </span><span id="t1s_114" class="t s7_114">hstatus</span><span id="t1t_114" class="t s1_114">, </span><span id="t1u_114" class="t s7_114">hedeleg</span><span id="t1v_114" class="t s1_114">, </span><span id="t1w_114" class="t s7_114">hideleg</span><span id="t1x_114" class="t s1_114">, </span><span id="t1y_114" class="t s7_114">hvip</span><span id="t1z_114" class="t s1_114">, </span><span id="t20_114" class="t s7_114">hip</span><span id="t21_114" class="t s1_114">, </span><span id="t22_114" class="t s7_114">hie</span><span id="t23_114" class="t s1_114">, </span><span id="t24_114" class="t s7_114">hgeip</span><span id="t25_114" class="t s1_114">, </span><span id="t26_114" class="t s7_114">hgeie</span><span id="t27_114" class="t s1_114">, </span><span id="t28_114" class="t s7_114">henvcfg</span><span id="t29_114" class="t s1_114">, </span><span id="t2a_114" class="t s7_114">henvcfgh</span><span id="t2b_114" class="t s1_114">, </span>
<span id="t2c_114" class="t s7_114">hcounteren</span><span id="t2d_114" class="t s1_114">, </span><span id="t2e_114" class="t s7_114">htimedelta</span><span id="t2f_114" class="t s1_114">, </span><span id="t2g_114" class="t s7_114">htimedeltah</span><span id="t2h_114" class="t s1_114">, </span><span id="t2i_114" class="t s7_114">htval</span><span id="t2j_114" class="t s1_114">, </span><span id="t2k_114" class="t s7_114">htinst</span><span id="t2l_114" class="t s1_114">, and </span><span id="t2m_114" class="t s7_114">hgatp</span><span id="t2n_114" class="t s1_114">. </span>
<span id="t2o_114" class="t s1_114">Furthermore, several </span><span id="t2p_114" class="t s4_114">virtual supervisor </span><span id="t2q_114" class="t s1_114">CSRs (VS CSRs) are replicas of the normal supervisor </span>
<span id="t2r_114" class="t s1_114">CSRs. For example, </span><span id="t2s_114" class="t s7_114">vsstatus </span><span id="t2t_114" class="t s1_114">is the VS CSR that duplicates the usual </span><span id="t2u_114" class="t s7_114">sstatus </span><span id="t2v_114" class="t s1_114">CSR. </span>
<span id="t2w_114" class="t s1_114">When V=1, the VS CSRs substitute for the corresponding supervisor CSRs, taking over all func- </span>
<span id="t2x_114" class="t s1_114" data-mappings='[[50,"fi"]]'>tions of the usual supervisor CSRs except as speciﬁed otherwise. Instructions that normally read or </span>
<span id="t2y_114" class="t s1_114">modify a supervisor CSR shall instead access the corresponding VS CSR. When V=1, an attempt </span>
<span id="t2z_114" class="t s1_114">to read or write a VS CSR directly by its own separate CSR address causes a virtual instruction </span>
<span id="t30_114" class="t s1_114">exception. (Attempts from U-mode cause an illegal instruction exception as usual.) The VS CSRs </span>
<span id="t31_114" class="t s1_114">can be accessed as themselves only from M-mode or HS-mode. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
