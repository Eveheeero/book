<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p74" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_74{left:110px;bottom:1129px;letter-spacing:-0.17px;}
#t2_74{left:418px;bottom:1129px;letter-spacing:-0.19px;word-spacing:1.45px;}
#t3_74{left:110px;bottom:1082px;letter-spacing:-0.16px;word-spacing:2.08px;}
#t4_74{left:110px;bottom:1062px;letter-spacing:-0.16px;word-spacing:1.39px;}
#t5_74{left:110px;bottom:1002px;letter-spacing:-0.15px;word-spacing:2.17px;}
#t6_74{left:110px;bottom:956px;letter-spacing:-0.17px;word-spacing:3.17px;}
#t7_74{left:110px;bottom:935px;letter-spacing:-0.16px;word-spacing:1.3px;}
#t8_74{left:110px;bottom:914px;letter-spacing:-0.23px;word-spacing:0.76px;}
#t9_74{left:211px;bottom:914px;}
#ta_74{left:222px;bottom:914px;letter-spacing:-0.17px;word-spacing:0.75px;}
#tb_74{left:361px;bottom:914px;letter-spacing:-0.17px;}
#tc_74{left:387px;bottom:914px;}
#td_74{left:393px;bottom:914px;letter-spacing:-0.18px;}
#te_74{left:424px;bottom:914px;letter-spacing:-0.18px;}
#tf_74{left:456px;bottom:914px;letter-spacing:-0.18px;}
#tg_74{left:517px;bottom:914px;}
#th_74{left:528px;bottom:914px;letter-spacing:-0.21px;word-spacing:1.27px;}
#ti_74{left:819px;bottom:914px;}
#tj_74{left:110px;bottom:894px;letter-spacing:-0.2px;word-spacing:1.5px;}
#tk_74{left:210px;bottom:894px;letter-spacing:-0.17px;}
#tl_74{left:236px;bottom:894px;}
#tm_74{left:242px;bottom:894px;letter-spacing:-0.17px;}
#tn_74{left:268px;bottom:894px;letter-spacing:-0.15px;word-spacing:1.39px;}
#to_74{left:471px;bottom:894px;letter-spacing:-0.18px;}
#tp_74{left:532px;bottom:894px;}
#tq_74{left:538px;bottom:894px;letter-spacing:-0.14px;word-spacing:1.39px;}
#tr_74{left:152px;bottom:849px;letter-spacing:0.08px;word-spacing:1.68px;}
#ts_74{left:110px;bottom:812px;letter-spacing:-0.18px;word-spacing:2.98px;}
#tt_74{left:110px;bottom:792px;letter-spacing:-0.13px;word-spacing:0.65px;}
#tu_74{left:110px;bottom:771px;letter-spacing:-0.08px;}
#tv_74{left:171px;bottom:771px;letter-spacing:-0.18px;word-spacing:2.66px;}
#tw_74{left:110px;bottom:750px;letter-spacing:-0.13px;word-spacing:1.32px;}
#tx_74{left:110px;bottom:691px;letter-spacing:-0.23px;word-spacing:2.33px;}
#ty_74{left:110px;bottom:644px;letter-spacing:-0.21px;word-spacing:1.64px;}
#tz_74{left:110px;bottom:624px;letter-spacing:-0.18px;word-spacing:1.58px;}
#t10_74{left:110px;bottom:603px;letter-spacing:-0.18px;word-spacing:2.81px;}
#t11_74{left:110px;bottom:582px;letter-spacing:-0.19px;word-spacing:1.99px;}
#t12_74{left:546px;bottom:582px;letter-spacing:-0.18px;}
#t13_74{left:572px;bottom:582px;}
#t14_74{left:581px;bottom:582px;letter-spacing:-0.18px;}
#t15_74{left:607px;bottom:582px;letter-spacing:-0.17px;word-spacing:1.96px;}
#t16_74{left:110px;bottom:562px;letter-spacing:-0.16px;}
#t17_74{left:155px;bottom:562px;letter-spacing:-0.17px;}
#t18_74{left:182px;bottom:562px;}
#t19_74{left:190px;bottom:562px;letter-spacing:-0.17px;}
#t1a_74{left:221px;bottom:562px;letter-spacing:-0.18px;word-spacing:1.3px;}
#t1b_74{left:110px;bottom:541px;letter-spacing:-0.15px;}
#t1c_74{left:110px;bottom:505px;letter-spacing:-0.17px;word-spacing:0.7px;}
#t1d_74{left:110px;bottom:484px;letter-spacing:-0.13px;word-spacing:1.89px;}
#t1e_74{left:110px;bottom:463px;letter-spacing:-0.13px;word-spacing:0.81px;}
#t1f_74{left:110px;bottom:443px;letter-spacing:-0.13px;word-spacing:1.37px;}
#t1g_74{left:110px;bottom:407px;letter-spacing:-0.19px;word-spacing:2.85px;}
#t1h_74{left:110px;bottom:386px;letter-spacing:-0.15px;word-spacing:1.39px;}
#t1i_74{left:152px;bottom:342px;letter-spacing:0.07px;word-spacing:2.21px;}
#t1j_74{left:152px;bottom:323px;letter-spacing:0.05px;word-spacing:1.74px;}
#t1k_74{left:110px;bottom:287px;letter-spacing:-0.17px;word-spacing:2.85px;}
#t1l_74{left:690px;bottom:287px;letter-spacing:-0.15px;word-spacing:2.73px;}
#t1m_74{left:110px;bottom:266px;letter-spacing:-0.19px;word-spacing:2.65px;}
#t1n_74{left:713px;bottom:266px;letter-spacing:-0.15px;word-spacing:2.57px;}
#t1o_74{left:110px;bottom:245px;letter-spacing:-0.15px;word-spacing:0.7px;}
#t1p_74{left:110px;bottom:225px;letter-spacing:-0.17px;word-spacing:3.56px;}
#t1q_74{left:632px;bottom:225px;letter-spacing:-0.22px;word-spacing:3.93px;}
#t1r_74{left:110px;bottom:204px;letter-spacing:-0.16px;word-spacing:1.41px;}
#t1s_74{left:110px;bottom:168px;letter-spacing:-0.17px;word-spacing:2.9px;}
#t1t_74{left:110px;bottom:147px;letter-spacing:-0.15px;word-spacing:2.12px;}
#t1u_74{left:110px;bottom:127px;letter-spacing:-0.16px;word-spacing:3.65px;}

.s1_74{font-size:17px;font-family:CMR10_1fw;color:#000;}
.s2_74{font-size:17px;font-family:CMSL10_1g7;color:#000;}
.s3_74{font-size:17px;font-family:CMBX10_1fg;color:#000;}
.s4_74{font-size:17px;font-family:CMMI10_1fq;color:#000;}
.s5_74{font-size:17px;font-family:CMTT10_1gl;color:#000;}
.s6_74{font-size:15px;font-family:CMTI10_1gf;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts74" type="text/css" >

@font-face {
	font-family: CMBX10_1fg;
	src: url("fonts/CMBX10_1fg.woff") format("woff");
}

@font-face {
	font-family: CMMI10_1fq;
	src: url("fonts/CMMI10_1fq.woff") format("woff");
}

@font-face {
	font-family: CMR10_1fw;
	src: url("fonts/CMR10_1fw.woff") format("woff");
}

@font-face {
	font-family: CMSL10_1g7;
	src: url("fonts/CMSL10_1g7.woff") format("woff");
}

@font-face {
	font-family: CMTI10_1gf;
	src: url("fonts/CMTI10_1gf.woff") format("woff");
}

@font-face {
	font-family: CMTT10_1gl;
	src: url("fonts/CMTT10_1gl.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg74Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg74" style="-webkit-user-select: none;"><object width="935" height="1210" data="74/74.svg" type="image/svg+xml" id="pdf74" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_74" class="t s1_74">60 </span><span id="t2_74" class="t s2_74">Volume II: RISC-V Privileged Architectures V20211203 </span>
<span id="t3_74" class="t s1_74">If the current XLEN is greater than MXLEN, the PMP address registers are zero-extended from </span>
<span id="t4_74" class="t s1_74">MXLEN to XLEN bits for the purposes of address matching. </span>
<span id="t5_74" class="t s3_74">Locking and Privilege Mode </span>
<span id="t6_74" class="t s1_74" data-mappings='[[73,"fi"]]'>The L bit indicates that the PMP entry is locked, i.e., writes to the conﬁguration register and </span>
<span id="t7_74" class="t s1_74">associated address registers are ignored. Locked PMP entries remain locked until the hart is reset. </span>
<span id="t8_74" class="t s1_74">If PMP entry </span><span id="t9_74" class="t s4_74">i </span><span id="ta_74" class="t s1_74">is locked, writes to </span><span id="tb_74" class="t s5_74">pmp</span><span id="tc_74" class="t s4_74">i</span><span id="td_74" class="t s5_74">cfg </span><span id="te_74" class="t s1_74">and </span><span id="tf_74" class="t s5_74">pmpaddr</span><span id="tg_74" class="t s4_74">i </span><span id="th_74" class="t s1_74">are ignored. Additionally, if PMP entry </span><span id="ti_74" class="t s4_74">i </span>
<span id="tj_74" class="t s1_74">is locked and </span><span id="tk_74" class="t s5_74">pmp</span><span id="tl_74" class="t s4_74">i</span><span id="tm_74" class="t s5_74">cfg</span><span id="tn_74" class="t s1_74">.A is set to TOR, writes to </span><span id="to_74" class="t s5_74">pmpaddr</span><span id="tp_74" class="t s4_74">i</span><span id="tq_74" class="t s1_74">-1 are ignored. </span>
<span id="tr_74" class="t s6_74" data-mappings='[[54,"fi"]]'>Setting the L bit locks the PMP entry even when the A ﬁeld is set to OFF. </span>
<span id="ts_74" class="t s1_74">In addition to locking the PMP entry, the L bit indicates whether the R/W/X permissions are </span>
<span id="tt_74" class="t s1_74">enforced on M-mode accesses. When the L bit is set, these permissions are enforced for all privilege </span>
<span id="tu_74" class="t s1_74">modes. </span><span id="tv_74" class="t s1_74">When the L bit is clear, any M-mode access matching the PMP entry will succeed; the </span>
<span id="tw_74" class="t s1_74">R/W/X permissions apply only to S and U modes. </span>
<span id="tx_74" class="t s3_74">Priority and Matching Logic </span>
<span id="ty_74" class="t s1_74">PMP entries are statically prioritized. The lowest-numbered PMP entry that matches any byte of </span>
<span id="tz_74" class="t s1_74">an access determines whether that access succeeds or fails. The matching PMP entry must match </span>
<span id="t10_74" class="t s1_74">all bytes of an access, or the access fails, irrespective of the L, R, W, and X bits. For example, </span>
<span id="t11_74" class="t s1_74" data-mappings='[[21,"fi"]]'>if a PMP entry is conﬁgured to match the four-byte range </span><span id="t12_74" class="t s5_74">0xC</span><span id="t13_74" class="t s1_74">–</span><span id="t14_74" class="t s5_74">0xF</span><span id="t15_74" class="t s1_74">, then an 8-byte access to the </span>
<span id="t16_74" class="t s1_74">range </span><span id="t17_74" class="t s5_74">0x8</span><span id="t18_74" class="t s1_74">–</span><span id="t19_74" class="t s5_74">0xF </span><span id="t1a_74" class="t s1_74">will fail, assuming that PMP entry is the highest-priority entry that matches those </span>
<span id="t1b_74" class="t s1_74">addresses. </span>
<span id="t1c_74" class="t s1_74">If a PMP entry matches all bytes of an access, then the L, R, W, and X bits determine whether the </span>
<span id="t1d_74" class="t s1_74">access succeeds or fails. If the L bit is clear and the privilege mode of the access is M, the access </span>
<span id="t1e_74" class="t s1_74">succeeds. Otherwise, if the L bit is set or the privilege mode of the access is S or U, then the access </span>
<span id="t1f_74" class="t s1_74">succeeds only if the R, W, or X bit corresponding to the access type is set. </span>
<span id="t1g_74" class="t s1_74">If no PMP entry matches an M-mode access, the access succeeds. If no PMP entry matches an </span>
<span id="t1h_74" class="t s1_74">S-mode or U-mode access, but at least one PMP entry is implemented, the access fails. </span>
<span id="t1i_74" class="t s6_74" data-mappings='[[65,"fi"]]'>If at least one PMP entry is implemented, but all PMP entries’ A ﬁelds are set to OFF, then </span>
<span id="t1j_74" class="t s6_74">all S-mode and U-mode memory accesses will fail. </span>
<span id="t1k_74" class="t s1_74">Failed accesses generate an instruction, load, or store access-fault exception. </span><span id="t1l_74" class="t s1_74">Note that a single </span>
<span id="t1m_74" class="t s1_74">instruction may generate multiple accesses, which may not be mutually atomic. </span><span id="t1n_74" class="t s1_74">An access-fault </span>
<span id="t1o_74" class="t s1_74">exception is generated if at least one access generated by an instruction fails, though other accesses </span>
<span id="t1p_74" class="t s1_74" data-mappings='[[61,"ff"]]'>generated by that instruction may succeed with visible side eﬀects. </span><span id="t1q_74" class="t s1_74">Notably, instructions that </span>
<span id="t1r_74" class="t s1_74">reference virtual memory are decomposed into multiple accesses. </span>
<span id="t1s_74" class="t s1_74">On some implementations, misaligned loads, stores, and instruction fetches may also be decom- </span>
<span id="t1t_74" class="t s1_74">posed into multiple accesses, some of which may succeed before an access-fault exception occurs. </span>
<span id="t1u_74" class="t s1_74">In particular, a portion of a misaligned store that passes the PMP check may become visible, </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
