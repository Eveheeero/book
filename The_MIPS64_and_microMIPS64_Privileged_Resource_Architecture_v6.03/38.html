<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p38" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_38{left:86px;bottom:1140px;letter-spacing:-0.14px;word-spacing:-0.05px;}
#t2_38{left:83px;bottom:81px;letter-spacing:-0.15px;}
#t3_38{left:110px;bottom:81px;letter-spacing:-0.13px;word-spacing:0.01px;}
#t4_38{left:83px;bottom:1076px;letter-spacing:0.17px;}
#t5_38{left:123px;bottom:1076px;letter-spacing:0.18px;word-spacing:0.03px;}
#t6_38{left:663px;bottom:1073px;letter-spacing:0.1px;}
#t7_38{left:696px;bottom:1076px;letter-spacing:0.17px;word-spacing:0.02px;}
#t8_38{left:138px;bottom:1030px;letter-spacing:0.07px;word-spacing:0.04px;}
#t9_38{left:137px;bottom:1012px;letter-spacing:0.16px;word-spacing:-1.56px;}
#ta_38{left:329px;bottom:1012px;letter-spacing:0.1px;}
#tb_38{left:380px;bottom:1012px;letter-spacing:0.16px;word-spacing:0.01px;}
#tc_38{left:572px;bottom:1012px;letter-spacing:0.11px;word-spacing:-0.03px;}
#td_38{left:137px;bottom:994px;letter-spacing:0.11px;word-spacing:-0.01px;}
#te_38{left:137px;bottom:957px;}
#tf_38{left:165px;bottom:957px;letter-spacing:0.11px;word-spacing:-0.71px;}
#tg_38{left:746px;bottom:957px;letter-spacing:0.15px;word-spacing:-1.65px;}
#th_38{left:165px;bottom:938px;letter-spacing:0.15px;word-spacing:0.01px;}
#ti_38{left:251px;bottom:938px;letter-spacing:0.13px;}
#tj_38{left:277px;bottom:938px;letter-spacing:0.16px;word-spacing:0.01px;}
#tk_38{left:473px;bottom:938px;letter-spacing:0.11px;word-spacing:-0.01px;}
#tl_38{left:137px;bottom:902px;}
#tm_38{left:165px;bottom:902px;letter-spacing:0.08px;word-spacing:0.01px;}
#tn_38{left:137px;bottom:865px;letter-spacing:0.1px;word-spacing:-0.06px;}
#to_38{left:137px;bottom:847px;letter-spacing:0.13px;}
#tp_38{left:83px;bottom:757px;letter-spacing:0.18px;}
#tq_38{left:135px;bottom:757px;letter-spacing:0.15px;word-spacing:0.05px;}
#tr_38{left:773px;bottom:754px;}
#ts_38{left:803px;bottom:757px;letter-spacing:0.26px;word-spacing:-0.1px;}
#tt_38{left:138px;bottom:712px;letter-spacing:0.08px;}
#tu_38{left:568px;bottom:709px;letter-spacing:0.14px;}
#tv_38{left:584px;bottom:712px;letter-spacing:0.11px;word-spacing:-0.03px;}
#tw_38{left:138px;bottom:690px;letter-spacing:0.07px;word-spacing:0.02px;}
#tx_38{left:437px;bottom:688px;letter-spacing:0.14px;}
#ty_38{left:453px;bottom:690px;letter-spacing:0.11px;word-spacing:-0.01px;}
#tz_38{left:137px;bottom:669px;letter-spacing:0.1px;}
#t10_38{left:137px;bottom:651px;letter-spacing:0.11px;word-spacing:-0.01px;}
#t11_38{left:137px;bottom:633px;letter-spacing:0.12px;word-spacing:-0.08px;}
#t12_38{left:165px;bottom:601px;letter-spacing:-0.15px;}
#t13_38{left:193px;bottom:601px;letter-spacing:-0.16px;word-spacing:0.01px;}
#t14_38{left:165px;bottom:584px;letter-spacing:-0.15px;}
#t15_38{left:193px;bottom:584px;letter-spacing:-0.17px;word-spacing:0.02px;}
#t16_38{left:138px;bottom:547px;letter-spacing:0.11px;word-spacing:-0.02px;}
#t17_38{left:138px;bottom:397px;letter-spacing:0.1px;}
#t18_38{left:138px;bottom:379px;letter-spacing:0.1px;}
#t19_38{left:138px;bottom:361px;letter-spacing:0.11px;word-spacing:-0.02px;}
#t1a_38{left:138px;bottom:324px;letter-spacing:0.11px;word-spacing:-0.02px;}
#t1b_38{left:137px;bottom:306px;letter-spacing:0.11px;word-spacing:-0.44px;}
#t1c_38{left:484px;bottom:306px;letter-spacing:0.09px;}
#t1d_38{left:506px;bottom:306px;letter-spacing:0.11px;word-spacing:-0.43px;}
#t1e_38{left:138px;bottom:287px;letter-spacing:0.11px;}
#t1f_38{left:402px;bottom:288px;letter-spacing:-0.25px;}
#t1g_38{left:444px;bottom:287px;letter-spacing:-0.02px;}
#t1h_38{left:138px;bottom:251px;letter-spacing:0.1px;}
#t1i_38{left:138px;bottom:232px;letter-spacing:0.11px;word-spacing:-0.01px;}
#t1j_38{left:138px;bottom:214px;letter-spacing:0.11px;word-spacing:-0.01px;}
#t1k_38{left:138px;bottom:196px;letter-spacing:0.1px;word-spacing:0.03px;}
#t1l_38{left:138px;bottom:159px;letter-spacing:0.11px;word-spacing:-0.05px;}
#t1m_38{left:138px;bottom:141px;letter-spacing:0.11px;word-spacing:-0.01px;}
#t1n_38{left:138px;bottom:122px;letter-spacing:0.11px;word-spacing:-0.39px;}
#t1o_38{left:304px;bottom:509px;letter-spacing:-0.13px;word-spacing:-0.05px;}
#t1p_38{left:524px;bottom:509px;letter-spacing:-0.13px;word-spacing:0.05px;}
#t1q_38{left:317px;bottom:483px;letter-spacing:-0.16px;word-spacing:0.01px;}
#t1r_38{left:496px;bottom:483px;letter-spacing:-0.16px;word-spacing:-0.02px;}
#t1s_38{left:309px;bottom:460px;letter-spacing:-0.16px;word-spacing:0.01px;}
#t1t_38{left:488px;bottom:460px;letter-spacing:-0.16px;word-spacing:-0.02px;}
#t1u_38{left:317px;bottom:437px;letter-spacing:-0.16px;word-spacing:0.01px;}
#t1v_38{left:496px;bottom:437px;letter-spacing:-0.16px;word-spacing:-0.02px;}

.s1_38{font-size:14px;font-family:sub_Arial-BoldMT_lsb;color:#000;}
.s2_38{font-size:14px;font-family:sub_ArialMT_lsr;color:#000;}
.s3_38{font-size:21px;font-family:sub_Arial-BoldMT_lsb;color:#000;}
.s4_38{font-size:17px;font-family:sub_Arial-BoldMT_lsb;color:#000;}
.s5_38{font-size:15px;font-family:sub_TimesNewRomanPSMT_lfr;color:#000;}
.s6_38{font-size:15px;font-family:Courier_pe;color:#000;}
.s7_38{font-size:12px;font-family:sub_TimesNewRomanPSMT_lfr;color:#000;}
.s8_38{font-size:14px;font-family:Courier_pe;color:#000;}
.s9_38{font-size:15px;font-family:sub_TimesNewRomanPS-ItalicM_lfi;color:#000;}
.sa_38{font-size:14px;font-family:sub_Arial-ItalicMT_lsi;color:#030;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts38" type="text/css" >

@font-face {
	font-family: Courier_pe;
	src: url("fonts/Courier_pe.woff") format("woff");
}

@font-face {
	font-family: sub_Arial-BoldMT_lsb;
	src: url("fonts/sub_Arial-BoldMT_lsb.woff") format("woff");
}

@font-face {
	font-family: sub_Arial-ItalicMT_lsi;
	src: url("fonts/sub_Arial-ItalicMT_lsi.woff") format("woff");
}

@font-face {
	font-family: sub_ArialMT_lsr;
	src: url("fonts/sub_ArialMT_lsr.woff") format("woff");
}

@font-face {
	font-family: sub_TimesNewRomanPS-ItalicM_lfi;
	src: url("fonts/sub_TimesNewRomanPS-ItalicM_lfi.woff") format("woff");
}

@font-face {
	font-family: sub_TimesNewRomanPSMT_lfr;
	src: url("fonts/sub_TimesNewRomanPSMT_lfr.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg38Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg38" style="-webkit-user-select: none;"><object width="935" height="1210" data="38/38.svg" type="image/svg+xml" id="pdf38" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_38" class="t s1_38">Virtual Memory </span>
<span id="t2_38" class="t s2_38">38 </span><span id="t3_38" class="t s2_38">MIPS® Architecture For Programmers Volume III: MIPS64® / microMIPS64™ Privileged Resource Architecture, Rev. 6.03 </span>
<span id="t4_38" class="t s3_38">4.9 </span><span id="t5_38" class="t s3_38">Special Behavior for the kseg3 Segment when Debug </span>
<span id="t6_38" class="t s4_38">DM </span>
<span id="t7_38" class="t s3_38">= 1 </span>
<span id="t8_38" class="t s5_38">If EJTAG is implemented on the processor, the EJTAG block must treat the virtual address range </span>
<span id="t9_38" class="t s6_38">0xFFFF FFFF FF20 0000 </span><span id="ta_38" class="t s5_38">through </span><span id="tb_38" class="t s6_38">0xFFFF FFFF FF3F FFFF </span><span id="tc_38" class="t s5_38">, inclusive, as a special memory-mapped </span>
<span id="td_38" class="t s5_38">region in Debug Mode. A MIPS64/microMIPS64 compliant implementation that also implements EJTAG must: </span>
<span id="te_38" class="t s5_38">• </span><span id="tf_38" class="t s5_38">explicitly range-check the address range as given, and not assume that the entire region between </span><span id="tg_38" class="t s6_38">0xFFFF FFFF </span>
<span id="th_38" class="t s6_38">FF20 0000 </span><span id="ti_38" class="t s5_38">and </span><span id="tj_38" class="t s6_38">0xFFFF FFFF FFFF FFFF </span><span id="tk_38" class="t s5_38">is included in the special memory-mapped region. </span>
<span id="tl_38" class="t s5_38">• </span><span id="tm_38" class="t s5_38">enable the special EJTAG mapping for this region only in EJTAG Debug mode. </span>
<span id="tn_38" class="t s5_38">Even in Debug mode, normal memory rules can apply in some cases. See the EJTAG specification for details on this </span>
<span id="to_38" class="t s5_38">mapping. </span>
<span id="tp_38" class="t s3_38">4.10 </span><span id="tq_38" class="t s3_38">Special Behavior for Data References in User Mode with Status </span>
<span id="tr_38" class="t s4_38">UX </span>
<span id="ts_38" class="t s3_38">= 0 </span>
<span id="tt_38" class="t s5_38">When the processor is running in User Mode, legal addresses have VA </span>
<span id="tu_38" class="t s7_38">31 </span>
<span id="tv_38" class="t s5_38">equal zero, and the 32-bit virtual address is </span>
<span id="tw_38" class="t s5_38">sign-extended (really zero-extended, because VA </span>
<span id="tx_38" class="t s7_38">31 </span>
<span id="ty_38" class="t s5_38">is zero) into a full 64-bit address. This does not mean the normal </span>
<span id="tz_38" class="t s5_38">address bounds checks on the sign-extended 64-bit address are sufficient. Unfortunately, there are cases in which a </span>
<span id="t10_38" class="t s5_38">program running on a 32-bit processor can generate a data address that is legal in 32 bits, but which is not appropri- </span>
<span id="t11_38" class="t s5_38">ately sign-extended into 64-bits. For example: </span>
<span id="t12_38" class="t s8_38">la </span><span id="t13_38" class="t s8_38">r10, 0x80000000 </span>
<span id="t14_38" class="t s8_38">lw </span><span id="t15_38" class="t s8_38">r10, -4(r10) </span>
<span id="t16_38" class="t s5_38">The results of executing this address calculation on 32-bit and 64-bit processors with UX = 0 is shown below: </span>
<span id="t17_38" class="t s5_38">On a 32-bit processor, the result of this address calculation results in a valid useg address. However, on a 64-bit pro- </span>
<span id="t18_38" class="t s5_38">cessor the sign-extended address in the base register is added to the sign-extended displacement as a 64-bit quantity. </span>
<span id="t19_38" class="t s5_38">This results in a carry-out of bit 31, producing an address that is not properly sign-extended. </span>
<span id="t1a_38" class="t s5_38">To provide backward compatibility with 32-bit User Mode code, MIPS64 compliant processors must implement the </span>
<span id="t1b_38" class="t s5_38">following special case for data references (and explicitly </span><span id="t1c_38" class="t s9_38">not </span><span id="t1d_38" class="t s5_38">for instruction references) when the processor is running </span>
<span id="t1e_38" class="t s5_38">in User Mode and the UX bit is zero in the </span><span id="t1f_38" class="t sa_38">Status </span><span id="t1g_38" class="t s5_38">register. </span>
<span id="t1h_38" class="t s5_38">The effective address calculated by a load, store, or prefetch instruction must be sign-extended from bit 31 into bits </span>
<span id="t1i_38" class="t s5_38">63..32 of the full 64-bit address, ignoring the previous contents of bits 63..32 of the address, before the final address </span>
<span id="t1j_38" class="t s5_38">is checked for address error exceptions or used to access the TLB or cache. This special-case is not done for instruc- </span>
<span id="t1k_38" class="t s5_38">tion references. </span>
<span id="t1l_38" class="t s5_38">This results in a properly zero-extended address for all legal data addresses. In the example given above, it cleans up </span>
<span id="t1m_38" class="t s5_38">the address. This results in a properly sign-extended address for all illegal data addresses (those in which bit 31 is a </span>
<span id="t1n_38" class="t s5_38">one). Code running in Debug Mode, Kernel Mode, or Supervisor Mode with the appropriate 64-bit address enable off </span>
<span id="t1o_38" class="t s1_38">32-bit Processor </span><span id="t1p_38" class="t s1_38">64-bit Processor </span>
<span id="t1q_38" class="t s8_38">0x8000 0000 </span><span id="t1r_38" class="t s8_38">0xFFFF FFFF 8000 0000 </span>
<span id="t1s_38" class="t s8_38">+0xFFFF FFFC </span><span id="t1t_38" class="t s8_38">+0xFFFF FFFF FFFF FFFC </span>
<span id="t1u_38" class="t s8_38">0x7FFF FFFC </span><span id="t1v_38" class="t s8_38">0xFFFF FFFF 7FFF FFFC </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
