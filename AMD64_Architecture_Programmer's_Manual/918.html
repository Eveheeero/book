<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p918" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_918{left:96px;bottom:48px;letter-spacing:-0.15px;}
#t2_918{left:500px;bottom:48px;letter-spacing:-0.11px;word-spacing:0.01px;}
#t3_918{left:96px;bottom:1116px;letter-spacing:-0.17px;word-spacing:0.06px;}
#t4_918{left:601px;bottom:1116px;letter-spacing:-0.17px;word-spacing:2.71px;}
#t5_918{left:96px;bottom:1038px;}
#t6_918{left:124px;bottom:1038px;letter-spacing:0.15px;word-spacing:-0.47px;}
#t7_918{left:96px;bottom:1011px;}
#t8_918{left:124px;bottom:1011px;letter-spacing:0.16px;word-spacing:-0.98px;}
#t9_918{left:124px;bottom:989px;letter-spacing:0.09px;word-spacing:-0.41px;}
#ta_918{left:96px;bottom:962px;}
#tb_918{left:124px;bottom:962px;letter-spacing:0.18px;word-spacing:-0.5px;}
#tc_918{left:96px;bottom:934px;}
#td_918{left:124px;bottom:934px;letter-spacing:0.17px;word-spacing:-0.49px;}
#te_918{left:176px;bottom:895px;letter-spacing:-0.12px;word-spacing:1.08px;}
#tf_918{left:248px;bottom:895px;}
#tg_918{left:254px;bottom:895px;letter-spacing:0.14px;}
#th_918{left:298px;bottom:895px;letter-spacing:-0.03px;}
#ti_918{left:365px;bottom:893px;}
#tj_918{left:389px;bottom:895px;letter-spacing:0.15px;}
#tk_918{left:106px;bottom:866px;letter-spacing:0.13px;}
#tl_918{left:169px;bottom:866px;letter-spacing:0.12px;}
#tm_918{left:258px;bottom:866px;letter-spacing:0.11px;}
#tn_918{left:525px;bottom:866px;letter-spacing:0.12px;}
#to_918{left:799px;bottom:866px;letter-spacing:0.15px;}
#tp_918{left:112px;bottom:785px;letter-spacing:0.11px;}
#tq_918{left:258px;bottom:785px;letter-spacing:0.11px;}
#tr_918{left:344px;bottom:842px;letter-spacing:0.1px;word-spacing:0.04px;}
#ts_918{left:344px;bottom:823px;letter-spacing:0.11px;word-spacing:-0.7px;}
#tt_918{left:403px;bottom:823px;}
#tu_918{left:408px;bottom:823px;letter-spacing:0.09px;word-spacing:-0.69px;}
#tv_918{left:344px;bottom:805px;letter-spacing:0.11px;word-spacing:0.04px;}
#tw_918{left:344px;bottom:784px;letter-spacing:0.09px;word-spacing:0.01px;}
#tx_918{left:344px;bottom:765px;letter-spacing:0.09px;word-spacing:0.03px;}
#ty_918{left:344px;bottom:747px;letter-spacing:0.09px;}
#tz_918{left:344px;bottom:729px;letter-spacing:0.11px;}
#t10_918{left:803px;bottom:785px;letter-spacing:0.09px;}
#t11_918{left:112px;bottom:677px;letter-spacing:0.11px;}
#t12_918{left:168px;bottom:677px;letter-spacing:0.12px;}
#t13_918{left:241px;bottom:677px;letter-spacing:0.09px;}
#t14_918{left:344px;bottom:704px;letter-spacing:0.08px;word-spacing:0.02px;}
#t15_918{left:344px;bottom:686px;letter-spacing:0.1px;word-spacing:0.02px;}
#t16_918{left:344px;bottom:667px;letter-spacing:0.1px;word-spacing:-0.01px;}
#t17_918{left:344px;bottom:649px;letter-spacing:0.12px;word-spacing:-0.05px;}
#t18_918{left:805px;bottom:677px;letter-spacing:0.14px;}
#t19_918{left:120px;bottom:597px;}
#t1a_918{left:172px;bottom:597px;letter-spacing:0.09px;}
#t1b_918{left:249px;bottom:597px;letter-spacing:0.15px;}
#t1c_918{left:344px;bottom:625px;letter-spacing:0.1px;word-spacing:-0.43px;}
#t1d_918{left:344px;bottom:606px;letter-spacing:0.11px;word-spacing:-0.01px;}
#t1e_918{left:344px;bottom:588px;letter-spacing:0.11px;word-spacing:-0.03px;}
#t1f_918{left:344px;bottom:570px;letter-spacing:0.11px;word-spacing:-0.03px;}
#t1g_918{left:805px;bottom:597px;letter-spacing:0.14px;}
#t1h_918{left:108px;bottom:489px;letter-spacing:0.14px;}
#t1i_918{left:240px;bottom:489px;letter-spacing:0.08px;}
#t1j_918{left:344px;bottom:545px;letter-spacing:0.09px;word-spacing:-0.07px;}
#t1k_918{left:344px;bottom:527px;letter-spacing:0.12px;word-spacing:-0.04px;}
#t1l_918{left:344px;bottom:509px;letter-spacing:0.1px;word-spacing:-0.01px;}
#t1m_918{left:344px;bottom:490px;letter-spacing:0.1px;word-spacing:-0.01px;}
#t1n_918{left:344px;bottom:472px;letter-spacing:0.1px;word-spacing:0.04px;}
#t1o_918{left:344px;bottom:450px;letter-spacing:0.09px;word-spacing:0.01px;}
#t1p_918{left:344px;bottom:432px;letter-spacing:0.05px;word-spacing:0.07px;}
#t1q_918{left:805px;bottom:489px;letter-spacing:0.14px;}
#t1r_918{left:105px;bottom:362px;letter-spacing:0.13px;}
#t1s_918{left:220px;bottom:362px;letter-spacing:0.09px;}
#t1t_918{left:344px;bottom:408px;letter-spacing:0.08px;word-spacing:0.01px;}
#t1u_918{left:344px;bottom:389px;letter-spacing:0.1px;word-spacing:-0.02px;}
#t1v_918{left:344px;bottom:371px;letter-spacing:0.05px;word-spacing:0.05px;}
#t1w_918{left:344px;bottom:353px;letter-spacing:0.07px;word-spacing:0.04px;}
#t1x_918{left:344px;bottom:334px;letter-spacing:0.09px;word-spacing:-0.05px;}
#t1y_918{left:344px;bottom:316px;letter-spacing:0.06px;word-spacing:0.07px;}
#t1z_918{left:799px;bottom:362px;letter-spacing:-0.42px;}
#t20_918{left:105px;bottom:292px;letter-spacing:0.13px;}
#t21_918{left:344px;bottom:292px;letter-spacing:0.13px;}
#t22_918{left:105px;bottom:221px;letter-spacing:0.13px;}
#t23_918{left:232px;bottom:221px;letter-spacing:0.13px;}
#t24_918{left:344px;bottom:267px;letter-spacing:0.09px;word-spacing:-0.04px;}
#t25_918{left:344px;bottom:249px;letter-spacing:0.08px;word-spacing:0.05px;}
#t26_918{left:344px;bottom:230px;letter-spacing:0.1px;word-spacing:0.02px;}
#t27_918{left:344px;bottom:212px;letter-spacing:0.03px;word-spacing:0.09px;}
#t28_918{left:344px;bottom:194px;letter-spacing:0.1px;word-spacing:-0.03px;}
#t29_918{left:344px;bottom:175px;letter-spacing:0.09px;word-spacing:0.02px;}
#t2a_918{left:799px;bottom:221px;letter-spacing:-0.42px;}
#t2b_918{left:396px;bottom:12px;letter-spacing:0.16px;}

.s1_918{font-size:17px;font-family:Arial-BoldItalic_623;color:#000;}
.s2_918{font-size:17px;font-family:Arial-Italic_62c;color:#000;}
.s3_918{font-size:18px;font-family:TimesNewRoman-Bold_61v;color:#000;}
.s4_918{font-size:18px;font-family:TimesNewRoman_61y;color:#000;}
.s5_918{font-size:18px;font-family:Arial-Bold_61q;color:#000;}
.s6_918{font-size:18px;font-family:Arial-Bold_62f;color:#000;}
.s7_918{font-size:21px;font-family:Arial-Bold_61q;color:#000;}
.s8_918{font-size:15px;font-family:TimesNewRoman-Bold_61v;color:#000;}
.s9_918{font-size:15px;font-family:TimesNewRoman_61y;color:#000;}
.sa_918{font-size:15px;font-family:TimesNewRoman_627;color:#000;}
.sb_918{font-size:18px;font-family:Arial_62w;color:#00AB00;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts918" type="text/css" >

@font-face {
	font-family: Arial-BoldItalic_623;
	src: url("fonts/Arial-BoldItalic_623.woff") format("woff");
}

@font-face {
	font-family: Arial-Bold_61q;
	src: url("fonts/Arial-Bold_61q.woff") format("woff");
}

@font-face {
	font-family: Arial-Bold_62f;
	src: url("fonts/Arial-Bold_62f.woff") format("woff");
}

@font-face {
	font-family: Arial-Italic_62c;
	src: url("fonts/Arial-Italic_62c.woff") format("woff");
}

@font-face {
	font-family: Arial_62w;
	src: url("fonts/Arial_62w.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman-Bold_61v;
	src: url("fonts/TimesNewRoman-Bold_61v.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_61y;
	src: url("fonts/TimesNewRoman_61y.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_627;
	src: url("fonts/TimesNewRoman_627.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg918Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg918" style="-webkit-user-select: none;"><object width="935" height="1210" data="918/918.svg" type="image/svg+xml" id="pdf918" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_918" class="t s1_918">463 </span><span id="t2_918" class="t s2_918">Software Debug and Performance Resources </span>
<span id="t3_918" class="t s1_918">AMD64 Technology </span><span id="t4_918" class="t s1_918">24593—Rev. 3.41—June 2023 </span>
<span id="t5_918" class="t s3_918">• </span><span id="t6_918" class="t s4_918">LWP—hardware modifies the field; software may read it, but must not change it </span>
<span id="t7_918" class="t s3_918">• </span><span id="t8_918" class="t s4_918">Init—hardware reads and modifies the field while executing LLWPCB; the field must then remain </span>
<span id="t9_918" class="t s4_918">unchanged as long as the LWPCB is in use </span>
<span id="ta_918" class="t s3_918">• </span><span id="tb_918" class="t s4_918">SW—software may modify the field; hardware may read it, but does not change it </span>
<span id="tc_918" class="t s3_918">• </span><span id="td_918" class="t s4_918">No—field must remain unchanged as long as the LWPCB is in use </span>
<span id="te_918" class="t s5_918">Table 13</span><span id="tf_918" class="t s6_918">-</span><span id="tg_918" class="t s5_918">10. </span><span id="th_918" class="t s5_918">LWPCB </span><span id="ti_918" class="t s7_918">— </span><span id="tj_918" class="t s5_918">Lightweight Profiling Control Block Fields </span>
<span id="tk_918" class="t s8_918">Bytes </span><span id="tl_918" class="t s8_918">Bits </span><span id="tm_918" class="t s8_918">Field </span><span id="tn_918" class="t s8_918">Description </span><span id="to_918" class="t s8_918">R/W </span>
<span id="tp_918" class="t s9_918">3–0 </span><span id="tq_918" class="t s9_918">Flags </span>
<span id="tr_918" class="t s9_918">Flags indicating which events should be or are being counted (see </span>
<span id="ts_918" class="t s9_918">Figure 13</span><span id="tt_918" class="t sa_918">-</span><span id="tu_918" class="t s9_918">39, “LWPCB Flags”) and whether threshold interrupts should </span>
<span id="tv_918" class="t s9_918">be enabled. </span>
<span id="tw_918" class="t s9_918">Before executing LLWPCB, the application sets Flags to a bit mask of </span>
<span id="tx_918" class="t s9_918">the events (and interrupt) that should be enabled. LLWPCB does a </span>
<span id="ty_918" class="t s9_918">logical “and” of this mask with the available feature bits in LWP_CFG </span>
<span id="tz_918" class="t s9_918">and rewrites Flags with the mask of features actually enabled. </span>
<span id="t10_918" class="t s9_918">Init </span>
<span id="t11_918" class="t s9_918">7–4 </span><span id="t12_918" class="t s9_918">27:0 </span><span id="t13_918" class="t s9_918">BufferSize </span>
<span id="t14_918" class="t s9_918">Total size of the event ring buffer (in bytes). Must be a multiple of the </span>
<span id="t15_918" class="t s9_918">event record size LwpEventSize (the value used internally will be </span>
<span id="t16_918" class="t s9_918">rounded down if not). BufferSize must be at least (32 * </span>
<span id="t17_918" class="t s9_918">LwpMinBufferSize * LwpEventSize). </span>
<span id="t18_918" class="t s9_918">No </span>
<span id="t19_918" class="t s9_918">7 </span><span id="t1a_918" class="t s9_918">7:4 </span><span id="t1b_918" class="t s9_918">Random </span>
<span id="t1c_918" class="t s9_918">Number of bits of randomness to use in counters. Each time a counter is </span>
<span id="t1d_918" class="t s9_918">loaded from an interval to start counting down to the next event to </span>
<span id="t1e_918" class="t s9_918">record, the bottom Random bits are set to a random value. This avoids </span>
<span id="t1f_918" class="t s9_918">fixed patterns in events. </span>
<span id="t1g_918" class="t s9_918">No </span>
<span id="t1h_918" class="t s9_918">15–8 </span><span id="t1i_918" class="t s9_918">BufferBase </span>
<span id="t1j_918" class="t s9_918">The Effective Address of the event ring buffer. Should be aligned on a </span>
<span id="t1k_918" class="t s9_918">64-byte boundary for reasonable performance. Software is encouraged </span>
<span id="t1l_918" class="t s9_918">to align the ring buffer to a page boundary for best performance. If the </span>
<span id="t1m_918" class="t s9_918">default address size is less than 64 bits, the upper bits of BufferBase </span>
<span id="t1n_918" class="t s9_918">must be zero. </span>
<span id="t1o_918" class="t s9_918">LLWPCB converts BufferBase to a linear address and stores it </span>
<span id="t1p_918" class="t s9_918">internally. LWPCB.BufferBase is not modified. </span>
<span id="t1q_918" class="t s9_918">No </span>
<span id="t1r_918" class="t s9_918">19–16 </span><span id="t1s_918" class="t s9_918">BufferHeadOffset </span>
<span id="t1t_918" class="t s9_918">Unsigned offset from BufferBase specifying where the LWP hardware </span>
<span id="t1u_918" class="t s9_918">will store the next event record. When BufferHeadOffset == </span>
<span id="t1v_918" class="t s9_918">BufferTailOffset, the ring buffer is empty. BufferHeadOffset must </span>
<span id="t1w_918" class="t s9_918">always be less than BufferSize; LWP will use a value of 0 if </span>
<span id="t1x_918" class="t s9_918">BufferHeadOffset is too large. Also, it must always be a multiple of </span>
<span id="t1y_918" class="t s9_918">LwpEventSize; LWP will round it down if not. </span>
<span id="t1z_918" class="t s9_918">LWP </span>
<span id="t20_918" class="t s9_918">23–20 </span><span id="t21_918" class="t s9_918">Reserved </span>
<span id="t22_918" class="t s9_918">31–24 </span><span id="t23_918" class="t s9_918">MissedEvents </span>
<span id="t24_918" class="t s9_918">The 64-bit count of the number of events that were missed. A missed </span>
<span id="t25_918" class="t s9_918">event occurs when LWP stores an event record, attempts to advance </span>
<span id="t26_918" class="t s9_918">BufferHeadOffset, and discovers that it would be equal to </span>
<span id="t27_918" class="t s9_918">BufferTailOffset. In this case, LWP leaves BufferHeadOffset </span>
<span id="t28_918" class="t s9_918">unchanged and instead increments the MissedEvents counter. Thus, </span>
<span id="t29_918" class="t s9_918">when the ring buffer is full, the last event record is overwritten. </span>
<span id="t2a_918" class="t s9_918">LWP </span>
<span id="t2b_918" class="t sb_918">[AMD Public Use] </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
