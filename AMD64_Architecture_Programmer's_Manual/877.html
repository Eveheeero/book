<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p877" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_877{left:96px;bottom:47px;letter-spacing:-0.11px;word-spacing:0.01px;}
#t2_877{left:808px;bottom:47px;letter-spacing:0.17px;}
#t3_877{left:96px;bottom:1116px;letter-spacing:-0.17px;word-spacing:2.66px;}
#t4_877{left:684px;bottom:1116px;letter-spacing:-0.17px;word-spacing:0.06px;}
#t5_877{left:96px;bottom:1035px;letter-spacing:0.14px;}
#t6_877{left:168px;bottom:1035px;letter-spacing:0.18px;word-spacing:0.03px;}
#t7_877{left:96px;bottom:999px;letter-spacing:0.12px;word-spacing:-0.58px;}
#t8_877{left:96px;bottom:977px;letter-spacing:0.12px;word-spacing:-0.76px;}
#t9_877{left:96px;bottom:956px;letter-spacing:0.12px;word-spacing:-0.92px;}
#ta_877{left:96px;bottom:934px;letter-spacing:0.12px;word-spacing:-0.47px;}
#tb_877{left:96px;bottom:913px;letter-spacing:0.13px;word-spacing:-0.54px;}
#tc_877{left:96px;bottom:892px;letter-spacing:0.13px;word-spacing:-0.41px;}
#td_877{left:412px;bottom:892px;}
#te_877{left:418px;bottom:892px;letter-spacing:0.13px;word-spacing:-0.45px;}
#tf_877{left:96px;bottom:870px;letter-spacing:0.13px;}
#tg_877{left:285px;bottom:735px;letter-spacing:0.16px;word-spacing:0.49px;}
#th_877{left:366px;bottom:735px;}
#ti_877{left:372px;bottom:735px;letter-spacing:0.18px;}
#tj_877{left:416px;bottom:735px;letter-spacing:0.16px;word-spacing:0.01px;}
#tk_877{left:96px;bottom:688px;letter-spacing:0.12px;word-spacing:-0.48px;}
#tl_877{left:694px;bottom:688px;letter-spacing:0.08px;word-spacing:-0.4px;}
#tm_877{left:96px;bottom:666px;letter-spacing:0.14px;}
#tn_877{left:156px;bottom:666px;letter-spacing:0.12px;word-spacing:-0.5px;}
#to_877{left:96px;bottom:645px;letter-spacing:0.13px;word-spacing:-0.48px;}
#tp_877{left:96px;bottom:623px;letter-spacing:0.11px;word-spacing:-1.03px;}
#tq_877{left:96px;bottom:602px;letter-spacing:0.13px;word-spacing:-0.47px;}
#tr_877{left:96px;bottom:581px;letter-spacing:0.12px;word-spacing:-0.44px;}
#ts_877{left:96px;bottom:559px;letter-spacing:0.14px;word-spacing:-0.44px;}
#tt_877{left:505px;bottom:559px;letter-spacing:0.14px;word-spacing:-0.45px;}
#tu_877{left:648px;bottom:559px;letter-spacing:0.12px;word-spacing:-0.54px;}
#tv_877{left:96px;bottom:538px;letter-spacing:0.13px;word-spacing:-0.38px;}
#tw_877{left:96px;bottom:516px;letter-spacing:0.14px;word-spacing:-0.46px;}
#tx_877{left:96px;bottom:481px;letter-spacing:0.12px;word-spacing:-0.48px;}
#ty_877{left:96px;bottom:460px;letter-spacing:0.13px;word-spacing:-0.82px;}
#tz_877{left:96px;bottom:439px;letter-spacing:0.13px;word-spacing:-0.47px;}
#t10_877{left:96px;bottom:417px;letter-spacing:0.13px;word-spacing:-0.45px;}
#t11_877{left:96px;bottom:396px;letter-spacing:0.12px;word-spacing:-0.44px;}
#t12_877{left:96px;bottom:361px;letter-spacing:0.13px;word-spacing:-0.48px;}
#t13_877{left:96px;bottom:339px;letter-spacing:0.12px;word-spacing:-0.66px;}
#t14_877{left:96px;bottom:318px;letter-spacing:0.12px;word-spacing:-0.55px;}
#t15_877{left:96px;bottom:296px;letter-spacing:0.13px;word-spacing:-0.47px;}
#t16_877{left:96px;bottom:275px;letter-spacing:0.13px;word-spacing:-0.49px;}
#t17_877{left:96px;bottom:254px;letter-spacing:0.12px;word-spacing:-0.45px;}
#t18_877{left:96px;bottom:232px;letter-spacing:0.13px;word-spacing:-0.47px;}
#t19_877{left:96px;bottom:211px;letter-spacing:0.13px;word-spacing:-0.47px;}
#t1a_877{left:96px;bottom:189px;letter-spacing:0.18px;}
#t1b_877{left:96px;bottom:154px;letter-spacing:0.14px;word-spacing:-0.48px;}
#t1c_877{left:96px;bottom:133px;letter-spacing:0.13px;word-spacing:-0.48px;}
#t1d_877{left:96px;bottom:112px;letter-spacing:0.13px;word-spacing:-0.48px;}
#t1e_877{left:102px;bottom:826px;letter-spacing:-0.13px;}
#t1f_877{left:825px;bottom:826px;}
#t1g_877{left:456px;bottom:790px;letter-spacing:-0.16px;}
#t1h_877{left:396px;bottom:12px;letter-spacing:0.16px;}

.s1_877{font-size:17px;font-family:Arial-Italic_62c;color:#000;}
.s2_877{font-size:18px;font-family:Arial-BoldItalic_623;color:#000;}
.s3_877{font-size:17px;font-family:Arial-BoldItalic_623;color:#000;}
.s4_877{font-size:21px;font-family:Arial-Bold_61q;color:#000;}
.s5_877{font-size:18px;font-family:TimesNewRoman_61y;color:#000;}
.s6_877{font-size:18px;font-family:TimesNewRoman_627;color:#000;}
.s7_877{font-size:18px;font-family:Arial-Bold_61q;color:#000;}
.s8_877{font-size:18px;font-family:Arial-Bold_62f;color:#000;}
.s9_877{font-size:18px;font-family:TimesNewRoman-Italic_626;color:#000;}
.sa_877{font-size:14px;font-family:TimesNewRoman_61y;color:#000;}
.sb_877{font-size:18px;font-family:Arial_62w;color:#00AB00;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts877" type="text/css" >

@font-face {
	font-family: Arial-BoldItalic_623;
	src: url("fonts/Arial-BoldItalic_623.woff") format("woff");
}

@font-face {
	font-family: Arial-Bold_61q;
	src: url("fonts/Arial-Bold_61q.woff") format("woff");
}

@font-face {
	font-family: Arial-Bold_62f;
	src: url("fonts/Arial-Bold_62f.woff") format("woff");
}

@font-face {
	font-family: Arial-Italic_62c;
	src: url("fonts/Arial-Italic_62c.woff") format("woff");
}

@font-face {
	font-family: Arial_62w;
	src: url("fonts/Arial_62w.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman-Italic_626;
	src: url("fonts/TimesNewRoman-Italic_626.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_61y;
	src: url("fonts/TimesNewRoman_61y.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_627;
	src: url("fonts/TimesNewRoman_627.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg877Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg877" style="-webkit-user-select: none;"><object width="935" height="1210" data="877/877.svg" type="image/svg+xml" id="pdf877" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_877" class="t s1_877">Software Debug and Performance Resources </span><span id="t2_877" class="t s2_877">422 </span>
<span id="t3_877" class="t s3_877">24593—Rev. 3.41—June 2023 </span><span id="t4_877" class="t s3_877">AMD64 Technology </span>
<span id="t5_877" class="t s4_877">13.2.4 </span><span id="t6_877" class="t s4_877">Time-Stamp Counter </span>
<span id="t7_877" class="t s5_877">The time-stamp counter (TSC) is used to count processor-clock cycles. The TSC is cleared to 0 after a </span>
<span id="t8_877" class="t s5_877">processor reset. After a reset, the TSC is incremented at a rate corresponding to the baseline frequency </span>
<span id="t9_877" class="t s5_877">of the processor (which may differ from actual processor frequency in low power modes of operation). </span>
<span id="ta_877" class="t s5_877">Each time the TSC is read, it returns a monotonically-larger value than the previous value read from </span>
<span id="tb_877" class="t s5_877">the TSC. When the TSC contains all ones, it wraps to zero. The TSC in a 1-GHz processor counts for </span>
<span id="tc_877" class="t s5_877">almost 600 years before it wraps. Figure 13</span><span id="td_877" class="t s6_877">-</span><span id="te_877" class="t s5_877">18 shows the format of the 64-bit time-stamp counter </span>
<span id="tf_877" class="t s5_877">(TSC). </span>
<span id="tg_877" class="t s7_877">Figure 13</span><span id="th_877" class="t s8_877">-</span><span id="ti_877" class="t s7_877">18. </span><span id="tj_877" class="t s7_877">Time-Stamp Counter (TSC) </span>
<span id="tk_877" class="t s5_877">The TSC is a model-specific register that can also be read using one of the special </span><span id="tl_877" class="t s9_877">read time-stamp </span>
<span id="tm_877" class="t s9_877">counter </span><span id="tn_877" class="t s5_877">instructions, RDTSC (Read Time-Stamp Counter) or RDTSCP (Read Time-Stamp Counter </span>
<span id="to_877" class="t s5_877">and Processor ID). The RDTSC and RDTSCP instructions load the contents of the TSC into the EDX </span>
<span id="tp_877" class="t s5_877">register and the EAX register. The high 32 bits are loaded into EDX, and the low 32 bits are loaded into </span>
<span id="tq_877" class="t s5_877">EAX. The RDTSC and RDTSCP instructions can be executed at any privilege level and from any </span>
<span id="tr_877" class="t s5_877">processor mode. However, system software can disable the RDTSC or RDTSCP instructions for </span>
<span id="ts_877" class="t s5_877">programs that run at CPL &gt; 0 by setting CR4[TSD] (the </span><span id="tt_877" class="t s9_877">time-stamp disable </span><span id="tu_877" class="t s5_877">bit) to 1. When </span>
<span id="tv_877" class="t s5_877">CR4[TSD] = 1 and CPL &gt; 0, attempts to execute RDSTC or RDSTCP result in a general-protection </span>
<span id="tw_877" class="t s5_877">exception (#GP). </span>
<span id="tx_877" class="t s5_877">The TSC register can be read and written using the RDMSR and WRMSR instructions, respectively. </span>
<span id="ty_877" class="t s5_877">The programmer should use the CPUID instruction to determine whether these features are supported. </span>
<span id="tz_877" class="t s5_877">If EDX bit 4 (as returned by CPUID function 1) is set, then the processor supports TSC, the RDTSC </span>
<span id="t10_877" class="t s5_877">instruction and CR4[TSD]. If EDX bit 27 returned by CPUID function 8000_0001h is set, then the </span>
<span id="t11_877" class="t s5_877">processor supports the RDTSCP instruction. </span>
<span id="t12_877" class="t s5_877">The TSC register can be used by performance-analysis applications, along with the performance- </span>
<span id="t13_877" class="t s5_877">monitoring registers, to help determine the relative frequency of an event or its duration. Software can </span>
<span id="t14_877" class="t s5_877">also use the TSC to time software routines to help identify candidates for optimization. In general, the </span>
<span id="t15_877" class="t s5_877">TSC should not be used to take very short time measurements, because the resulting measurement is </span>
<span id="t16_877" class="t s5_877">not guaranteed to be identical each time it is made. The RDTSC instruction (unlike the RDTSCP </span>
<span id="t17_877" class="t s5_877">instruction) is not serializing, and can be executed out-of-order with respect to other instructions </span>
<span id="t18_877" class="t s5_877">around it. Even when bound by serializing instructions, the system environment at the time the </span>
<span id="t19_877" class="t s5_877">instruction is executed can cause additional cycles to be counted before the TSC value is loaded into </span>
<span id="t1a_877" class="t s5_877">EDX:EAX. </span>
<span id="t1b_877" class="t s5_877">When using the TSC to measure elapsed time, programmers must be aware that for some </span>
<span id="t1c_877" class="t s5_877">implementations, the rate at which the TSC is incremented varies based on the processor power </span>
<span id="t1d_877" class="t s5_877">management state (Pstate). For other implementations, the TSC increment rate is fixed and is not </span>
<span id="t1e_877" class="t sa_877">63 </span><span id="t1f_877" class="t sa_877">0 </span>
<span id="t1g_877" class="t sa_877">TSC </span>
<span id="t1h_877" class="t sb_877">[AMD Public Use] </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
