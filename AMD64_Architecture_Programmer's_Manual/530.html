<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p530" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_530{left:96px;bottom:48px;letter-spacing:-0.11px;}
#t2_530{left:636px;bottom:48px;letter-spacing:-0.12px;word-spacing:0.03px;}
#t3_530{left:96px;bottom:1116px;letter-spacing:-0.17px;word-spacing:0.06px;}
#t4_530{left:601px;bottom:1116px;letter-spacing:-0.17px;word-spacing:2.71px;}
#t5_530{left:96px;bottom:1038px;letter-spacing:0.13px;word-spacing:-0.45px;}
#t6_530{left:96px;bottom:1017px;letter-spacing:0.14px;word-spacing:-0.45px;}
#t7_530{left:96px;bottom:982px;letter-spacing:0.13px;word-spacing:-0.45px;}
#t8_530{left:96px;bottom:960px;letter-spacing:0.12px;word-spacing:-0.96px;}
#t9_530{left:96px;bottom:939px;letter-spacing:0.13px;word-spacing:-0.51px;}
#ta_530{left:96px;bottom:918px;letter-spacing:0.13px;word-spacing:-0.45px;}
#tb_530{left:96px;bottom:878px;letter-spacing:0.11px;}
#tc_530{left:147px;bottom:878px;letter-spacing:0.17px;word-spacing:-0.05px;}
#td_530{left:96px;bottom:843px;letter-spacing:0.13px;word-spacing:-0.53px;}
#te_530{left:96px;bottom:821px;letter-spacing:0.13px;word-spacing:-0.99px;}
#tf_530{left:96px;bottom:800px;letter-spacing:0.13px;word-spacing:-0.45px;}
#tg_530{left:96px;bottom:779px;letter-spacing:0.12px;word-spacing:-0.45px;}
#th_530{left:96px;bottom:757px;letter-spacing:0.12px;word-spacing:-0.52px;}
#ti_530{left:96px;bottom:736px;letter-spacing:0.12px;word-spacing:-0.38px;}
#tj_530{left:496px;bottom:736px;}
#tk_530{left:502px;bottom:736px;letter-spacing:0.13px;word-spacing:-0.41px;}
#tl_530{left:96px;bottom:714px;letter-spacing:0.16px;word-spacing:-0.45px;}
#tm_530{left:96px;bottom:675px;letter-spacing:0.11px;}
#tn_530{left:147px;bottom:675px;letter-spacing:0.16px;word-spacing:0.01px;}
#to_530{left:96px;bottom:639px;letter-spacing:0.13px;word-spacing:-0.48px;}
#tp_530{left:96px;bottom:618px;letter-spacing:0.13px;word-spacing:-0.47px;}
#tq_530{left:96px;bottom:597px;letter-spacing:0.12px;word-spacing:-0.82px;}
#tr_530{left:96px;bottom:575px;letter-spacing:0.13px;word-spacing:-0.46px;}
#ts_530{left:96px;bottom:554px;letter-spacing:0.13px;word-spacing:-0.47px;}
#tt_530{left:96px;bottom:532px;letter-spacing:0.13px;word-spacing:-0.49px;}
#tu_530{left:96px;bottom:511px;letter-spacing:0.13px;word-spacing:-0.47px;}
#tv_530{left:96px;bottom:490px;letter-spacing:0.13px;word-spacing:-0.44px;}
#tw_530{left:96px;bottom:468px;letter-spacing:0.13px;word-spacing:-0.45px;}
#tx_530{left:96px;bottom:410px;letter-spacing:0.19px;}
#ty_530{left:192px;bottom:410px;letter-spacing:0.22px;}
#tz_530{left:96px;bottom:374px;letter-spacing:0.13px;word-spacing:0.01px;}
#t10_530{left:158px;bottom:374px;}
#t11_530{left:164px;bottom:374px;letter-spacing:0.13px;word-spacing:-0.42px;}
#t12_530{left:96px;bottom:343px;}
#t13_530{left:124px;bottom:343px;letter-spacing:0.14px;word-spacing:0.19px;}
#t14_530{left:277px;bottom:343px;letter-spacing:0.13px;word-spacing:0.19px;}
#t15_530{left:612px;bottom:343px;letter-spacing:0.13px;}
#t16_530{left:686px;bottom:343px;letter-spacing:0.13px;word-spacing:0.19px;}
#t17_530{left:124px;bottom:322px;letter-spacing:0.12px;word-spacing:-0.45px;}
#t18_530{left:96px;bottom:294px;}
#t19_530{left:124px;bottom:294px;letter-spacing:0.02px;word-spacing:0.39px;}
#t1a_530{left:255px;bottom:294px;letter-spacing:0.13px;word-spacing:0.24px;}
#t1b_530{left:124px;bottom:273px;letter-spacing:0.14px;word-spacing:1.9px;}
#t1c_530{left:124px;bottom:251px;letter-spacing:0.13px;word-spacing:-0.41px;}
#t1d_530{left:124px;bottom:230px;letter-spacing:0.11px;word-spacing:-0.25px;}
#t1e_530{left:124px;bottom:209px;letter-spacing:0.13px;word-spacing:-0.45px;}
#t1f_530{left:96px;bottom:181px;}
#t1g_530{left:124px;bottom:181px;letter-spacing:0.03px;word-spacing:-0.25px;}
#t1h_530{left:266px;bottom:181px;letter-spacing:0.11px;word-spacing:-0.39px;}
#t1i_530{left:124px;bottom:160px;letter-spacing:0.13px;word-spacing:0.98px;}
#t1j_530{left:124px;bottom:138px;letter-spacing:0.12px;word-spacing:-0.69px;}
#t1k_530{left:396px;bottom:12px;letter-spacing:0.16px;}

.s1_530{font-size:17px;font-family:Arial-BoldItalic_623;color:#000;}
.s2_530{font-size:17px;font-family:Arial-Italic_62c;color:#000;}
.s3_530{font-size:18px;font-family:TimesNewRoman_61y;color:#000;}
.s4_530{font-size:18px;font-family:Arial-Bold_61q;color:#000;}
.s5_530{font-size:18px;font-family:TimesNewRoman_627;color:#000;}
.s6_530{font-size:24px;font-family:Arial-Bold_61q;color:#000;}
.s7_530{font-size:18px;font-family:TimesNewRoman-Bold_61v;color:#000;}
.s8_530{font-size:18px;font-family:TimesNewRoman-Italic_626;color:#000;}
.s9_530{font-size:18px;font-family:Arial_62w;color:#00AB00;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts530" type="text/css" >

@font-face {
	font-family: Arial-BoldItalic_623;
	src: url("fonts/Arial-BoldItalic_623.woff") format("woff");
}

@font-face {
	font-family: Arial-Bold_61q;
	src: url("fonts/Arial-Bold_61q.woff") format("woff");
}

@font-face {
	font-family: Arial-Italic_62c;
	src: url("fonts/Arial-Italic_62c.woff") format("woff");
}

@font-face {
	font-family: Arial_62w;
	src: url("fonts/Arial_62w.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman-Bold_61v;
	src: url("fonts/TimesNewRoman-Bold_61v.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman-Italic_626;
	src: url("fonts/TimesNewRoman-Italic_626.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_61y;
	src: url("fonts/TimesNewRoman_61y.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_627;
	src: url("fonts/TimesNewRoman_627.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg530Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg530" style="-webkit-user-select: none;"><object width="935" height="1210" data="530/530.svg" type="image/svg+xml" id="pdf530" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_530" class="t s1_530">75 </span><span id="t2_530" class="t s2_530">Segmented Virtual Memory </span>
<span id="t3_530" class="t s1_530">AMD64 Technology </span><span id="t4_530" class="t s1_530">24593—Rev. 3.41—June 2023 </span>
<span id="t5_530" class="t s3_530">The multi-segmented memory model provides the greatest level of flexibility for system software </span>
<span id="t6_530" class="t s3_530">using the segmentation mechanism. </span>
<span id="t7_530" class="t s3_530">Compatibility mode allows the multi-segmented model to be used in support of legacy software. </span>
<span id="t8_530" class="t s3_530">However, in compatibility mode, the multi-segmented memory model is restricted to the first 4 Gbytes </span>
<span id="t9_530" class="t s3_530">of virtual-memory space. Access to virtual memory above 4 Gbytes requires the use of 64-bit mode, </span>
<span id="ta_530" class="t s3_530">which does not support segmentation. </span>
<span id="tb_530" class="t s4_530">4.3.2 </span><span id="tc_530" class="t s4_530">Flat-Memory Model </span>
<span id="td_530" class="t s3_530">The flat-memory model is the simplest form of segmentation to implement. Although segmentation </span>
<span id="te_530" class="t s3_530">cannot be disabled, the flat-memory model allows system software to bypass most of the segmentation </span>
<span id="tf_530" class="t s3_530">mechanism. In the flat-memory model, all segment-base addresses have a value of 0 and the segment </span>
<span id="tg_530" class="t s3_530">limits are fixed at 4 Gbytes. Clearing the segment-base value to 0 effectively disables segment </span>
<span id="th_530" class="t s3_530">translation, resulting in a single segment spanning the entire virtual-address space. All segment </span>
<span id="ti_530" class="t s3_530">descriptors reference this single, flat segment. Figure 1</span><span id="tj_530" class="t s5_530">-</span><span id="tk_530" class="t s3_530">2 on page 7 shows an example of the flat- </span>
<span id="tl_530" class="t s3_530">memory model. </span>
<span id="tm_530" class="t s4_530">4.3.3 </span><span id="tn_530" class="t s4_530">Segmentation in 64-Bit Mode </span>
<span id="to_530" class="t s3_530">In 64-bit mode, segmentation is disabled. The segment-base value is ignored and treated as 0 by the </span>
<span id="tp_530" class="t s3_530">segmentation hardware. Likewise, segment limits and most attributes are ignored. There are a few </span>
<span id="tq_530" class="t s3_530">exceptions. The CS-segment DPL, D, and L attributes are used (respectively) to establish the privilege </span>
<span id="tr_530" class="t s3_530">level for a program, the default operand size, and whether the program is running in 64-bit mode or </span>
<span id="ts_530" class="t s3_530">compatibility mode. The FS and GS segments can be used as additional base registers in address </span>
<span id="tt_530" class="t s3_530">calculations, and those segments can have non-zero base-address values. This facilitates addressing </span>
<span id="tu_530" class="t s3_530">thread-local data and certain system-software data structures. See “FS and GS Registers in 64-Bit </span>
<span id="tv_530" class="t s3_530">Mode” on page 80 for details about the FS and GS segments in 64-bit mode. The system-segment </span>
<span id="tw_530" class="t s3_530">registers are always used in 64-bit mode. </span>
<span id="tx_530" class="t s6_530">4.4 </span><span id="ty_530" class="t s6_530">Segmentation Data Structures and Registers </span>
<span id="tz_530" class="t s3_530">Figure 4</span><span id="t10_530" class="t s5_530">-</span><span id="t11_530" class="t s3_530">1 on page 76 shows the following data structures used by the segmentation mechanism: </span>
<span id="t12_530" class="t s7_530">• </span><span id="t13_530" class="t s8_530">Segment Descriptors</span><span id="t14_530" class="t s3_530">—As the name implies, a segment descriptor </span><span id="t15_530" class="t s8_530">describes </span><span id="t16_530" class="t s3_530">a segment, including </span>
<span id="t17_530" class="t s3_530">its location in virtual-address space, its size, protection characteristics, and other attributes. </span>
<span id="t18_530" class="t s7_530">• </span><span id="t19_530" class="t s8_530">Descriptor Tables</span><span id="t1a_530" class="t s3_530">—Segment descriptors are stored in memory in one of three tables. The global- </span>
<span id="t1b_530" class="t s3_530">descriptor table (GDT) holds segment descriptors that can be shared among all tasks. Multiple </span>
<span id="t1c_530" class="t s3_530">local-descriptor tables (LDT) can be defined to hold descriptors that are used by specific tasks and </span>
<span id="t1d_530" class="t s3_530">are not shared globally. The interrupt-descriptor table (IDT) holds gate descriptors that are used to </span>
<span id="t1e_530" class="t s3_530">access the segments where interrupt handlers are located. </span>
<span id="t1f_530" class="t s7_530">• </span><span id="t1g_530" class="t s8_530">Task-State Segment</span><span id="t1h_530" class="t s3_530">—A task-state segment (TSS) is a special type of system segment that contains </span>
<span id="t1i_530" class="t s3_530">task-state information and data structures for each task. For example, a TSS holds a copy of the </span>
<span id="t1j_530" class="t s3_530">GPRs and EFLAGS register when a task is suspended. A TSS also holds the pointers to privileged- </span>
<span id="t1k_530" class="t s9_530">[AMD Public Use] </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
