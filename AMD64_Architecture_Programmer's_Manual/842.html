<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p842" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_842{left:96px;bottom:48px;letter-spacing:-0.15px;}
#t2_842{left:701px;bottom:48px;letter-spacing:-0.24px;word-spacing:0.04px;}
#t3_842{left:96px;bottom:1116px;letter-spacing:-0.17px;word-spacing:0.06px;}
#t4_842{left:601px;bottom:1116px;letter-spacing:-0.17px;word-spacing:2.71px;}
#t5_842{left:96px;bottom:1038px;}
#t6_842{left:124px;bottom:1038px;letter-spacing:0.11px;word-spacing:0.44px;}
#t7_842{left:328px;bottom:1038px;}
#t8_842{left:342px;bottom:1038px;letter-spacing:0.13px;word-spacing:0.42px;}
#t9_842{left:124px;bottom:1017px;letter-spacing:0.12px;word-spacing:0.64px;}
#ta_842{left:124px;bottom:996px;letter-spacing:0.13px;word-spacing:1.01px;}
#tb_842{left:124px;bottom:974px;letter-spacing:0.1px;}
#tc_842{left:96px;bottom:947px;}
#td_842{left:124px;bottom:947px;letter-spacing:0.13px;word-spacing:0.49px;}
#te_842{left:124px;bottom:925px;letter-spacing:0.12px;word-spacing:0.37px;}
#tf_842{left:124px;bottom:904px;letter-spacing:0.12px;word-spacing:0.37px;}
#tg_842{left:124px;bottom:882px;letter-spacing:0.13px;word-spacing:1.65px;}
#th_842{left:124px;bottom:861px;letter-spacing:0.13px;}
#ti_842{left:96px;bottom:826px;letter-spacing:-0.12px;word-spacing:0.57px;}
#tj_842{left:160px;bottom:826px;}
#tk_842{left:166px;bottom:826px;letter-spacing:0.11px;word-spacing:-0.45px;}
#tl_842{left:96px;bottom:804px;letter-spacing:0.12px;word-spacing:-0.47px;}
#tm_842{left:96px;bottom:783px;letter-spacing:0.14px;}
#tn_842{left:96px;bottom:419px;letter-spacing:0.12px;word-spacing:-0.47px;}
#to_842{left:96px;bottom:398px;letter-spacing:0.13px;word-spacing:-0.45px;}
#tp_842{left:96px;bottom:377px;letter-spacing:0.11px;word-spacing:-0.48px;}
#tq_842{left:96px;bottom:355px;letter-spacing:0.13px;word-spacing:-0.45px;}
#tr_842{left:96px;bottom:319px;letter-spacing:-0.1px;word-spacing:0.01px;}
#ts_842{left:284px;bottom:318px;letter-spacing:0.11px;word-spacing:-0.43px;}
#tt_842{left:96px;bottom:297px;letter-spacing:0.13px;word-spacing:-0.45px;}
#tu_842{left:96px;bottom:275px;letter-spacing:0.12px;word-spacing:-0.49px;}
#tv_842{left:96px;bottom:254px;letter-spacing:0.13px;word-spacing:-0.48px;}
#tw_842{left:96px;bottom:233px;letter-spacing:0.12px;word-spacing:-0.46px;}
#tx_842{left:96px;bottom:202px;}
#ty_842{left:124px;bottom:202px;letter-spacing:0.12px;word-spacing:-0.76px;}
#tz_842{left:124px;bottom:181px;letter-spacing:0.11px;word-spacing:-0.43px;}
#t10_842{left:124px;bottom:159px;letter-spacing:0.1px;}
#t11_842{left:96px;bottom:132px;}
#t12_842{left:124px;bottom:132px;letter-spacing:0.11px;word-spacing:1.38px;}
#t13_842{left:331px;bottom:132px;}
#t14_842{left:346px;bottom:132px;letter-spacing:0.12px;word-spacing:1.38px;}
#t15_842{left:124px;bottom:110px;letter-spacing:0.13px;word-spacing:0.54px;}
#t16_842{left:96px;bottom:743px;letter-spacing:-0.12px;word-spacing:1.08px;}
#t17_842{left:168px;bottom:743px;}
#t18_842{left:174px;bottom:743px;letter-spacing:0.12px;}
#t19_842{left:208px;bottom:743px;letter-spacing:0.09px;word-spacing:0.05px;}
#t1a_842{left:109px;bottom:703px;letter-spacing:-0.02px;}
#t1b_842{left:119px;bottom:683px;letter-spacing:-0.09px;}
#t1c_842{left:332px;bottom:715px;letter-spacing:-0.11px;}
#t1d_842{left:648px;bottom:715px;letter-spacing:-0.1px;}
#t1e_842{left:212px;bottom:681px;letter-spacing:0.16px;}
#t1f_842{left:346px;bottom:690px;letter-spacing:0.11px;}
#t1g_842{left:330px;bottom:672px;letter-spacing:0.11px;}
#t1h_842{left:451px;bottom:681px;letter-spacing:0.16px;}
#t1i_842{left:531px;bottom:681px;letter-spacing:0.18px;}
#t1j_842{left:664px;bottom:690px;letter-spacing:0.11px;}
#t1k_842{left:648px;bottom:672px;letter-spacing:0.11px;}
#t1l_842{left:770px;bottom:681px;letter-spacing:0.13px;}
#t1m_842{left:135px;bottom:638px;letter-spacing:0.17px;}
#t1n_842{left:248px;bottom:638px;}
#t1o_842{left:354px;bottom:638px;}
#t1p_842{left:437px;bottom:648px;letter-spacing:0.11px;word-spacing:-0.02px;}
#t1q_842{left:445px;bottom:629px;letter-spacing:0.1px;word-spacing:0.05px;}
#t1r_842{left:566px;bottom:638px;}
#t1s_842{left:672px;bottom:638px;}
#t1t_842{left:762px;bottom:638px;letter-spacing:0.09px;word-spacing:0.04px;}
#t1u_842{left:129px;bottom:605px;letter-spacing:0.17px;}
#t1v_842{left:133px;bottom:583px;letter-spacing:0.16px;}
#t1w_842{left:158px;bottom:583px;}
#t1x_842{left:123px;bottom:562px;letter-spacing:0.1px;}
#t1y_842{left:118px;bottom:541px;letter-spacing:0.12px;}
#t1z_842{left:301px;bottom:573px;}
#t20_842{left:460px;bottom:582px;}
#t21_842{left:444px;bottom:564px;letter-spacing:-0.11px;word-spacing:0.18px;}
#t22_842{left:550px;bottom:573px;letter-spacing:0.11px;word-spacing:-0.07px;}
#t23_842{left:652px;bottom:573px;letter-spacing:-0.07px;word-spacing:-0.05px;}
#t24_842{left:762px;bottom:573px;letter-spacing:0.09px;word-spacing:0.04px;}
#t25_842{left:132px;bottom:507px;letter-spacing:0.17px;}
#t26_842{left:225px;bottom:516px;letter-spacing:0.1px;word-spacing:0.04px;}
#t27_842{left:233px;bottom:498px;letter-spacing:0.14px;word-spacing:-0.08px;}
#t28_842{left:354px;bottom:507px;}
#t29_842{left:437px;bottom:516px;letter-spacing:0.11px;word-spacing:-0.02px;}
#t2a_842{left:445px;bottom:498px;letter-spacing:0.1px;word-spacing:0.05px;}
#t2b_842{left:672px;bottom:507px;}
#t2c_842{left:101px;bottom:475px;letter-spacing:-0.13px;}
#t2d_842{left:123px;bottom:458px;letter-spacing:-0.12px;}
#t2e_842{left:396px;bottom:12px;letter-spacing:0.16px;}

.s1_842{font-size:17px;font-family:Arial-BoldItalic_623;color:#000;}
.s2_842{font-size:17px;font-family:Arial-Italic_62c;color:#000;}
.s3_842{font-size:18px;font-family:TimesNewRoman-Bold_61v;color:#000;}
.s4_842{font-size:18px;font-family:TimesNewRoman_61y;color:#000;}
.s5_842{font-size:18px;font-family:TimesNewRoman-Italic_626;color:#000;}
.s6_842{font-size:18px;font-family:TimesNewRoman_627;color:#000;}
.s7_842{font-size:17px;font-family:Arial-Bold_61q;color:#000;}
.s8_842{font-size:18px;font-family:Arial-Bold_61q;color:#000;}
.s9_842{font-size:18px;font-family:Arial-Bold_62f;color:#000;}
.sa_842{font-size:15px;font-family:TimesNewRoman-Bold_61v;color:#000;}
.sb_842{font-size:17px;font-family:TimesNewRoman-Bold_61v;color:#000;}
.sc_842{font-size:15px;font-family:TimesNewRoman_61y;color:#000;}
.sd_842{font-size:15px;font-family:TimesNewRoman-Italic_626;color:#000;}
.se_842{font-size:14px;font-family:TimesNewRoman-BoldItalic_61l;color:#000;}
.sf_842{font-size:14px;font-family:TimesNewRoman-Italic_626;color:#000;}
.sg_842{font-size:18px;font-family:Arial_62w;color:#00AB00;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts842" type="text/css" >

@font-face {
	font-family: Arial-BoldItalic_623;
	src: url("fonts/Arial-BoldItalic_623.woff") format("woff");
}

@font-face {
	font-family: Arial-Bold_61q;
	src: url("fonts/Arial-Bold_61q.woff") format("woff");
}

@font-face {
	font-family: Arial-Bold_62f;
	src: url("fonts/Arial-Bold_62f.woff") format("woff");
}

@font-face {
	font-family: Arial-Italic_62c;
	src: url("fonts/Arial-Italic_62c.woff") format("woff");
}

@font-face {
	font-family: Arial_62w;
	src: url("fonts/Arial_62w.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman-BoldItalic_61l;
	src: url("fonts/TimesNewRoman-BoldItalic_61l.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman-Bold_61v;
	src: url("fonts/TimesNewRoman-Bold_61v.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman-Italic_626;
	src: url("fonts/TimesNewRoman-Italic_626.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_61y;
	src: url("fonts/TimesNewRoman_61y.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_627;
	src: url("fonts/TimesNewRoman_627.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg842Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg842" style="-webkit-user-select: none;"><object width="935" height="1210" data="842/842.svg" type="image/svg+xml" id="pdf842" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_842" class="t s1_842">387 </span><span id="t2_842" class="t s2_842">Task Management </span>
<span id="t3_842" class="t s1_842">AMD64 Technology </span><span id="t4_842" class="t s1_842">24593—Rev. 3.41—June 2023 </span>
<span id="t5_842" class="t s3_842">• </span><span id="t6_842" class="t s4_842">The CALL instruction, INT</span><span id="t7_842" class="t s5_842">n </span><span id="t8_842" class="t s4_842">instructions, interrupts, and exceptions can only be performed from </span>
<span id="t9_842" class="t s4_842">outer-level tasks to inner-level tasks. All of these operations set the EFLAGS.NT bit for the new </span>
<span id="ta_842" class="t s4_842">task to 1 during a task switch, and copy the selector for the previous task into the new-task link </span>
<span id="tb_842" class="t s4_842">field. </span>
<span id="tc_842" class="t s3_842">• </span><span id="td_842" class="t s4_842">An IRET instruction which returns to another task only occurs when the EFLAGS.NT bit for the </span>
<span id="te_842" class="t s4_842">current task is set to 1, and only can be performed from an inner-level task to an outer-level task. </span>
<span id="tf_842" class="t s4_842">When an IRET results in a task switch, the new task is referenced using the selector stored in the </span>
<span id="tg_842" class="t s4_842">current-TSS link field. The EFLAGS.NT bit for the current task is cleared to 0 during the task </span>
<span id="th_842" class="t s4_842">switch. </span>
<span id="ti_842" class="t s4_842">Table 12</span><span id="tj_842" class="t s6_842">-</span><span id="tk_842" class="t s4_842">1 summarizes the effect various task-switch initiators have on EFLAGS.NT, the TSS link- </span>
<span id="tl_842" class="t s4_842">field, and the TSS-busy bit. (For more information on the busy bit, see the next section, “Preventing </span>
<span id="tm_842" class="t s4_842">Recursion.”) </span>
<span id="tn_842" class="t s4_842">Programs running at any privilege level can set EFLAGS.NT to 1 and execute the IRET instruction to </span>
<span id="to_842" class="t s4_842">transfer control to another task. System software can keep control over improperly nested-task </span>
<span id="tp_842" class="t s4_842">switches by initializing the link field of all TSSs that it creates. That way, improperly nested-task </span>
<span id="tq_842" class="t s4_842">switches always transfer control to a known task. </span>
<span id="tr_842" class="t s7_842">Preventing Recursion. </span><span id="ts_842" class="t s4_842">Task recursion is not allowed by the hardware task-switch mechanism. If </span>
<span id="tt_842" class="t s4_842">recursive-task switches were allowed, they would replace a previous task-state image with a newer </span>
<span id="tu_842" class="t s4_842">image, discarding the previous information. To prevent recursion from occurring, the processor uses </span>
<span id="tv_842" class="t s4_842">the busy bit located in the TSS-descriptor type field (bit 9 of byte +4). Use of this bit depends on how </span>
<span id="tw_842" class="t s4_842">the task switch is initiated: </span>
<span id="tx_842" class="t s3_842">• </span><span id="ty_842" class="t s4_842">The JMP instruction clears the busy bit in the old task to 0 and sets the busy bit in the new task to 1. </span>
<span id="tz_842" class="t s4_842">A general-protection exception (#GP) occurs if an attempt is made to JMP to a task with a set busy </span>
<span id="t10_842" class="t s4_842">bit. </span>
<span id="t11_842" class="t s3_842">• </span><span id="t12_842" class="t s4_842">The CALL instruction, INT</span><span id="t13_842" class="t s5_842">n </span><span id="t14_842" class="t s4_842">instructions, interrupts, and exceptions set the busy bit in the new </span>
<span id="t15_842" class="t s4_842">task to 1. The busy bit in the old task remains set to 1, preventing recursion through task-nesting </span>
<span id="t16_842" class="t s8_842">Table 12</span><span id="t17_842" class="t s9_842">-</span><span id="t18_842" class="t s8_842">1. </span><span id="t19_842" class="t s8_842">Effects of Task Nesting </span>
<span id="t1a_842" class="t sa_842">Task-Switch </span>
<span id="t1b_842" class="t sb_842">Initiator </span>
<span id="t1c_842" class="t sa_842">Old Task </span><span id="t1d_842" class="t sa_842">New Task </span>
<span id="t1e_842" class="t sa_842">EFLAGS.NT </span>
<span id="t1f_842" class="t sa_842">Link </span>
<span id="t1g_842" class="t sa_842">(Selector) </span>
<span id="t1h_842" class="t sa_842">Busy </span><span id="t1i_842" class="t sa_842">EFLAGS.NT </span>
<span id="t1j_842" class="t sa_842">Link </span>
<span id="t1k_842" class="t sa_842">(Selector) </span>
<span id="t1l_842" class="t sa_842">Busy </span>
<span id="t1m_842" class="t sc_842">JMP </span><span id="t1n_842" class="t sc_842">— </span><span id="t1o_842" class="t sc_842">— </span>
<span id="t1p_842" class="t sc_842">Clear to 0 </span>
<span id="t1q_842" class="t sc_842">(was 1) </span>
<span id="t1r_842" class="t sc_842">— </span><span id="t1s_842" class="t sc_842">— </span><span id="t1t_842" class="t sc_842">Set to 1 </span>
<span id="t1u_842" class="t sc_842">CALL </span>
<span id="t1v_842" class="t sc_842">INT</span><span id="t1w_842" class="t sd_842">n </span>
<span id="t1x_842" class="t sc_842">Interrupt </span>
<span id="t1y_842" class="t sc_842">Exception </span>
<span id="t1z_842" class="t sc_842">— </span>
<span id="t20_842" class="t sc_842">— </span>
<span id="t21_842" class="t sc_842">(Was 1) </span>
<span id="t22_842" class="t sc_842">Set to 1 </span><span id="t23_842" class="t sc_842">Old Task </span><span id="t24_842" class="t sc_842">Set to 1 </span>
<span id="t25_842" class="t sc_842">IRET </span>
<span id="t26_842" class="t sc_842">Clear to 0 </span>
<span id="t27_842" class="t sc_842">(was 1) </span>
<span id="t28_842" class="t sc_842">— </span>
<span id="t29_842" class="t sc_842">Clear to 0 </span>
<span id="t2a_842" class="t sc_842">(was 1) </span>
<span id="t2b_842" class="t sc_842">— </span>
<span id="t2c_842" class="t se_842">Note: </span>
<span id="t2d_842" class="t sf_842">“—” indicates no change is made. </span>
<span id="t2e_842" class="t sg_842">[AMD Public Use] </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
