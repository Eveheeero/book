<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p647" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_647{left:96px;bottom:47px;letter-spacing:-0.12px;word-spacing:0.01px;}
#t2_647{left:808px;bottom:47px;letter-spacing:0.17px;}
#t3_647{left:96px;bottom:1116px;letter-spacing:-0.17px;word-spacing:2.66px;}
#t4_647{left:684px;bottom:1116px;letter-spacing:-0.17px;word-spacing:0.06px;}
#t5_647{left:124px;bottom:956px;letter-spacing:0.13px;word-spacing:2.11px;}
#t6_647{left:124px;bottom:934px;letter-spacing:0.11px;word-spacing:-0.5px;}
#t7_647{left:96px;bottom:876px;letter-spacing:0.19px;}
#t8_647{left:192px;bottom:876px;letter-spacing:0.23px;}
#t9_647{left:96px;bottom:840px;letter-spacing:0.13px;word-spacing:-0.46px;}
#ta_647{left:96px;bottom:818px;letter-spacing:0.13px;word-spacing:-0.47px;}
#tb_647{left:96px;bottom:797px;letter-spacing:0.13px;word-spacing:-0.49px;}
#tc_647{left:96px;bottom:776px;letter-spacing:0.13px;word-spacing:-0.44px;}
#td_647{left:420px;bottom:776px;letter-spacing:0.19px;}
#te_647{left:479px;bottom:776px;letter-spacing:0.13px;word-spacing:-0.45px;}
#tf_647{left:96px;bottom:754px;letter-spacing:0.13px;word-spacing:-0.51px;}
#tg_647{left:96px;bottom:724px;}
#th_647{left:124px;bottom:724px;letter-spacing:0.13px;}
#ti_647{left:176px;bottom:724px;letter-spacing:0.08px;word-spacing:-0.52px;}
#tj_647{left:124px;bottom:702px;letter-spacing:0.13px;word-spacing:-0.45px;}
#tk_647{left:96px;bottom:675px;}
#tl_647{left:124px;bottom:675px;letter-spacing:0.13px;}
#tm_647{left:194px;bottom:675px;letter-spacing:0.12px;word-spacing:-0.16px;}
#tn_647{left:124px;bottom:653px;letter-spacing:0.13px;word-spacing:-0.09px;}
#to_647{left:124px;bottom:632px;letter-spacing:0.11px;word-spacing:-0.45px;}
#tp_647{left:96px;bottom:604px;}
#tq_647{left:124px;bottom:604px;letter-spacing:0.02px;}
#tr_647{left:175px;bottom:604px;letter-spacing:0.12px;word-spacing:1.55px;}
#ts_647{left:124px;bottom:583px;letter-spacing:0.14px;word-spacing:2.57px;}
#tt_647{left:124px;bottom:562px;letter-spacing:0.12px;word-spacing:-0.45px;}
#tu_647{left:301px;bottom:562px;letter-spacing:0.17px;}
#tv_647{left:353px;bottom:562px;letter-spacing:0.12px;word-spacing:-0.45px;}
#tw_647{left:96px;bottom:534px;}
#tx_647{left:124px;bottom:534px;letter-spacing:0.15px;}
#ty_647{left:190px;bottom:534px;letter-spacing:0.12px;word-spacing:0.3px;}
#tz_647{left:124px;bottom:513px;letter-spacing:0.11px;word-spacing:-0.44px;}
#t10_647{left:96px;bottom:485px;}
#t11_647{left:124px;bottom:485px;letter-spacing:0.17px;}
#t12_647{left:176px;bottom:485px;letter-spacing:0.12px;word-spacing:2.28px;}
#t13_647{left:124px;bottom:464px;letter-spacing:0.12px;word-spacing:-0.88px;}
#t14_647{left:124px;bottom:442px;letter-spacing:0.12px;word-spacing:0.47px;}
#t15_647{left:124px;bottom:421px;letter-spacing:0.13px;word-spacing:-0.76px;}
#t16_647{left:124px;bottom:400px;letter-spacing:0.11px;word-spacing:-0.45px;}
#t17_647{left:96px;bottom:364px;letter-spacing:0.13px;word-spacing:0.01px;}
#t18_647{left:158px;bottom:364px;}
#t19_647{left:164px;bottom:364px;letter-spacing:0.13px;word-spacing:-0.43px;}
#t1a_647{left:96px;bottom:343px;letter-spacing:0.1px;word-spacing:-0.44px;}
#t1b_647{left:96px;bottom:322px;letter-spacing:0.12px;word-spacing:-0.96px;}
#t1c_647{left:96px;bottom:300px;letter-spacing:0.13px;word-spacing:-0.47px;}
#t1d_647{left:309px;bottom:1011px;letter-spacing:-0.08px;word-spacing:-0.5px;}
#t1e_647{left:557px;bottom:1011px;letter-spacing:-0.09px;word-spacing:-0.02px;}
#t1f_647{left:309px;bottom:987px;letter-spacing:-0.08px;word-spacing:-0.04px;}
#t1g_647{left:557px;bottom:987px;letter-spacing:-0.09px;word-spacing:-0.48px;}
#t1h_647{left:302px;bottom:1035px;letter-spacing:-0.16px;word-spacing:0.09px;}
#t1i_647{left:550px;bottom:1035px;letter-spacing:-0.15px;word-spacing:-0.01px;}
#t1j_647{left:396px;bottom:12px;letter-spacing:0.16px;}

.s1_647{font-size:17px;font-family:Arial-Italic_62c;color:#000;}
.s2_647{font-size:18px;font-family:Arial-BoldItalic_623;color:#000;}
.s3_647{font-size:17px;font-family:Arial-BoldItalic_623;color:#000;}
.s4_647{font-size:18px;font-family:TimesNewRoman_61y;color:#000;}
.s5_647{font-size:24px;font-family:Arial-Bold_61q;color:#000;}
.s6_647{font-size:18px;font-family:TimesNewRoman-Italic_626;color:#000;}
.s7_647{font-size:18px;font-family:TimesNewRoman-Bold_61v;color:#000;}
.s8_647{font-size:18px;font-family:TimesNewRoman_627;color:#000;}
.s9_647{font-size:17px;font-family:TimesNewRoman_61y;color:#000;}
.sa_647{font-size:17px;font-family:TimesNewRoman-Bold_61v;color:#000;}
.sb_647{font-size:18px;font-family:Arial_62w;color:#00AB00;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts647" type="text/css" >

@font-face {
	font-family: Arial-BoldItalic_623;
	src: url("fonts/Arial-BoldItalic_623.woff") format("woff");
}

@font-face {
	font-family: Arial-Bold_61q;
	src: url("fonts/Arial-Bold_61q.woff") format("woff");
}

@font-face {
	font-family: Arial-Italic_62c;
	src: url("fonts/Arial-Italic_62c.woff") format("woff");
}

@font-face {
	font-family: Arial_62w;
	src: url("fonts/Arial_62w.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman-Bold_61v;
	src: url("fonts/TimesNewRoman-Bold_61v.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman-Italic_626;
	src: url("fonts/TimesNewRoman-Italic_626.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_61y;
	src: url("fonts/TimesNewRoman_61y.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_627;
	src: url("fonts/TimesNewRoman_627.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg647Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg647" style="-webkit-user-select: none;"><object width="935" height="1210" data="647/647.svg" type="image/svg+xml" id="pdf647" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_647" class="t s1_647">Memory System </span><span id="t2_647" class="t s2_647">192 </span>
<span id="t3_647" class="t s3_647">24593—Rev. 3.41—June 2023 </span><span id="t4_647" class="t s3_647">AMD64 Technology </span>
<span id="t5_647" class="t s4_647">In this example, the MFENCE instruction ensures that any buffered stores are globally visible </span>
<span id="t6_647" class="t s4_647">before the loads are allowed to execute, so the result r1 = 1, r2 = 0, r3 = 1 and r4 = 0 will not occur. </span>
<span id="t7_647" class="t s5_647">7.3 </span><span id="t8_647" class="t s5_647">Memory Coherency and Protocol </span>
<span id="t9_647" class="t s4_647">Implementations that support caching support a cache-coherency protocol for maintaining coherency </span>
<span id="ta_647" class="t s4_647">between main memory and the caches. The cache-coherency protocol is also used to maintain </span>
<span id="tb_647" class="t s4_647">coherency between all processors in a multiprocessor system. The cache-coherency protocol </span>
<span id="tc_647" class="t s4_647">supported by the AMD64 architecture is the </span><span id="td_647" class="t s6_647">MOESI </span><span id="te_647" class="t s4_647">(modified, owned, exclusive, shared, invalid) </span>
<span id="tf_647" class="t s4_647">protocol. The states of the MOESI protocol are: </span>
<span id="tg_647" class="t s7_647">• </span><span id="th_647" class="t s6_647">Invalid</span><span id="ti_647" class="t s4_647">—A cache line in the invalid state does not hold a valid copy of the data. Valid copies of the </span>
<span id="tj_647" class="t s4_647">data can be either in main memory or another processor cache. </span>
<span id="tk_647" class="t s7_647">• </span><span id="tl_647" class="t s6_647">Exclusive</span><span id="tm_647" class="t s4_647">—A cache line in the exclusive state holds the most recent, correct copy of the data. The </span>
<span id="tn_647" class="t s4_647">copy in main memory is also the most recent, correct copy of the data. No other processor holds a </span>
<span id="to_647" class="t s4_647">copy of the data. </span>
<span id="tp_647" class="t s7_647">• </span><span id="tq_647" class="t s6_647">Shared</span><span id="tr_647" class="t s4_647">—A cache line in the shared state holds the most recent, correct copy of the data. Other </span>
<span id="ts_647" class="t s4_647">processors in the system may hold copies of the data in the shared state, as well. If no other </span>
<span id="tt_647" class="t s4_647">processor holds it in the </span><span id="tu_647" class="t s6_647">owned </span><span id="tv_647" class="t s4_647">state, then the copy in main memory is also the most recent. </span>
<span id="tw_647" class="t s7_647">• </span><span id="tx_647" class="t s6_647">Modified</span><span id="ty_647" class="t s4_647">—A cache line in the modified state holds the most recent, correct copy of the data. The </span>
<span id="tz_647" class="t s4_647">copy in main memory is stale (incorrect), and no other processor holds a copy. </span>
<span id="t10_647" class="t s7_647">• </span><span id="t11_647" class="t s6_647">Owned</span><span id="t12_647" class="t s4_647">—A cache line in the owned state holds the most recent, correct copy of the data. The </span>
<span id="t13_647" class="t s4_647">owned state is similar to the shared state in that other processors can hold a copy of the most recent, </span>
<span id="t14_647" class="t s4_647">correct data. Unlike the shared state, however, the copy in main memory can be stale (incorrect). </span>
<span id="t15_647" class="t s4_647">Only one processor can hold the data in the owned state—all other processors must hold the data in </span>
<span id="t16_647" class="t s4_647">the shared state. </span>
<span id="t17_647" class="t s4_647">Figure 7</span><span id="t18_647" class="t s8_647">-</span><span id="t19_647" class="t s4_647">2 on page 193 shows the general MOESI state transitions possible with various types of </span>
<span id="t1a_647" class="t s4_647">memory accesses. This is a logical software view, not a hardware view, of how cache-line state </span>
<span id="t1b_647" class="t s4_647">transitions. Instruction-execution activity and external-bus transactions can both be used to modify the </span>
<span id="t1c_647" class="t s4_647">cache MOESI state in multiprocessing or multi-mastering systems. </span>
<span id="t1d_647" class="t s9_647">Load r1 A </span><span id="t1e_647" class="t s9_647">Load r3 B </span>
<span id="t1f_647" class="t s9_647">Load r2 B </span><span id="t1g_647" class="t s9_647">Load r4 A </span>
<span id="t1h_647" class="t sa_647">Processor 0 </span><span id="t1i_647" class="t sa_647">Processor 1 </span>
<span id="t1j_647" class="t sb_647">[AMD Public Use] </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
