<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p932" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_932{left:69px;bottom:68px;letter-spacing:0.12px;}
#t2_932{left:110px;bottom:68px;letter-spacing:0.1px;}
#t3_932{left:69px;bottom:1141px;letter-spacing:-0.13px;}
#t4_932{left:69px;bottom:1083px;letter-spacing:0.14px;}
#t5_932{left:151px;bottom:1083px;letter-spacing:0.17px;word-spacing:0.01px;}
#t6_932{left:69px;bottom:1059px;letter-spacing:-0.17px;word-spacing:-0.43px;}
#t7_932{left:69px;bottom:1042px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#t8_932{left:69px;bottom:1025px;letter-spacing:-0.16px;word-spacing:-0.47px;}
#t9_932{left:69px;bottom:1008px;letter-spacing:-0.16px;word-spacing:-0.44px;}
#ta_932{left:69px;bottom:991px;letter-spacing:-0.14px;word-spacing:-0.5px;}
#tb_932{left:69px;bottom:965px;}
#tc_932{left:95px;bottom:969px;letter-spacing:-0.14px;word-spacing:-0.48px;}
#td_932{left:95px;bottom:952px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#te_932{left:69px;bottom:925px;}
#tf_932{left:95px;bottom:929px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#tg_932{left:69px;bottom:904px;letter-spacing:-0.14px;word-spacing:-0.48px;}
#th_932{left:69px;bottom:888px;letter-spacing:-0.13px;word-spacing:-0.49px;}
#ti_932{left:69px;bottom:871px;letter-spacing:-0.14px;word-spacing:-0.46px;}
#tj_932{left:69px;bottom:846px;letter-spacing:-0.16px;word-spacing:-0.73px;}
#tk_932{left:69px;bottom:830px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#tl_932{left:69px;bottom:813px;letter-spacing:-0.15px;word-spacing:-0.45px;}
#tm_932{left:69px;bottom:796px;letter-spacing:-0.16px;word-spacing:-0.44px;}
#tn_932{left:69px;bottom:779px;letter-spacing:-0.18px;word-spacing:-0.75px;}
#to_932{left:69px;bottom:762px;letter-spacing:-0.13px;word-spacing:-0.5px;}
#tp_932{left:69px;bottom:738px;letter-spacing:-0.15px;word-spacing:-0.45px;}
#tq_932{left:69px;bottom:721px;letter-spacing:-0.14px;word-spacing:-0.46px;}
#tr_932{left:69px;bottom:697px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#ts_932{left:69px;bottom:680px;letter-spacing:-0.15px;word-spacing:-0.45px;}
#tt_932{left:69px;bottom:663px;letter-spacing:-0.14px;word-spacing:-0.64px;}
#tu_932{left:69px;bottom:646px;letter-spacing:-0.14px;word-spacing:-1px;}
#tv_932{left:69px;bottom:629px;letter-spacing:-0.16px;word-spacing:-0.42px;}
#tw_932{left:69px;bottom:605px;letter-spacing:-0.14px;word-spacing:-1.01px;}
#tx_932{left:69px;bottom:588px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#ty_932{left:69px;bottom:520px;letter-spacing:0.18px;}
#tz_932{left:155px;bottom:520px;letter-spacing:0.22px;word-spacing:-0.01px;}
#t10_932{left:69px;bottom:495px;letter-spacing:-0.15px;word-spacing:-1.03px;}
#t11_932{left:69px;bottom:478px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#t12_932{left:69px;bottom:461px;letter-spacing:-0.17px;word-spacing:-1.28px;}
#t13_932{left:69px;bottom:444px;letter-spacing:-0.17px;word-spacing:-0.39px;}
#t14_932{left:69px;bottom:420px;letter-spacing:-0.15px;word-spacing:-0.44px;}
#t15_932{left:69px;bottom:403px;letter-spacing:-0.15px;word-spacing:-0.47px;}
#t16_932{left:69px;bottom:379px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#t17_932{left:69px;bottom:362px;letter-spacing:-0.16px;word-spacing:-0.45px;}
#t18_932{left:69px;bottom:345px;letter-spacing:-0.14px;word-spacing:-0.46px;}
#t19_932{left:69px;bottom:328px;letter-spacing:-0.13px;word-spacing:-0.46px;}
#t1a_932{left:69px;bottom:304px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#t1b_932{left:69px;bottom:287px;letter-spacing:-0.13px;word-spacing:-0.49px;}
#t1c_932{left:69px;bottom:270px;letter-spacing:-0.16px;word-spacing:-1.13px;}
#t1d_932{left:69px;bottom:254px;letter-spacing:-0.17px;word-spacing:-0.44px;}
#t1e_932{left:69px;bottom:237px;letter-spacing:-0.14px;word-spacing:-0.73px;}
#t1f_932{left:567px;bottom:237px;letter-spacing:-0.09px;}
#t1g_932{left:583px;bottom:237px;letter-spacing:-0.13px;word-spacing:-0.8px;}
#t1h_932{left:69px;bottom:220px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#t1i_932{left:69px;bottom:203px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#t1j_932{left:69px;bottom:186px;letter-spacing:-0.14px;word-spacing:-0.46px;}
#t1k_932{left:69px;bottom:162px;letter-spacing:-0.16px;word-spacing:-0.45px;}
#t1l_932{left:69px;bottom:145px;letter-spacing:-0.15px;word-spacing:-0.45px;}
#t1m_932{left:69px;bottom:128px;letter-spacing:-0.23px;word-spacing:-0.37px;}

.s1_932{font-size:12px;font-family:NeoSansIntel_1uk1;color:#000;}
.s2_932{font-size:14px;font-family:NeoSansIntel_1uk1;color:#0860A8;}
.s3_932{font-size:18px;font-family:NeoSansIntelMedium_1uk0;color:#0860A8;}
.s4_932{font-size:14px;font-family:Verdana_3e8;color:#000;}
.s5_932{font-size:21px;font-family:TimesNewRoman_3ec;color:#000;}
.s6_932{font-size:21px;font-family:NeoSansIntelMedium_1uk0;color:#0860A8;}
.s7_932{font-size:14px;font-family:Arial_3ed;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts932" type="text/css" >

@font-face {
	font-family: Arial_3ed;
	src: url("fonts/Arial_3ed.woff") format("woff");
}

@font-face {
	font-family: NeoSansIntelMedium_1uk0;
	src: url("fonts/NeoSansIntelMedium_1uk0.woff") format("woff");
}

@font-face {
	font-family: NeoSansIntel_1uk1;
	src: url("fonts/NeoSansIntel_1uk1.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_3ec;
	src: url("fonts/TimesNewRoman_3ec.woff") format("woff");
}

@font-face {
	font-family: Verdana_3e8;
	src: url("fonts/Verdana_3e8.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg932Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg932" style="-webkit-user-select: none;"><object width="935" height="1210" data="932/932.svg" type="image/svg+xml" id="pdf932" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_932" class="t s1_932">23-34 </span><span id="t2_932" class="t s1_932">Vol. 3B </span>
<span id="t3_932" class="t s2_932">ARCHITECTURE COMPATIBILITY </span>
<span id="t4_932" class="t s3_932">23.33.1 </span><span id="t5_932" class="t s3_932">Segment Wraparound </span>
<span id="t6_932" class="t s4_932">On the 8086 processor, an attempt to access a memory operand that crosses offset 65,535 or 0FFFFH or offset 0 </span>
<span id="t7_932" class="t s4_932">(for example, moving a word to offset 65,535 or pushing a word when the stack pointer is set to 1) causes the </span>
<span id="t8_932" class="t s4_932">offset to wrap around modulo 65,536 or 010000H. With the Intel 286 processor, any base and offset combination </span>
<span id="t9_932" class="t s4_932">that addresses beyond 16 MBytes wraps around to the 1 MByte of the address space. The P6 family, Pentium, </span>
<span id="ta_932" class="t s4_932">Intel486, and Intel386 processors in real-address mode generate an exception in these cases: </span>
<span id="tb_932" class="t s5_932">• </span><span id="tc_932" class="t s4_932">A general-protection exception (#GP) if the segment is a data segment (that is, if the CS, DS, ES, FS, or GS </span>
<span id="td_932" class="t s4_932">register is being used to address the segment). </span>
<span id="te_932" class="t s5_932">• </span><span id="tf_932" class="t s4_932">A stack-fault exception (#SS) if the segment is a stack segment (that is, if the SS register is being used). </span>
<span id="tg_932" class="t s4_932">An exception to this behavior occurs when a stack access is data aligned, and the stack pointer is pointing to the </span>
<span id="th_932" class="t s4_932">last aligned piece of data that size at the top of the stack (ESP is FFFFFFFCH). When this data is popped, no </span>
<span id="ti_932" class="t s4_932">segment limit violation occurs and the stack pointer will wrap around to 0. </span>
<span id="tj_932" class="t s4_932">The address space of the P6 family, Pentium, and Intel486 processors may wraparound at 1 MByte in real-address </span>
<span id="tk_932" class="t s4_932">mode. An external A20M# pin forces wraparound if enabled. On Intel 8086 processors, it is possible to specify </span>
<span id="tl_932" class="t s4_932">addresses greater than 1 MByte. For example, with a selector value FFFFH and an offset of FFFFH, the effective </span>
<span id="tm_932" class="t s4_932">address would be 10FFEFH (1 MByte plus 65519 bytes). The 8086 processor, which can form addresses up to 20 </span>
<span id="tn_932" class="t s4_932">bits long, truncates the uppermost bit, which “wraps” this address to FFEFH. However, the P6 family, Pentium, and </span>
<span id="to_932" class="t s4_932">Intel486 processors do not truncate this bit if A20M# is not enabled. </span>
<span id="tp_932" class="t s4_932">If a stack operation wraps around the address limit, shutdown occurs. (The 8086 processor does not have a shut- </span>
<span id="tq_932" class="t s4_932">down mode or a limit.) </span>
<span id="tr_932" class="t s4_932">The behavior when executing near the limit of a 4-GByte selector (limit = FFFFFFFFH) is different between the </span>
<span id="ts_932" class="t s4_932">Pentium Pro and the Pentium 4 family of processors. On the Pentium Pro, instructions which cross the limit -- for </span>
<span id="tt_932" class="t s4_932">example, a two byte instruction such as INC EAX that is encoded as FFH C0H starting exactly at the limit faults for </span>
<span id="tu_932" class="t s4_932">a segment violation (a one byte instruction at FFFFFFFFH does not cause an exception). Using the Pentium 4 micro- </span>
<span id="tv_932" class="t s4_932">processor family, neither of these situations causes a fault. </span>
<span id="tw_932" class="t s4_932">Segment wraparound and the functionality of A20M# is used primarily by older operating systems and not used by </span>
<span id="tx_932" class="t s4_932">modern operating systems. On newer Intel 64 processors, A20M# may be absent. </span>
<span id="ty_932" class="t s6_932">23.34 </span><span id="tz_932" class="t s6_932">STORE BUFFERS AND MEMORY ORDERING </span>
<span id="t10_932" class="t s4_932">The Pentium 4, Intel Xeon, and P6 family processors provide a store buffer for temporary storage of writes (stores) </span>
<span id="t11_932" class="t s4_932">to memory (see Section 12.10, “Store Buffer”). Writes stored in the store buffer(s) are always written to memory </span>
<span id="t12_932" class="t s4_932">in program order, with the exception of “fast string” store operations (see Section 9.2.4, “Fast-String Operation and </span>
<span id="t13_932" class="t s4_932">Out-of-Order Stores”). </span>
<span id="t14_932" class="t s4_932">The Pentium processor has two store buffers, one corresponding to each of the pipelines. Writes in these buffers </span>
<span id="t15_932" class="t s4_932">are always written to memory in the order they were generated by the processor core. </span>
<span id="t16_932" class="t s4_932">It should be noted that only memory writes are buffered and I/O writes are not. The Pentium 4, Intel Xeon, P6 </span>
<span id="t17_932" class="t s4_932">family, Pentium, and Intel486 processors do not synchronize the completion of memory writes on the bus and </span>
<span id="t18_932" class="t s4_932">instruction execution after a write. An I/O, locked, or serializing instruction needs to be executed to synchronize </span>
<span id="t19_932" class="t s4_932">writes with the next instruction (see Section 9.3, “Serializing Instructions”). </span>
<span id="t1a_932" class="t s4_932">The Pentium 4, Intel Xeon, and P6 family processors use processor ordering to maintain consistency in the order </span>
<span id="t1b_932" class="t s4_932">that data is read (loaded) and written (stored) in a program and the order the processor actually carries out the </span>
<span id="t1c_932" class="t s4_932">reads and writes. With this type of ordering, reads can be carried out speculatively and in any order, reads can pass </span>
<span id="t1d_932" class="t s4_932">buffered writes, and writes to memory are always carried out in program order. (See Section 9.2, “Memory </span>
<span id="t1e_932" class="t s4_932">Ordering,” for more information about processor ordering.) The Pentium </span><span id="t1f_932" class="t s7_932">III </span><span id="t1g_932" class="t s4_932">processor introduced a new instruction </span>
<span id="t1h_932" class="t s4_932">to serialize writes and make them globally visible. Memory ordering issues can arise between a producer and a </span>
<span id="t1i_932" class="t s4_932">consumer of data. The SFENCE instruction provides a performance-efficient way of ensuring ordering between </span>
<span id="t1j_932" class="t s4_932">routines that produce weakly-ordered results and routines that consume this data. </span>
<span id="t1k_932" class="t s4_932">No re-ordering of reads occurs on the Pentium processor, except under the condition noted in Section 9.2.1, </span>
<span id="t1l_932" class="t s4_932">“Memory Ordering in the Intel® Pentium® and Intel486™ Processors,” and in the following paragraph describing </span>
<span id="t1m_932" class="t s4_932">the Intel486 processor. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
