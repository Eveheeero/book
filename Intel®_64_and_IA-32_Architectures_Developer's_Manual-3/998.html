<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p998" style="overflow: hidden; position: relative; background-color: white; width: 935px; height: 1210px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_998{left:69px;bottom:68px;letter-spacing:0.12px;}
#t2_998{left:110px;bottom:68px;letter-spacing:0.1px;}
#t3_998{left:69px;bottom:1141px;letter-spacing:-0.15px;word-spacing:0.01px;}
#t4_998{left:69px;bottom:1088px;letter-spacing:-0.15px;word-spacing:-0.79px;}
#t5_998{left:465px;bottom:1088px;letter-spacing:-0.15px;word-spacing:-0.85px;}
#t6_998{left:588px;bottom:1088px;letter-spacing:-0.13px;word-spacing:-0.85px;}
#t7_998{left:69px;bottom:1071px;letter-spacing:-0.14px;word-spacing:-0.48px;}
#t8_998{left:69px;bottom:1054px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#t9_998{left:69px;bottom:1037px;letter-spacing:-0.13px;word-spacing:-0.49px;}
#ta_998{left:69px;bottom:1011px;}
#tb_998{left:95px;bottom:1014px;letter-spacing:-0.13px;word-spacing:-0.44px;}
#tc_998{left:69px;bottom:988px;}
#td_998{left:95px;bottom:991px;letter-spacing:-0.14px;word-spacing:-0.43px;}
#te_998{left:69px;bottom:965px;}
#tf_998{left:95px;bottom:969px;letter-spacing:-0.14px;word-spacing:-0.48px;}
#tg_998{left:95px;bottom:952px;letter-spacing:-0.15px;word-spacing:-0.5px;}
#th_998{left:69px;bottom:925px;}
#ti_998{left:95px;bottom:929px;letter-spacing:-0.14px;word-spacing:-0.43px;}
#tj_998{left:69px;bottom:906px;letter-spacing:-0.16px;word-spacing:-0.44px;}
#tk_998{left:500px;bottom:906px;letter-spacing:-0.17px;word-spacing:-0.46px;}
#tl_998{left:601px;bottom:906px;letter-spacing:-0.13px;word-spacing:-0.49px;}
#tm_998{left:69px;bottom:889px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#tn_998{left:69px;bottom:872px;letter-spacing:-0.15px;}
#to_998{left:69px;bottom:846px;}
#tp_998{left:95px;bottom:849px;letter-spacing:-0.17px;word-spacing:-0.39px;}
#tq_998{left:69px;bottom:823px;}
#tr_998{left:95px;bottom:826px;letter-spacing:-0.14px;word-spacing:-0.42px;}
#ts_998{left:69px;bottom:800px;}
#tt_998{left:95px;bottom:804px;letter-spacing:-0.14px;word-spacing:-0.36px;}
#tu_998{left:277px;bottom:804px;letter-spacing:-0.13px;word-spacing:-0.47px;}
#tv_998{left:69px;bottom:779px;letter-spacing:-0.16px;word-spacing:-0.46px;}
#tw_998{left:69px;bottom:762px;letter-spacing:-0.15px;word-spacing:-0.47px;}
#tx_998{left:69px;bottom:736px;}
#ty_998{left:95px;bottom:739px;letter-spacing:-0.16px;word-spacing:-0.43px;}
#tz_998{left:69px;bottom:713px;}
#t10_998{left:95px;bottom:716px;letter-spacing:-0.16px;word-spacing:-0.61px;}
#t11_998{left:95px;bottom:700px;letter-spacing:-0.13px;word-spacing:-0.96px;}
#t12_998{left:465px;bottom:700px;letter-spacing:-0.13px;word-spacing:-0.99px;}
#t13_998{left:640px;bottom:700px;letter-spacing:-0.13px;word-spacing:-0.97px;}
#t14_998{left:95px;bottom:683px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#t15_998{left:69px;bottom:656px;}
#t16_998{left:95px;bottom:660px;letter-spacing:-0.13px;}
#t17_998{left:125px;bottom:660px;letter-spacing:-0.15px;word-spacing:-1.17px;}
#t18_998{left:578px;bottom:660px;letter-spacing:-0.13px;word-spacing:-1.19px;}
#t19_998{left:95px;bottom:643px;letter-spacing:-0.15px;word-spacing:-0.42px;}
#t1a_998{left:69px;bottom:619px;letter-spacing:-0.16px;word-spacing:-0.43px;}
#t1b_998{left:69px;bottom:602px;letter-spacing:-0.13px;word-spacing:-0.5px;}
#t1c_998{left:69px;bottom:534px;letter-spacing:0.17px;}
#t1d_998{left:150px;bottom:534px;letter-spacing:0.2px;word-spacing:0.07px;}
#t1e_998{left:69px;bottom:509px;letter-spacing:-0.15px;word-spacing:-0.46px;}
#t1f_998{left:69px;bottom:492px;letter-spacing:-0.14px;word-spacing:-0.45px;}
#t1g_998{left:69px;bottom:475px;letter-spacing:-0.16px;word-spacing:-1.16px;}
#t1h_998{left:633px;bottom:482px;}
#t1i_998{left:644px;bottom:475px;letter-spacing:-0.12px;word-spacing:-1.19px;}
#t1j_998{left:69px;bottom:458px;letter-spacing:-0.15px;word-spacing:-0.45px;}
#t1k_998{left:69px;bottom:441px;letter-spacing:-0.15px;word-spacing:-0.47px;}
#t1l_998{left:69px;bottom:415px;}
#t1m_998{left:95px;bottom:419px;letter-spacing:-0.14px;word-spacing:-0.47px;}
#t1n_998{left:95px;bottom:402px;letter-spacing:-0.14px;word-spacing:-0.46px;}
#t1o_998{left:69px;bottom:375px;}
#t1p_998{left:95px;bottom:379px;letter-spacing:-0.14px;word-spacing:-0.46px;}
#t1q_998{left:95px;bottom:362px;letter-spacing:-0.14px;word-spacing:-0.44px;}
#t1r_998{left:95px;bottom:345px;letter-spacing:-0.13px;word-spacing:-1.11px;}
#t1s_998{left:281px;bottom:345px;letter-spacing:-0.14px;word-spacing:-1.12px;}
#t1t_998{left:396px;bottom:345px;letter-spacing:-0.14px;word-spacing:-1.09px;}
#t1u_998{left:724px;bottom:345px;letter-spacing:-0.14px;word-spacing:-1.05px;}
#t1v_998{left:95px;bottom:328px;letter-spacing:-0.15px;word-spacing:-0.42px;}
#t1w_998{left:69px;bottom:302px;}
#t1x_998{left:95px;bottom:305px;letter-spacing:-0.14px;word-spacing:-0.78px;}
#t1y_998{left:95px;bottom:289px;letter-spacing:-0.13px;word-spacing:-1.01px;}
#t1z_998{left:95px;bottom:272px;letter-spacing:-0.14px;word-spacing:-0.44px;}
#t20_998{left:95px;bottom:255px;letter-spacing:-0.14px;word-spacing:-0.48px;}
#t21_998{left:95px;bottom:231px;}
#t22_998{left:121px;bottom:231px;letter-spacing:-0.14px;word-spacing:-0.39px;}
#t23_998{left:95px;bottom:206px;}
#t24_998{left:121px;bottom:206px;letter-spacing:-0.16px;word-spacing:-0.39px;}
#t25_998{left:69px;bottom:133px;letter-spacing:-0.11px;}
#t26_998{left:91px;bottom:133px;letter-spacing:-0.12px;}
#t27_998{left:91px;bottom:116px;letter-spacing:-0.11px;}

.s1_998{font-size:12px;font-family:NeoSansIntel_1uk1;color:#000;}
.s2_998{font-size:14px;font-family:NeoSansIntel_1uk1;color:#0860A8;}
.s3_998{font-size:14px;font-family:Verdana_3e8;color:#000;}
.s4_998{font-size:14px;font-family:Verdana-Bold_3e7;color:#000;}
.s5_998{font-size:21px;font-family:TimesNewRoman_3ec;color:#000;}
.s6_998{font-size:21px;font-family:NeoSansIntelMedium_1uk0;color:#0860A8;}
.s7_998{font-size:11px;font-family:Verdana_3e8;color:#000;}
.s8_998{font-size:14px;font-family:NeoSansIntel_1uk1;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts998" type="text/css" >

@font-face {
	font-family: NeoSansIntelMedium_1uk0;
	src: url("fonts/NeoSansIntelMedium_1uk0.woff") format("woff");
}

@font-face {
	font-family: NeoSansIntel_1uk1;
	src: url("fonts/NeoSansIntel_1uk1.woff") format("woff");
}

@font-face {
	font-family: TimesNewRoman_3ec;
	src: url("fonts/TimesNewRoman_3ec.woff") format("woff");
}

@font-face {
	font-family: Verdana-Bold_3e7;
	src: url("fonts/Verdana-Bold_3e7.woff") format("woff");
}

@font-face {
	font-family: Verdana_3e8;
	src: url("fonts/Verdana_3e8.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg998Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg998" style="-webkit-user-select: none;"><object width="935" height="1210" data="998/998.svg" type="image/svg+xml" id="pdf998" style="width:935px; height:1210px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_998" class="t s1_998">26-22 </span><span id="t2_998" class="t s1_998">Vol. 3C </span>
<span id="t3_998" class="t s2_998">VMX NON-ROOT OPERATION </span>
<span id="t4_998" class="t s3_998">The root of each PASID-translation hierarchy is a 4-KByte </span><span id="t5_998" class="t s4_998">PASID directory</span><span id="t6_998" class="t s3_998">. The low PASID directory is located at </span>
<span id="t7_998" class="t s3_998">the low PASID directory address, and the high PASID directory is located at the high PASID directory address </span>
<span id="t8_998" class="t s3_998">(these physical addresses are VM-execution control fields in the VMCS). A PASID directory comprises 512 8-byte </span>
<span id="t9_998" class="t s3_998">entries, each of which has the following format: </span>
<span id="ta_998" class="t s5_998">• </span><span id="tb_998" class="t s3_998">Bit 0 is the entry’s present bit. The entry is used only if this bit is 1. </span>
<span id="tc_998" class="t s5_998">• </span><span id="td_998" class="t s3_998">Bits 11:1 are reserved and must be 0. </span>
<span id="te_998" class="t s5_998">• </span><span id="tf_998" class="t s3_998">Bits M–1:12 specify the 4-KByte aligned address of a PASID table (see below), where M is the processor’s </span>
<span id="tg_998" class="t s3_998">physical-address width. </span>
<span id="th_998" class="t s5_998">• </span><span id="ti_998" class="t s3_998">Bits 63:M are reserved and must be 0. </span>
<span id="tj_998" class="t s3_998">A PASID-translation hierarchy also includes up to 512 4-KByte </span><span id="tk_998" class="t s4_998">PASID tables</span><span id="tl_998" class="t s3_998">; each of these is referenced by a </span>
<span id="tm_998" class="t s3_998">PASID directory entry (see above). A PASID table comprises 1024 4-byte entries, each of which has the following </span>
<span id="tn_998" class="t s3_998">format: </span>
<span id="to_998" class="t s5_998">• </span><span id="tp_998" class="t s3_998">Bits 19:0 are the host PASID specified by the entry. </span>
<span id="tq_998" class="t s5_998">• </span><span id="tr_998" class="t s3_998">Bits 30:20 are reserved and must be 0. </span>
<span id="ts_998" class="t s5_998">• </span><span id="tt_998" class="t s3_998">Bits 31 is the entry’s valid </span><span id="tu_998" class="t s3_998">bit. The entry is used only if this bit is 1. </span>
<span id="tv_998" class="t s3_998">When PASID translation is enabled, the guest PASID determined by the instruction (see above) is converted to a </span>
<span id="tw_998" class="t s3_998">host PASID using the following process: </span>
<span id="tx_998" class="t s5_998">• </span><span id="ty_998" class="t s3_998">If bit 19 of guest PASID is clear, the low PASID directory is used; otherwise, the high PASID directory is used. </span>
<span id="tz_998" class="t s5_998">• </span><span id="t10_998" class="t s3_998">Bits 18:10 of the guest PASID select an entry from the PASID directory. A VM exit occurs if the entry’s present </span>
<span id="t11_998" class="t s3_998">bit is clear or if any reserved bit is set. Otherwise, bits </span><span id="t12_998" class="t s3_998">M:0 of the entry (with bit </span><span id="t13_998" class="t s3_998">0 cleared) contain the physical </span>
<span id="t14_998" class="t s3_998">address of a PASID table. </span>
<span id="t15_998" class="t s5_998">• </span><span id="t16_998" class="t s3_998">Bits </span><span id="t17_998" class="t s3_998">9:0 of the guest PASID select an entry from the PASID table. A VM </span><span id="t18_998" class="t s3_998">exit occurs if the entry’s valid bit is clear </span>
<span id="t19_998" class="t s3_998">or if any reserved bit is set. Otherwise, bits 19:0 of the entry are the host PASID. </span>
<span id="t1a_998" class="t s3_998">If PASID translation results in a VM exit (due to a present or valid bit being clear, or a reserved bit being set), the </span>
<span id="t1b_998" class="t s3_998">instruction does not complete and no enqueue store is performed. </span>
<span id="t1c_998" class="t s6_998">26.6 </span><span id="t1d_998" class="t s6_998">UNRESTRICTED GUESTS </span>
<span id="t1e_998" class="t s3_998">The first processors to support VMX operation require CR0.PE and CR0.PG to be 1 in VMX operation (see Section </span>
<span id="t1f_998" class="t s3_998">24.8). This restriction implies that guest software cannot be run in unpaged protected mode or in real-address </span>
<span id="t1g_998" class="t s3_998">mode. Later processors support a VM-execution control called “unrestricted guest”. </span>
<span id="t1h_998" class="t s7_998">1 </span>
<span id="t1i_998" class="t s3_998">If this control is 1, CR0.PE and </span>
<span id="t1j_998" class="t s3_998">CR0.PG may be 0 in VMX non-root operation. Such processors allow guest software to run in unpaged protected </span>
<span id="t1k_998" class="t s3_998">mode or in real-address mode. The following items describe the behavior of such software: </span>
<span id="t1l_998" class="t s5_998">• </span><span id="t1m_998" class="t s3_998">The MOV CR0 instructions does not cause a general-protection exception simply because it would set either </span>
<span id="t1n_998" class="t s3_998">CR0.PE and CR0.PG to 0. See Section 26.3 for details. </span>
<span id="t1o_998" class="t s5_998">• </span><span id="t1p_998" class="t s3_998">A logical processor treats the values of CR0.PE and CR0.PG in VMX non-root operation just as it does outside </span>
<span id="t1q_998" class="t s3_998">VMX operation. Thus, if CR0.PE = 0, the processor operates as it does normally in real-address mode (for </span>
<span id="t1r_998" class="t s3_998">example, it uses the 16-bit </span><span id="t1s_998" class="t s4_998">interrupt table </span><span id="t1t_998" class="t s3_998">to deliver interrupts and exceptions). If CR0.PG </span><span id="t1u_998" class="t s3_998">= 0, the processor </span>
<span id="t1v_998" class="t s3_998">operates as it does normally when paging is disabled. </span>
<span id="t1w_998" class="t s5_998">• </span><span id="t1x_998" class="t s3_998">Processor operation is modified by the fact that the processor is in VMX non-root operation and by the settings </span>
<span id="t1y_998" class="t s3_998">of the VM-execution controls just as it is in protected mode or when paging is enabled. Instructions, interrupts, </span>
<span id="t1z_998" class="t s3_998">and exceptions that cause VM exits in protected mode or when paging is enabled also do so in real-address </span>
<span id="t20_998" class="t s3_998">mode or when paging is disabled. The following examples should be noted: </span>
<span id="t21_998" class="t s3_998">— </span><span id="t22_998" class="t s3_998">If CR0.PG = 0, page faults do not occur and thus cannot cause VM exits. </span>
<span id="t23_998" class="t s3_998">— </span><span id="t24_998" class="t s3_998">If CR0.PE = 0, invalid-TSS exceptions do not occur and thus cannot cause VM exits. </span>
<span id="t25_998" class="t s8_998">1. </span><span id="t26_998" class="t s8_998">“Unrestricted guest” is a secondary processor-based VM-execution control. If bit 31 of the primary processor-based VM-execution </span>
<span id="t27_998" class="t s8_998">controls is 0, VMX non-root operation functions as if the “unrestricted guest” VM-execution control were 0. See Section 25.6.2. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
